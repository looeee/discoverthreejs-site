<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <title>Extend three.js With a Camera Controls Plugin | Discover three.js</title><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="ROBOTS" content="INDEX, FOLLOW" />

<meta name="application-name" content="Discover three.js" />

<meta itemprop="name" content="Discover three.js" />

<meta property="og:title" content="How to Use This Book | Discover three.js" />
<meta name="twitter:title" content="How to Use This Book | Discover three.js" />

<meta name="description" content="This page has been temporarily removed while I  work hard on updates. Please check back soon! Lots of goodies are planned :D" />
<meta property="og:description" content="This page has been temporarily removed while I  work hard on updates. Please check back soon! Lots of goodies are planned :D" />
<meta name="twitter:description" content="This page has been temporarily removed while I  work hard on updates. Please check back soon! Lots of goodies are planned :D" />

<meta
  itemprop="keywords"
  content="threejs webgl opengl fbx gltf khronos webvr vr webdev design cg graphics animation javascript esnext es6 education tutorials blog ebook node npm"
/>

<meta property="og:site_name" content="Discover three.js" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://discoverthreejs.com/" />
<meta
  property="og:image"
  content="https://discoverthreejs.com/static/images/logo.png"
/>
<meta
  property="twitter:image"
  content="https://discoverthreejs.com/static/images/logo.png"
/>
<meta name="twitter:creator" content="@lewy_blue" />
<meta name="twitter:site" content="@lewy_blue" />
<meta name="twitter:card" content="TODO" />
<meta name="twitter:image:width" content="1024" />
<meta name="twitter:image:height" content="1024" />

<meta name="theme-color" content="#FFFFFF" />
<meta name="msapplication-TileColor" content="#00aba9" />
<meta name="msapplication-TileImage" content="/mstile-150x150.png?v=43" /><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "WebPage",
    "image": "https://discoverthreejs.com/static/images/logo.png",
    "mainEntity": {
      "@type": "Book",
      "author": {
        "@type": "Person",
        "name": "Lewy Blue",
        "jobTitle": "Author",
        "url": "https://twitter.com/lewy_blue"
      },
      "about": "",
      "copyrightHolder": "https://discoverthreejs.com",
      "copyrightYear": "2021",
      "bookFormat": "http://schema.org/EBook",
      "datePublished": "2018-10-01",
      "image": "https://discoverthreejs.com/static/images/logo.png",
      "inLanguage": "English",
      "name": "Discover three.js",
      "genre": "Education",
      "keywords": "threejs webgl animation javascript es6 education tutorials blog ebook",
      "publisher": {
        "@type": "Organization",
        "name": "https://discoverthreejs.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://discoverthreejs.com/static/images/logo.png"
        }
      }
    }
  }
</script><link
      rel="canonical"
      href="https://discoverthreejs.com/book/introduction/about-the-book/"
    />

    <link rel="shortcut icon" type="image/png" href="/favicon.ico?v=43" />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/apple-touch-icon.png?v=43"
    />

    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/favicon-16x16.png?v=43"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/favicon-32x32.png?v=43"
    />

    <link rel="manifest" href="/site.json?v=43" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=43" color="#5bbad5" />
<style>
      .loading-page {
        display: none;
      }
    </style>

    <link href="/static/css/chapters.min.css?v=43" rel="stylesheet" />

    <noscript>
      <style>
        .loading-page {
          display: block;
        }
      </style>
      <link href="/static/css/noscript.min.css?v=43" rel="stylesheet" />
    </noscript>    
    
    
    

    

    

    

    

    

    

    

    <script type="module">
  import { setupChapterEarly } from "/static/js/chapterEarly.js";
  setupChapterEarly();

  window.addEventListener('load', async () => {
    const { setupChapterLate } = await import(
      "/static/js/chapterLate.js"
    );
    setupChapterLate();

    const { setupIDE } = await import(
      "/static/js/ide.js"
      );

    const ideConfig = {

      showIDE:  true ,
      IDE: {
        fullScreen: false,
        container: '#ide-wrapper',
        serverDirectory: 'static\/examples',
        stripDirectory: 'worlds\/first-steps\/camera-controls\/',
        closedFolders: 'assets,components,styles,vendor'
          .replace(/[\s\'\[\]']+/g, '')
          .split(','),
        comparisonMode: 'true',
        files: 'assets\/textures\/uv-test-bw.png, assets\/textures\/uv-test-col.png, worlds\/first-steps\/camera-controls\/src\/World\/components\/camera.js, worlds\/first-steps\/camera-controls\/src\/World\/components\/cube.js, worlds\/first-steps\/camera-controls\/src\/World\/components\/lights.js, worlds\/first-steps\/camera-controls\/src\/World\/components\/scene.js, worlds\/first-steps\/camera-controls\/src\/World\/systems\/renderer.js, worlds\/first-steps\/camera-controls\/src\/World\/systems\/Resizer.js, worlds\/first-steps\/camera-controls\/src\/World\/systems\/controls.start.js, worlds\/first-steps\/camera-controls\/src\/World\/systems\/controls.final.js, worlds\/first-steps\/camera-controls\/src\/World\/systems\/Loop.js, worlds\/first-steps\/camera-controls\/src\/World\/World.start.js, worlds\/first-steps\/camera-controls\/src\/World\/World.final.js, worlds\/first-steps\/camera-controls\/src\/main.js, styles\/main.css, vendor\/three\/build\/three.module.js, vendor\/three\/examples\/jsm\/controls\/OrbitControls.js, worlds\/first-steps\/camera-controls\/index.html'
          .replace(/[\s\'\[\]']+/g, '')
          .split(','),
        entry: 'index.html',
        activeDocument: 'src\/World\/systems\/controls.js',
        switchImportsAllowed:
          'true',
      },
    }

    await setupIDE(ideConfig);
  });
</script></head>
  <body class="loading-page"><nav class="top-nav">
  <div class="nav-background"></div>

  <div class="icon-group left">
    <input type="checkbox" id="left-menu-toggle" class="hidden-input" />
    <label
      for="left-menu-toggle"
      class="control-elem"
      title="Table Of Contents"
    >
      <span class="open-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
        >
          <path
            fill="currentColor"
            d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"
          />
        </svg>
      </span>
      <span class="close-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 352 512"
        >
          <path
            fill="currentColor"
            d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"
          />
        </svg>
      </span>
    </label>

    <input
      type="checkbox"
      id="toggle-ide"
      class="hidden-input ide-toggle"
    />
    <label
      for="toggle-ide"
      class="control-elem ide-control hide"
      title="Show/Hide IDE"
    >
      <span class="on-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"
          />
        </svg>
      </span>
      <span class="off-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"
          />
        </svg>
      </span>
    </label>
  </div>

  <div class="icon-group center">
    <a
      href="/book/introduction/"
      title="Welcome to Discover three.js!"
      class="control-elem previous"
    >
      <svg
        class="icon"
        role="img"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 320 512"
      >
        <path
          fill="currentColor"
          d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"
        />
      </svg>
    </a>
    <a
      href="/book/introduction/prerequisites/"
      class="control-elem next"
      title="What Do You Need to Run a three.js App?"
    >
      <svg
        class="icon"
        role="img"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 320 512"
      >
        <path
          fill="currentColor"
          d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"
        />
      </svg>
    </a>
  </div>

  <div class="icon-group right">
    <input type="checkbox" id="right-menu-toggle" class="hidden-input" />
    <label for="right-menu-toggle" class="control-elem" title="Main Menu">
      <span class="open-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
        >
          <path
            fill="currentColor"
            d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
          />
        </svg>
      </span>
      <span class="close-close hide">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 352 512"
        >
          <path
            fill="currentColor"
            d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"
          />
        </svg>
      </span>
    </label>
  </div>
</nav><div class="wrapper orientation-auto">
      <main class="panel animate">
        <div class="scroller">
          <div class="content">
            
              <div class="chapter-info">Word Count:3049, reading time: ~15minutes</div>
            
            <h1 id="extend-threejs-with-a-camera-controls-plugin">Extend three.js With a Camera Controls Plugin</h1>
<p>The three.js core is a powerful, lightweight, and focused <strong>rendering framework</strong>, with intentionally limited capabilities. It has everything you need to create and render physically correct scenes, however, it does not have everything you need to create, say, a game, or a product configurator. Even when building relatively simple apps, you will often find yourself needing functionality that&rsquo;s not in the core. When this happens, before you write any code yourself, check to see whether there&rsquo;s a plugin available. The three.js repo contains hundreds of extensions, in the <a href="https://github.com/mrdoob/three.js/tree/master/examples/jsm" target="_blank" rel="noopener noreferrer"><em><strong>examples/jsm</strong></em></a> folder. These are also included in <a href="https://www.npmjs.com/package/three" target="_blank" rel="noopener noreferrer">the NPM package</a>, for those of you using a package manager.</p>
<p>There are also a huge number of plugins to be found scattered around the web. However, these are sometimes poorly maintained and may not work with the latest three.js version, so in this book, we&rsquo;ll restrict ourselves to using the official plugins from the repo. There, we&rsquo;ll find all kinds of plugins, and most of them are showcased in one of <a href="https://threejs.org/examples/" target="_blank" rel="noopener noreferrer">the examples</a>. These add all kinds of functionality, such as mirrored surfaces:</p>
<figure class="">
  <iframe title="three.js node materials mirror example" width="100%" height="500px" src="https://threejs.org/examples/webgl_mirror_nodes.html" importance="low" loading="lazy" sandbox="allow-scripts"></iframe></figure>
<p>Or, how about a loader for the Lego LDraw format:</p>
<figure class="">
  <iframe title="three.js LDraw format example" width="100%" height="500px" src="https://threejs.org/examples/webgl_loader_ldraw.html" importance="low" loading="lazy" sandbox="allow-scripts"></iframe></figure>
<p>Here are a few more:</p>
<ul>
<li><a href="https://threejs.org/examples/?q=postprocessing#webgl_postprocessing_glitch" target="_blank" rel="noopener noreferrer">One of the many post-processing effects</a></li>
<li><a href="https://threejs.org/examples/?q=loader#webgl_loader_fbx" target="_blank" rel="noopener noreferrer">A loader for the Autodesk FBX format</a></li>
<li><a href="https://threejs.org/examples/?q=exporter#misc_exporter_gltf" target="_blank" rel="noopener noreferrer">An exporter for glTF format</a></li>
<li><a href="https://threejs.org/examples/?q=ocean#webgl_shaders_ocean" target="_blank" rel="noopener noreferrer">Physically accurate ocean and sky</a></li>
</ul>
<p>Each extension is stored in a separate module in <em><strong>examples/jsm</strong></em>, and to use them, we simply import them into our app, much like any other three.js class.</p>
<h2 id="our-first-plugin-orbitcontrols">Our First Plugin: <code>OrbitControls</code></h2>
<p>One of the most popular extensions is <a href="https://threejs.org/docs/#examples/en/controls/OrbitControls" target="_blank" rel="noopener noreferrer"><code>OrbitControls</code></a>, a camera controls plugin which allows you to orbit, pan, and zoom the camera using touch, mouse, or keyboard. With these controls, we can view a scene from all angles, zoom in to check tiny details, or zoom out to get a birds-eye overview. Orbit controls allow us to control the camera in three ways:</p>
<ol>
<li><strong>Orbit around a fixed point, using the left mouse button or a single finger swipe.</strong></li>
<li><strong>Pan the camera using the right mouse button, the arrow keys, or a two-finger swipe.</strong></li>
<li><strong>Zoom the camera using the scroll wheel or a pinch gesture.</strong></li>
</ol>
<p>You can find the module containing <code>OrbitControls</code> on the three.js repo, in the <em><strong>examples/jsm/controls/</strong></em> folder, in a file called <em><strong><a href="https://github.com/mrdoob/three.js/blob/master/examples/jsm/controls/OrbitControls.js" target="_blank" rel="noopener noreferrer">OrbitControls.js</a></strong></em>. There&rsquo;s also an <a href="https://threejs.org/examples/?q=controls#misc_controls_orbit" target="_blank" rel="noopener noreferrer">official example showcasing <code>OrbitControls</code></a>. For a quick reference of all the control&rsquo;s settings and features, head over to the <a href="https://threejs.org/docs/#examples/en/controls/OrbitControls" target="_blank" rel="noopener noreferrer"><code>OrbitControls</code> doc page</a>.</p>
<h3 id="importing-plugins">Importing Plugins</h3>
<p>Since the plugins are part of the three.js repo and included in the NPM package, importing them works in much the same way as <a href="/book/first-steps/first-scene/#import-classes-from-threejs">importing classes from the three.js core</a>, except that each plugin is in a separate module. Refer back to <a href="/book/introduction/get-threejs/">0.5: How to Include three.js in Your Projects</a> for a reminder of how to include the three.js files in your app, or head over to <a href="/book/appendix/javascript-modules/">A.4: JavaScript Modules</a> for a deeper exploration of how JavaScript modules work.</p>
<p>In the editor, we&rsquo;ve placed the <em><strong>OrbitControls.js</strong></em> file in the equivalent directory to the repo, under <em><strong>vendor/</strong></em>. Go ahead and locate the file now. Since the editor uses NPM style imports, we can import <code>OrbitControls</code> like this, from anywhere in our code like this:</p>


<section class="highlight-wrapper"><span class="caption">Importing the <code>OrbitControls</code> extension using NPM style imports</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
import { OrbitControls } from &#39;three/examples/jsm/controls/OrbitControls.js&#39;;
</code>
  </pre>
</section>

<p>Once again, if you’re working locally and not using a bundler, you’ll have to change the import path. For example, you can import from unpkg.com instead.</p>


<section class="highlight-wrapper"><span class="caption">Importing the <code>OrbitControls</code> extension using relative imports</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
import { OrbitControls } from &#39;https://unpkg.com/three@0.117.0/examples/jsm/controls/OrbitControls.js&#39;;
</code>
  </pre>
</section>

<blockquote>
<p>Important note: Make sure you import plugins from <em><strong>examples/jsm/</strong></em> and not legacy plugins from <em><strong>examples/js/</strong></em>!</p>
</blockquote>
<h3 id="the-_controlsjs_-module">The <em><strong>controls.js</strong></em> Module</h3>
<p>As usual, we&rsquo;ll create a new module in our app to handle setting up the controls. Since the controls operate on the camera, they will go in the <a href="/book/first-steps/world-app/#systems-and-components">systems category</a>. Open or create the module <em><strong>systems/controls.js</strong></em> to handle setting up the camera controls. This new module has the same structure as most of our other modules. First, import the <code>OrbitControls</code> class, then make a <code>createControls</code> function, and finally, export the function:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>systems/controls.js</strong></em>: initial setup</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
import { OrbitControls } from &#39;three/examples/jsm/controls/OrbitControls.js&#39;;

function createControls() {}

export { createControls };
</code>
  </pre>
</section>

<p>Back over in World, add the new function to the list of imports:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>World.js</strong></em>: import the controls module</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="1"
    data-line="6"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">import { createCamera } from &#39;./components/camera.js&#39;;
import { createCube } from &#39;./components/cube.js&#39;;
import { createLights } from &#39;./components/lights.js&#39;;
import { createScene } from &#39;./components/scene.js&#39;;

import { createControls } from &#39;./systems/controls.js&#39;;
import { createRenderer } from &#39;./systems/renderer.js&#39;;
import { Resizer } from &#39;./systems/Resizer.js&#39;;
import { Loop } from &#39;./systems/Loop.js&#39;;
</code>
  </pre>
</section>

<p>Next, call the function and store the result in a variable called <code>controls</code>. While you&rsquo;re here, comment out the line adding <code>cube</code> to the <code>updatables</code> array. This will stop the cube from rotating and make the effect of the controls easier to see:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>World.js</strong></em>: stop the cube&rsquo;s animation</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="17"
    data-line="22,27,28"
    data-line-offset="17"
    >
    <code class="highlight language-js match-braces">

  constructor() {
    camera = createCamera();
    scene = createScene();
    renderer = createRenderer();

    const controls = createControls();

    const cube = createCube();
    const light = createLights();

    // disabled mesh rotation
    // updatables.push(cube);

    scene.add(cube, light);

    this.canvas = renderer.domElement;
  }

</code>
  </pre>
</section>

<h3 id="initialize-the-controls">Initialize the Controls</h3>
<p>If you check out the <a href="https://threejs.org/docs/#examples/en/controls/OrbitControls" target="_blank" rel="noopener noreferrer"><code>OrbitControls</code> docs page</a>, you&rsquo;ll see that the constructor takes two parameters: a <code>Camera</code>, and a <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element" target="_blank" rel="noopener noreferrer"><code>HTMLDOMElement</code></a>. We&rsquo;ll use our camera for the first parameter and the canvas, stored in <code>renderer.domElement</code>, for the second.</p>
<p>Internally, <code>OrbitControls</code> uses <code>addEventListener</code> to listen for user input. The controls will listen for events such as  <code>click</code>, <code>wheel</code>, <code>touchmove</code>, and <code>keydown</code>, amongst others, and use these to move the camera. We previously used this method to <a href="/book/first-steps/responsive-design/#listen-for-resize-events-on-the-browser-window">listen for the <code>resize</code> event</a> when we set up automatic resizing. There, we listened for the <code>resize</code> event on the entire <code>window</code>. Here, the controls will listen for user input on whatever element we pass in as the second parameter. The rest of the page will be unaffected. In other words, when we pass in the canvas, the controls will work when the mouse/touch is over the canvas, but the rest of the page will continue to work as normal.</p>
<p>Pass the camera and canvas into the <code>createControls</code> function, then create the controls:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: create the controls</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="3"
    data-line=""
    data-line-offset="3"
    >
    <code class="highlight language-js match-braces">
function createControls(camera, canvas) {
  const controls = new OrbitControls(camera, canvas);

  return controls;
}
</code>
  </pre>
</section>

<p>Back over in the world module, pass in the <code>camera</code> and <code>renderer.domElement</code>:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>World.js</strong></em>: initialize the controls</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="18"
    data-line="24"
    data-line-offset="18"
    >
    <code class="highlight language-js match-braces">

constructor(container) {
  camera = createCamera();
  scene = createScene();
  renderer = createRenderer();
  container.append(renderer.domElement);

  const controls = createControls(camera, renderer.domElement);

  // ...
}

</code>
  </pre>
</section>

<p>With that, the controls should start to work. Take them for a spin!</p>
<p>You&rsquo;ll immediately notice <a href="#a-glaring-problem">the cube is not illuminated from the back</a>. We&rsquo;ll explain why and how to fix this in the next chapter.</p>
<h2 id="working-with-the-controls">Working with the Controls</h2>
<h3 id="manually-set-the-target">Manually Set the Target</h3>
<p>By default, the controls orbit around the center of the scene, point $(0,0,0)$. This is stored in the <code>controls.target</code> property, which is a <code>Vector3</code>. We can move this target to a new position:</p>


<section class="highlight-wrapper"><span class="caption">Set the control&rsquo;s target</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.target.set(1,2,3);
</code>
  </pre>
</section>

<p>We can also point the controls at an object by copying the object&rsquo;s position.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>World.js</strong></em>: target an object</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.target.copy(cube.position);
</code>
  </pre>
</section>

<p>Whenever you pan the controls (using the right mouse button), the target will pan too. If you need a fixed target, you can disable panning using <code>controls.enablePan = false</code>.</p>
<h3 id="enable-damping-for-added-realism">Enable Damping for Added Realism</h3>
<p>As soon as the user stops interacting with the scene, the camera will come to an abrupt stop. Objects in the real world have inertia and never stop abruptly like this, so we can make the controls feel more realistic by enabling <a href="https://threejs.org/docs/index.html#examples/en/controls/OrbitControls.enableDamping" target="_blank" rel="noopener noreferrer">damping</a>.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: enable damping</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.enableDamping = true;
</code>
  </pre>
</section>

<p>With damping enabled, the controls will slow to a stop over several frames which gives them a feeling of
weight. You can adjust <a href="https://threejs.org/docs/#examples/en/controls/OrbitControls.dampingFactor" target="_blank" rel="noopener noreferrer">the <code>.dampingFactor</code></a> to control how fast the camera comes to a stop. However, for damping to work, we must call <code>controls.update</code> every frame in the animation loop. If we&rsquo;re <a href="#rendering-on-demand-with-orbitcontrols">rendering frames on demand</a> instead of using the loop, we cannot use damping.</p>
<h3 id="update-the-controls-in-the-animation-loop">Update the Controls in the Animation Loop</h3>
<p>Whenever we need to update an object in the loop, we&rsquo;ll use the technique we devised when creating <a href="/book/first-steps/animation-loop/#create-the-animation">the cube&rsquo;s animation</a>. In other words, we&rsquo;ll give the controls a <code>.tick</code> method and then add them to the <code>loop.updatables</code> array. First, the <code>.tick</code> method:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: add controls.tick</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="3"
    data-line="12"
    data-line-offset="3"
    >
    <code class="highlight language-js match-braces">function createControls(camera, canvas) {
  const controls = new OrbitControls(camera, canvas);

  // damping and auto rotation require
  // the controls to be updated each frame

  // this.controls.autoRotate = true;
  controls.enableDamping = true;

  controls.tick = () =&gt; controls.update();

  return controls;
}
</code>
  </pre>
</section>

<p>Here, <code>.tick</code> simply calls <code>controls.update</code>. Next, add the controls to the <code>updatables</code> array:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>World.js</strong></em>: add the controls to the updatables array</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="18"
    data-line="29"
    data-line-offset="18"
    >
    <code class="highlight language-js match-braces">    camera = createCamera();
    renderer = createRenderer();
    scene = createScene();
    loop = new Loop(camera, scene, renderer);
    container.append(renderer.domElement);

    const controls = createControls(camera, renderer.domElement);

    const cube = createCube();
    const light = createLights();

    loop.updatables.push(controls);

    // stop the cube&#39;s animation
    // loop.updatables.push(cube);

    scene.add(cube, light);

    const resizer = new Resizer(container, camera, renderer);
  }
</code>
  </pre>
</section>

<p>Now, <code>controls.tick</code> will be called once per frame in <a href="/book/first-steps/animation-loop/#the-update-loop">the update loop</a>, and damping will work. Test it out. Can you see the difference?</p>
<h3 id="working-with-the-camera-while-using-orbitcontrols">Working With the Camera While Using <code>OrbitControls</code></h3>
<p>With the controls in place, we have relinquished control of the camera to them. However, sometimes you need to take back control to manually position the camera. There are two ways to go about this:</p>
<ol>
<li>Cut/jump to a new camera position</li>
<li>Smoothly animate to a new camera position</li>
</ol>
<p>We&rsquo;ll take a brief look at how you would go about both of these, but we won&rsquo;t add the code to our app.</p>
<h4 id="cut-to-a-new-camera-position">Cut to a New Camera Position</h4>
<p>To perform a camera cut, update the camera&rsquo;s transform as usual, and then call <code>controls.update</code>:</p>


<section class="highlight-wrapper"><span class="caption">Manually adjust the camera transform while using <code>OrbitControls</code></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
// move the camera
camera.position.set(1,2,3);

// and/or rotate the camera
camera.rotation.set(0.5, 0, 0);

// then tell the controls to update
controls.update();
</code>
  </pre>
</section>

<p>If you&rsquo;re calling <code>.update</code> in the loop, you don&rsquo;t need to do it manually and you can simply move the camera. If you move the camera <em>without</em> calling <code>.update</code>, weird things will happen, so watch out!</p>
<p>One important thing to note here: when you move the camera, the <code>controls.target</code> does not move. If you have not moved it, it will remain at the center of the scene. When you move the camera to a new position but leave the target unchanged, the camera will not only move but also <em>rotate</em> so that it continues to point at the target. This means that camera movements may not work as you expect when using the controls. Often, you will need to move the camera and the target at the same time to get your desired outcome.</p>
<h4 id="smoothly-transition-to-a-new-camera-position">Smoothly Transition to a New Camera Position</h4>
<p>If you want to smoothly animate the camera to a new position, you will probably need to transition the camera and the target at the same time, and the best place to do this is in the <code>controls.tick</code> method. However, you will need to disable the controls for the duration of the animation, otherwise, if the user attempts to move the camera before the animation has completed, you&rsquo;ll end up with the controls fighting against your animation, often with disastrous results.</p>


<section class="highlight-wrapper"><span class="caption">Disable the controls while animating the camera or target</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

controls.enabled = false;

</code>
  </pre>
</section>

<h3 id="save-and-restore-a-view-state">Save and Restore a View State</h3>
<p>You can save the current view using <a href="https://threejs.org/docs/index.html#examples/en/controls/OrbitControls.saveState" target="_blank" rel="noopener noreferrer"><code>.saveState</code></a>, and later restore it using <a href="https://threejs.org/docs/index.html#examples/en/controls/OrbitControls.reset" target="_blank" rel="noopener noreferrer"><code>.reset</code></a>:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: save and restore state</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.saveState();

// sometime later:
controls.reset();
</code>
  </pre>
</section>

<p>If we call <code>.reset</code> without first calling <code>.saveState</code>, the camera will jump back to the position it was in when we created the controls.</p>
<h3 id="disposing-of-the-controls">Disposing of the Controls</h3>
<p>If you no longer need the controls, you can clean them up using <a href="https://threejs.org/docs/#examples/en/controls/OrbitControls.dispose" target="_blank" rel="noopener noreferrer">.dispose</a>, which will remove all event listeners created by the controls from the canvas.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: remove all event listeners from the canvas</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.dispose();
</code>
  </pre>
</section>

<h2 id="rendering-on-demand-with-orbitcontrols">Rendering on Demand with <code>OrbitControls</code></h2>
<p>A couple of chapters ago we set up the <a href="/book/first-steps/animation-loop/">animation loop</a>, a powerful tool that allows us to create beautiful animations with ease. On the other hand, as we discussed at the end of that chapter, <a href="/book/first-steps/animation-loop/#to-loop-or-not-to-loop">the loop does have some downsides</a>, such as increased battery use on mobile devices. As a result, sometime we&rsquo;ll choose to render frames <strong>on demand</strong> instead of generating a constant stream of frames using the loop.</p>
<p>Now that our app has orbit controls, whenever the user interacts with your scene, the controls will move the camera to a new position, and when this occurs you must draw a new frame, otherwise, you won&rsquo;t be able to see that the camera has moved. If you&rsquo;re using the animation loop, that&rsquo;s not a problem. However, if we&rsquo;re rendering on demand we&rsquo;ll have to figure something else out.</p>
<p>Fortunately, <code>OrbitControls</code> provides an easy way to generate new frames whenever the camera moves. The controls have a custom event called <code>change</code> which we can listen for using <a href="/book/appendix/dom-api-reference/#listening-for-events"><code>addEventListener</code></a>. This event will fire whenever a user interaction causes the controls to move the camera.</p>
<p>To use rendering on demand with the orbit control, you must render a frame whenever this event fires:</p>


<section class="highlight-wrapper"><span class="caption">Rendering on demand with <code>OrbitControls</code></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.addEventListener(&#39;change&#39;, () =&gt; {
  renderer.render(scene, camera);
});
</code>
  </pre>
</section>

<p>To set this up inside <em><strong>World.js</strong></em>, you&rsquo;ll use <code>this.render</code>:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>World.js</strong></em>: Rendering on demand with <code>OrbitControls</code></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.addEventListener(&#39;change&#39;, () =&gt; {
  this.render();
});
</code>
  </pre>
</section>

<p>Next, over in <em><strong>main.js</strong></em>, make sure we&rsquo;re no longer starting the loop. Instead, render the initial frame:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em>: render a single frame instead of starting the loop</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="10"
    data-line=""
    data-line-offset="10"
    >
    <code class="highlight language-js match-braces">

// render the inital frame
world.render();

</code>
  </pre>
</section>

<p>If you make these changes in your app, you&rsquo;ll see that this results in a slight problem. When we render the initial frame in <em><strong>main.js</strong></em>, the texture has not yet loaded, so the cube will look black. If we were running the loop, this frame would almost instantly be replaced with a new one after the texture loads, so it might not even be noticeable that the cube was black for a few milliseconds. However, with rendering on demand, we are now only generating new frames when the user interacts with the scene and moves the camera. As soon as you move the controls, sure enough, a new frame will be created and the texture will show up.</p>
<p>As a result, you also need to generate a new frame after the texture has loaded. We won&rsquo;t cover how to do that here, but hopefully, it highlights why rendering on demand is trickier than using the loop. You have to consider all situations where you need a new frame (for example, don&rsquo;t forget that you&rsquo;ll also need to <a href="/book/first-steps/responsive-design/#create-an-onresize-hook">render a frame on resize</a>).</p>
<h2 id="orbitcontrols-configuration"><code>OrbitControls</code> Configuration</h2>
<p>The controls have lots of options that allow us to adjust them to our needs. Most of these are <a href="https://threejs.org/docs/index.html#examples/en/controls/OrbitControls" target="_blank" rel="noopener noreferrer">well explained in the docs</a>, so we won&rsquo;t cover them exhaustively here. The following are some of the most important.</p>
<h3 id="enable-or-disable-the-controls">Enable or Disable the Controls</h3>
<p>We can <a href="https://threejs.org/docs/index.html#examples/en/controls/OrbitControls.enabled" target="_blank" rel="noopener noreferrer">enable or disable the controls</a> entirely:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: enable or disable</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.enabled = false;
</code>
  </pre>
</section>

<p>Or, we can disable any of the three modes of control individually:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: disable individual modes</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.enableRotate = false;
controls.enableZoom = false;
controls.enablePan = false;
</code>
  </pre>
</section>

<p>By default, you can use the arrow keys to pan the camera. To disable this:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: disable keyboard pan controls</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.enableKeys = false;
</code>
  </pre>
</section>

<h3 id="auto-rotate">Auto Rotate</h3>
<p><a href="https://threejs.org/docs/index.html#examples/en/controls/OrbitControls.autoRotate" target="_blank" rel="noopener noreferrer"><code>.autoRotate</code></a> will make the camera automatically rotate around the <code>.target</code>, and <a href="https://threejs.org/docs/#examples/en/controls/OrbitControls.autoRotateSpeed" target="_blank" rel="noopener noreferrer"><code>.autoRotateSpeed</code></a> controls how fast:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: enable auto-rotation</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.autoRotate = true;
controls.autoRotateSpeed = 1;
</code>
  </pre>
</section>

<p>As with <code>.enableDamping</code>, you must call <code>controls.update</code> every frame for this to work. Note that <code>.autoRotate</code> will still work if the controls are disabled.</p>
<h3 id="limiting-zoom">Limiting Zoom</h3>
<p>We can limit how far the controls will zoom in or out:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: limit zoom</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.minDistance = 5;
controls.maxDistance = 20;
</code>
  </pre>
</section>

<p>Make sure <code>minDistance</code> is not smaller than <a href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera.near" target="_blank" rel="noopener noreferrer">the camera&rsquo;s near clipping plane</a> and <code>maxDistance</code> is not greater than <a href="https://threejs.org/docs/#api/en/cameras/PerspectiveCamera.far" target="_blank" rel="noopener noreferrer">the camera&rsquo;s far clipping plane</a>. Also, <code>minDistance</code> must be smaller than <code>maxDistance</code>.</p>
<h3 id="limiting-rotation">Limiting Rotation</h3>
<p>We can limit the control&rsquo;s rotation, both horizontally (azimuth angle):</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: limit horizontal rotation</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.minAzimuthAngle = - Infinity; // default
controls.maxAzimuthAngle = Infinity; // default
</code>
  </pre>
</section>

<p>&hellip; and vertically (polar angle)</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>controls.js</strong></em>: limit vertical rotation</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
controls.minPolarAngle = 0; // default
controls.maxPolarAngle = Math.PI; // default
</code>
  </pre>
</section>

<p>Remember, <a href="/book/first-steps/transformations/#the-unit-of-rotation-is-radians">rotations are specified using radians</a>, not degrees, and $\pi$ radians is equal to $180^{\circ}$.</p>
<h2 id="a-glaring-problem">A Glaring Problem!</h2>
<p>As soon as we rotate the camera using our fancy new orbit controls, we&rsquo;ll see a glaring problem. The camera rotates, but the light is fixed and shines only from one direction. The rear faces of the cube receive no light at all!</p>
<p>In the real world, light bounces and reflects off every surface, so the rear of the cube would be dimly lit. There&rsquo;s nothing in this simple scene aside from the cube, so there&rsquo;s nothing for the light to bounce off.  But, even if there was, performing these calculations is much too expensive for us to do in real-time. In the next chapter, we will look at a technique for overcoming this problem known as <strong>ambient lighting</strong>.</p>
<h2 id="challenges">Challenges</h2>
<aside class="success">
  
    <h3 id="easy">Easy</h3>
<ol>
<li>
<p>Try adjusting the control&rsquo;s <a href="#limiting-zoom">minimum and maximum zoom levels</a>. What happens if you make these two values equal? Or make <code>minDistance</code> greater than <code>maxDistance</code>?</p>
</li>
<li>
<p>Enable <a href="#auto-rotate">auto-rotation</a> and then try adjusting the rotation speed.</p>
</li>
<li>
<p>Try <a href="#enable-or-disable-the-controls">disabling each of the three modes of control</a>, one at a time, and observe the results.</p>
</li>
<li>
<p><a href="#enable-damping-for-added-realism">Adjust the damping speed</a> (<code>.dampingFactor</code>) to get a feel for how damping works. Values greater than 0 and less than 1 work best.</p>
</li>
</ol>

  
</aside>
<aside class="notice">
  
    <h3 id="medium">Medium</h3>
<ol>
<li>
<p>Try adjusting the control&rsquo;s <a href="#limiting-rotation">horizontal and vertical rotation limits</a>. Remember, if you are working in degrees you must convert to radians. Look inside <em><strong>cube.js</strong></em> if you need a reminder of how that works.</p>
</li>
<li>
<p>Add a button (or a click event listener) to the page, and whenever you click the button, move the camera and control&rsquo;s target to a new, random position. Try and constrain the movement so that the cube is always still somewhere on the screen.</p>
</li>
</ol>

  
</aside>
<aside class="warning">
  
    <h3 id="hard">Hard</h3>
<ol>
<li>
<p>Set up <a href="#rendering-on-demand-with-orbitcontrols">rendering on demand</a> while using the controls, including generating a new frame after the texture has loaded, and whenever the scene is resized.</p>
</li>
<li>
<p>Can you make the camera and the control&rsquo;s target animate to a new position over a few seconds? Maybe add a button to the page, and when you click it, play the animation. See what happens when you animate just the camera, or just the target, or what happens when you don&rsquo;t disable the controls while animating. The best place to set up this animation is in the controls module.</p>
</li>
</ol>

  
</aside>

          </div>
        </div>
      </main><div id="ide-wrapper" class="panel animate disabled hide">
  <nav id="ide-controls-top" class="control-bar fuzzy-background">
    <input
      type="checkbox"
      id="toggle-complete"
      class="ide-toggle simple-toggle"
      title="Show completed code (your changes will be saved)"
      disabled="true"
    />

    <input
      type="checkbox"
      id="toggle-filetree"
      class="hidden-input ide-toggle"
    />
    <label
      for="toggle-filetree"
      class="control-elem"
      title="Toggle Filetree"
    >
      <span class="off-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"
          />
        </svg>
      </span>
      <span class="on-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"
          />
        </svg>
      </span>
    </label>

    <button
      type="button"
      id="reset-active-file"
      class="control-elem"
      title="Reset Current File"
      disabled
    >
      <svg
        class="icon"
        role="img"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 448 512"
      >
        <path
          fill="currentColor"
          d="M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"
        />
      </svg>
    </button>
    <button
      type="button"
      id="reset-all-files"
      class="control-elem"
      title="Reset All Changes"
      disabled
    >
      <svg
        class="icon"
        role="img"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
      >
        <path
          fill="currentColor"
          d="M0 436V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v151.9L235.5 71.4C256.1 54.3 288 68.6 288 96v131.9L459.5 71.4C480.1 54.3 512 68.6 512 96v320c0 27.4-31.9 41.7-52.5 24.6L288 285.3V416c0 27.4-31.9 41.7-52.5 24.6L64 285.3V436c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12z"
        />
      </svg>
    </button>
    <input
      type="checkbox"
      id="toggle-preview"
      class="hidden-input ide-toggle"
    />
    <label
      for="toggle-preview"
      class="control-elem"
      title="Toggle Preview"
    >
      <span class="on-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 576 512"
        >
          <path
            fill="currentColor"
            d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"
          />
        </svg>
      </span>
      <span class="off-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 576 512"
        >
          <path
            fill="currentColor"
            d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"
          />
        </svg>
      </span>
    </label>
    <button
      type="button"
      id="new-window-preview"
      class="control-elem hide"
      title="Open Preview in New Window"
    >
      <svg
        class="icon"
        role="img"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 512 512"
      >
        <path
          fill="currentColor"
          d="M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"
        />
      </svg>
    </button>
  </nav>
  <div id="editor-panel" class="panel animate">
    <section
      id="filetree-panel"
      class="filetree panel animate fuzzy-background"
    >
      <div class="file-control-bar-top control-bar">
        <button
          type="button"
          id="create-file-button"
          class="control-elem"
          title="New File or Folder"
        >
          <svg
            class="icon"
            role="img"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 384 512"
          >
            <path
              fill="currentColor"
              d="M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 160v48c0 4.4-3.6 8-8 8h-56v56c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-56h-56c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h56v-56c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v56h56c4.4 0 8 3.6 8 8z"
            />
          </svg>
        </button>
        <button
          type="button"
          id="delete-file-button"
          class="control-elem"
          title="Delete File"
          disabled
        >
          <svg
            class="icon"
            role="img"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 448 512"
          >
            <path
              fill="currentColor"
              d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"
            />
          </svg>
        </button>
      </div>
      <div id="filetree"></div>
      <div class="file-control-bar-bottom control-bar">
        <button
          type="button"
          id="download-button"
          class="control-elem"
          title="Download as Zip"
        >
          <svg
            class="icon"
            role="img"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 512 512"
          >
            <path
              fill="currentColor"
              d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"
            />
          </svg>
        </button>
        <div class="import-style-select">
          <span>Import Style</span>
          <select
            id="select-import-style"
            class=""
            title="Select Import Style"
            disabled
          >
            <option value="npm" selected="selected">NPM (default)</option>
            
            <option value="cdn">CDN</option>
          </select>
        </div>
      </div>
    </section>
    <section id="editor" class="panel animate">
      <div class="image-wrapper fuzzy-background">
        <img
          src="data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA="
          alt="Selected Texture"
          id="image-preview"
        />
      </div>
    </section>
  </div>
  <div id="preview" class="panel animate">
    <div id="preview-overlay"></div>
    
  </div>
</div></div><div class="side-menu left-menu">
  <div class="icons">
    <input type="checkbox" id="invert-colors-toggle" class="hidden-input" />
    <label
      for="invert-colors-toggle"
      class="control-elem"
      title="Day/Night Theme"
    >
      <span class="day-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"
          />
        </svg>
      </span>
      <span class="night-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"
          />
        </svg>
      </span>
    </label>

    <input type="checkbox" id="orientation-toggle" class="hidden-input" />
    <label
      for="orientation-toggle"
      class="control-elem hide"
      title="Orientation lock: auto/portrait/landscape"
    >
      <span class="auto-icon hide">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"
          />
        </svg>
      </span>
      <span class="portrait-icon hide">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 320 512"
        >
          <path
            fill="currentColor"
            d="M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"
          />
        </svg>
      </span>
      <span class="landscape-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 320 512"
        >
          <path
            fill="currentColor"
            d="M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"
          />
        </svg>
      </span>
    </label>
  </div>

  <nav class="table-of-contents">
    <h2><a href="/book/contents/">Table of Contents</a></h2>
    <div id="main-toc"><ul>
    <li class="section-head">
      <span class="chapter">0:</span><a href="/book/introduction/" title="Welcome to Discover three.js!">Welcome to Discover three.js!</a></li>
    <li class="">
      <span class="chapter">0.1:</span><a href="/book/introduction/about-the-book/" title="How to Use This Book">How to Use This Book</a></li>
    <li class="">
      <span class="chapter">0.2:</span><a href="/book/introduction/prerequisites/" title="What Do You Need to Run a three.js App?">What Do You Need to Run a three.js App?</a></li>
    <li class="">
      <span class="chapter">0.3:</span><a href="/book/introduction/get-help/" title="Welcome to the Community: three.js Around the Web">Welcome to the Community: three.js Around the Web</a></li>
    <li class="">
      <span class="chapter">0.4:</span><a href="/book/introduction/github-repo/" title="three.js on GitHub - Where the Magic Happens">three.js on GitHub - Where the Magic Happens</a></li>
    <li class="">
      <span class="chapter">0.5:</span><a href="/book/introduction/get-threejs/" title="How to Include three.js in Your Projects">How to Include three.js in Your Projects</a></li>
    <li class="">
      <span class="chapter">0.7:</span><a href="/book/introduction/threejs-with-frameworks/" title="Using three.js with React, Vue.js, Angular, Svelte, TypeScript...">Using three.js with React, Vue.js, Angular, Svelte, TypeScript...</a></li>
    <li class="">
      <span class="chapter">:</span><a href="/" title="Discover three.js!">Discover three.js!</a></li>
    <li class="section-head">
      <span class="chapter">1:</span><a href="/book/first-steps/" title="Getting Started: Here&#39;s Where the Real Fun Begins!">Getting Started: Here&#39;s Where the Real Fun Begins!</a></li>
    <li class="">
      <span class="chapter">1.1:</span><a href="/book/first-steps/app-structure/" title="The Structure of a three.js App">The Structure of a three.js App</a></li>
    <li class="">
      <span class="chapter">1.2:</span><a href="/book/first-steps/first-scene/" title="Your First three.js Scene: Hello, Cube!">Your First three.js Scene: Hello, Cube!</a></li>
    <li class="">
      <span class="chapter">1.3:</span><a href="/book/first-steps/world-app/" title="Introducing the World App">Introducing the World App</a></li>
    <li class="">
      <span class="chapter">1.4:</span><a href="/book/first-steps/physically-based-rendering/" title="Physically Based Rendering and Lighting">Physically Based Rendering and Lighting</a></li>
    <li class="">
      <span class="chapter">1.5:</span><a href="/book/first-steps/transformations/" title="Transformations and Coordinate Systems">Transformations and Coordinate Systems</a></li>
    <li class="">
      <span class="chapter">1.6:</span><a href="/book/first-steps/responsive-design/" title="Making Our Scenes Responsive (and also Dealing with Jaggies)">Making Our Scenes Responsive (and also Dealing with Jaggies)</a></li>
    <li class="">
      <span class="chapter">1.7:</span><a href="/book/first-steps/animation-loop/" title="The Animation Loop">The Animation Loop</a></li>
    <li class="">
      <span class="chapter">1.8:</span><a href="/book/first-steps/textures-intro/" title="A Brief Introduction to Texture Mapping">A Brief Introduction to Texture Mapping</a></li>
    <li class="">
      <span class="chapter">1.9:</span><a href="/book/first-steps/camera-controls/" title="Extend three.js With a Camera Controls Plugin">Extend three.js With a Camera Controls Plugin</a></li>
    <li class="">
      <span class="chapter">1.10:</span><a href="/book/first-steps/ambient-lighting/" title="Ambient Lighting: Illumination from Every Direction">Ambient Lighting: Illumination from Every Direction</a></li>
    <li class="">
      <span class="chapter">1.11:</span><a href="/book/first-steps/organizing-with-group/" title="Organizing Your Scenes">Organizing Your Scenes</a></li>
    <li class="">
      <span class="chapter">1.12:</span><a href="/book/first-steps/built-in-geometries/" title="The Built-In Geometries">The Built-In Geometries</a></li>
    <li class="">
      <span class="chapter">1.13:</span><a href="/book/first-steps/load-models/" title="Load 3D Models in glTF Format">Load 3D Models in glTF Format</a></li>
    <li class="">
      <span class="chapter">1.14:</span><a href="/book/first-steps/animation-system/" title="The three.js Animation System">The three.js Animation System</a></li>
    <li class="section-head">
      <span class="chapter">A:</span><a href="/book/appendix/" title="Appendices">Appendices</a></li>
    <li class="">
      <span class="chapter">A.1:</span><a href="/book/appendix/html-and-css-reference/" title="HTML and CSS Used in This Book">HTML and CSS Used in This Book</a></li>
    <li class="">
      <span class="chapter">A.2:</span><a href="/book/appendix/javascript-reference/" title="JavaScript Reference">JavaScript Reference</a></li>
    <li class="">
      <span class="chapter">A.3:</span><a href="/book/appendix/dom-api-reference/" title="The Document Object Model and DOM API">The Document Object Model and DOM API</a></li>
    <li class="">
      <span class="chapter">A.4:</span><a href="/book/appendix/javascript-modules/" title="JavaScript Modules">JavaScript Modules</a></li>
    <li class="">
      <span class="chapter">A.5:</span><a href="/book/appendix/asynchronous-javascript/" title="Asynchronous JavaScript">Asynchronous JavaScript</a></li>
    <li class="">
      <span class="chapter">B.1:</span><a href="/book/appendix/threejs-versions/" title="Dealing with Different three.js Versions">Dealing with Different three.js Versions</a></li>
    <li class="unavailable section-head">
      <span class="chapter">R:</span><span>References and Resources</span></li>
    <li class="">
      <span class="chapter">:</span><a href="/tips-and-tricks/" title="The Big List of three.js Tips and Tricks!">The Big List of three.js Tips and Tricks!</a></li>
    <li class="">
      <span class="chapter">:</span><a href="/apps/" title="Apps and Utilities">Apps and Utilities</a></li>
    <li class="">
      <span class="chapter">:</span><a href="/examples/" title="Live Code Examples">Live Code Examples</a></li>
    <li class="">
      <span class="chapter">:</span><a href="/modules/" title="NPM Modules">NPM Modules</a></li>
    <li class="">
      <span class="chapter">:</span><a href="/privacy/" title="Privacy">Privacy</a></li>
    <li class="">
      <span class="chapter">:</span><a href="/terms/" title="Terms and Conditions">Terms and Conditions</a></li>
</ul>
</div>
  </nav>
</div>
<nav class="side-menu right-menu">
  <h2>
    <a href="/">
      <img
        alt="Discover three.js logo"
        width="100%"
        src="/static/images/logo/banner_trans_512.png"
      />
    </a>
  </h2>
  <ul class="links" style="text-align: center">
    <li><a href="/book/contents/">Table Of Contents</a></li>
    <li><a href="/tips-and-tricks/">Tips and Tricks</a></li>

    <li style="margin: auto">
      <a href="/#mailing-list-signup" class="internal-link"
        >Stay up to date - sign up to the mailing list!</a
      >
    </li>
  </ul>
</nav><style>
  @font-face {
    font-family: "Open Sans";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local("Open Sans Regular"), local("OpenSans-Regular"),
      url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0b.woff2)
        format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
  @font-face {
    font-family: "Varela Round";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local("Varela Round Regular"), local("VarelaRound-Regular"),
      url(https://fonts.gstatic.com/s/varelaround/v12/w8gdH283Tvk__Lua32TysjIfp8uP.woff2)
        format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
  @font-face {
    font-family: "Fira Code";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url(https://fonts.gstatic.com/s/firacode/v9/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVD7Ng.woff2)
      format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
</style></body>
</html>
