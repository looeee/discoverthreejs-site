<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <title>Organizing Your Scenes | Discover three.js</title><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="ROBOTS" content="INDEX, FOLLOW" />

<meta name="application-name" content="Discover three.js" />

<meta itemprop="name" content="Discover three.js" />

<meta property="og:title" content="How to Use This Book | Discover three.js" />
<meta name="twitter:title" content="How to Use This Book | Discover three.js" />

<meta name="description" content="No book is complete without references! Lots of resources to continue your learning in the amazing world of 3D graphics here" />
<meta property="og:description" content="No book is complete without references! Lots of resources to continue your learning in the amazing world of 3D graphics here" />
<meta name="twitter:description" content="No book is complete without references! Lots of resources to continue your learning in the amazing world of 3D graphics here" />

<meta
  itemprop="keywords"
  content="threejs webgl opengl fbx gltf khronos webvr vr webdev design cg graphics animation javascript esnext es6 education tutorials blog ebook node npm"
/>

<meta property="og:site_name" content="Discover three.js" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://discoverthreejs.com/" />
<meta
  property="og:image"
  content="https://discoverthreejs.com/static/images/logo.png"
/>
<meta
  property="twitter:image"
  content="https://discoverthreejs.com/static/images/logo.png"
/>
<meta name="twitter:creator" content="@lewy_blue" />
<meta name="twitter:site" content="@lewy_blue" />
<meta name="twitter:card" content="TODO" />
<meta name="twitter:image:width" content="1024" />
<meta name="twitter:image:height" content="1024" />

<meta name="theme-color" content="#FFFFFF" />
<meta name="msapplication-TileColor" content="#00aba9" />
<meta name="msapplication-TileImage" content="/mstile-150x150.png?v=43" /><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "WebPage",
    "image": "https://discoverthreejs.com/static/images/logo.png",
    "mainEntity": {
      "@type": "Book",
      "author": {
        "@type": "Person",
        "name": "Lewy Blue",
        "jobTitle": "Author",
        "url": "https://twitter.com/lewy_blue"
      },
      "about": "",
      "copyrightHolder": "https://discoverthreejs.com",
      "copyrightYear": "2021",
      "bookFormat": "http://schema.org/EBook",
      "datePublished": "2018-10-01",
      "image": "https://discoverthreejs.com/static/images/logo.png",
      "inLanguage": "English",
      "name": "Discover three.js",
      "genre": "Education",
      "keywords": "threejs webgl animation javascript es6 education tutorials blog ebook",
      "publisher": {
        "@type": "Organization",
        "name": "https://discoverthreejs.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://discoverthreejs.com/static/images/logo.png"
        }
      }
    }
  }
</script><link
      rel="canonical"
      href="https://discoverthreejs.com/book/introduction/about-the-book/"
    />

    <link rel="shortcut icon" type="image/png" href="/favicon.ico?v=43" />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/apple-touch-icon.png?v=43"
    />

    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/favicon-16x16.png?v=43"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/favicon-32x32.png?v=43"
    />

    <link rel="manifest" href="/site.json?v=43" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=43" color="#5bbad5" />
<style>
  .loading-page {
    display: none;
  }
</style>

<link href="/static/css/chapters.min.css?v=43" rel="stylesheet" />

<noscript>
  <style>
    .loading-page {
      display: block;
    }
  </style>
  <link href="/static/css/noscript.min.css?v=43" rel="stylesheet" />
</noscript>    
    
    
    

    

    

    

    

    

    

    

    <script type="module">
      console.log("TEST")
      const x =  false ;
      console.log('x: ', x);

      import { setupChapterEarly } from "/static/js/chapter.early.js";
      setupChapterEarly();

      window.addEventListener('load', async () => {
        const { setupChapterLate } = await import(
          "/static/js/chapter.late.js"
        );
        setupChapterLate();

        const { setupIDE } = await import(
          "/static/js/ide.js"
        );

        const ideConfig = {

          showIDE:  true ,
          IDE: {
            fullScreen: false,
            container: '#ide-wrapper',
            serverDirectory: 'static\/examples',
            stripDirectory: 'worlds\/first-steps\/organizing-with-group\/',
            closedFolders: '[\u0022systems\u0022,\u0022styles\u0022,\u0022vendor\u0022]'
              .replace(/[\s\'\[\]']+/g, '')
              .split(','),
            comparisonMode: 'true',
            files: '[\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/components\/camera.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/components\/lights.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/components\/meshGroup.start.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/components\/meshGroup.final.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/components\/scene.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/systems\/controls.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/systems\/renderer.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/systems\/Resizer.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/systems\/Loop.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/World.start.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/World\/World.final.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/src\/main.js\u0022,\u0022styles\/main.css\u0022,\u0022vendor\/three\/build\/three.module.js\u0022,\u0022vendor\/three\/examples\/jsm\/controls\/OrbitControls.js\u0022,\u0022worlds\/first-steps\/organizing-with-group\/index.html\u0022]'
              .replace(/[\s\'\[\]']+/g, '')
              .split(','),
            startFiles: 'null'
              .replace(/[\s\'\[\]']+/g, '')
              .split(','),
            finalFiles: 'null'
              .replace(/[\s\'\[\]']+/g, '')
              .split(','),
            entry: 'index.html',
            activeDocument: 'src\/World\/components\/meshGroup.js',
            switchImportsAllowed:
              'true',
          },
        }

        console.log('ideConfig: ', ideConfig);
        setupIDE(ideConfig);
      });
    </script>

  </head>
  <body class="loading-page"><nav class="top-nav">
  <div class="nav-background"></div>

  <div class="icon-group left">
    <input type="checkbox" id="left-menu-toggle" class="hidden-input" />
    <label
      for="left-menu-toggle"
      class="control-elem"
      title="Table Of Contents"
    >
      <span class="open-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
        >
          <path
            fill="currentColor"
            d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"
          />
        </svg>
      </span>
      <span class="close-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 352 512"
        >
          <path
            fill="currentColor"
            d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"
          />
        </svg>
      </span>
    </label>

    <input
      type="checkbox"
      id="toggle-ide"
      class="hidden-input ide-toggle"
    />
    <label
      for="toggle-ide"
      class="control-elem ide-control hide"
      title="Show/Hide IDE"
    >
      <span class="on-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"
          />
        </svg>
      </span>
      <span class="off-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"
          />
        </svg>
      </span>
    </label>
  </div>

  <div class="icon-group center">
    <a
      href="/book/introduction/"
      title="Welcome to Discover three.js!"
      class="control-elem previous"
    >
      <svg
        class="icon"
        role="img"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 320 512"
      >
        <path
          fill="currentColor"
          d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"
        />
      </svg>
    </a>
    <a
      href="/book/introduction/prerequisites/"
      class="control-elem next"
      title="What Do You Need to Run a three.js App?"
    >
      <svg
        class="icon"
        role="img"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 320 512"
      >
        <path
          fill="currentColor"
          d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"
        />
      </svg>
    </a>
  </div>

  <div class="icon-group right">
    <input type="checkbox" id="right-menu-toggle" class="hidden-input" />
    <label for="right-menu-toggle" class="control-elem" title="Main Menu">
      <span class="open-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
        >
          <path
            fill="currentColor"
            d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
          />
        </svg>
      </span>
      <span class="close-close hide">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 352 512"
        >
          <path
            fill="currentColor"
            d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"
          />
        </svg>
      </span>
    </label>
  </div>
</nav><div class="wrapper orientation-auto">
      <main class="panel animate">
        <div class="scroller">
          <div class="content">
            
              <div class="chapter-info">Word Count:3972, reading time: ~19minutes</div>
            

            <h1 id="organizing-your-scenes">Organizing Your Scenes</h1>
<p>In every chapter so far, we&rsquo;ve created examples using nothing but our trusty cube. Don&rsquo;t you think it&rsquo;s about time we moved on to some other shapes? Or even (gasp!) more than one object at the same time? Switching to a new geometry is easy since we can use any of the twenty of so geometries that come with the three.js core, as we&rsquo;ll see in the next chapter. However, once we start to add lots of objects to our scenes, we also need to think about how to organize and keep track of them, both within the 3D space of the scene and in our code.</p>
<p>In this chapter, we&rsquo;ll introduce a new geometry called <code>SphereBufferGeometry</code>, and we&rsquo;ll use this to showcase some features we can use to keep our scenes and code organized: the <code>Group</code> class, which is used to organize objects within the <a href="/book/first-steps/transformations/#the-scene-graph">scene graph</a>, and the <code>.clone</code> method, which you can use to create identical copies of an existing object in a single line of code.</p>
<h2 id="introducing-spherebuffergeometry">Introducing <code>SphereBufferGeometry</code></h2>
<figure class="">
  <iframe title="The SphereBufferGeometry in action" width="100%" height="500px" src="https://threejs.org/docs/scenes/geometry-browser.html#SphereBufferGeometry" importance="low" loading="lazy" sandbox="allow-scripts"></iframe><figcaption>The <code>SphereBufferGeometry</code> in action</figcaption></figure>
<p>The <a href="https://threejs.org/docs/#api/en/geometries/SphereBufferGeometry" target="_blank" rel="noopener noreferrer"><code>SphereBufferGeometry</code></a>  geometry constructor takes up to seven parameters, all optional. We&rsquo;ll focus on the first three here:</p>


<section class="highlight-wrapper"><span class="caption">Creating a <code>SphereBufferGeometry</code></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

import { SphereBufferGeometry } from &#39;three&#39;;

const radius = 0.25;
const widthSegments = 16;
const heightSegments = 16;

const geometry = new SphereBufferGeometry(radius, widthSegments, heightSegments);

</code>
  </pre>
</section>

<p>The radius defines how big the sphere will be. More interesting are the next two parameters, which specify how much detail the geometry has around its width (equator) and height, respectively. The <a href="/book/first-steps/first-scene/#the-geometry"><code>BoxBufferGeometry</code> has similar parameters</a>, however, they are less important as they don&rsquo;t change the shape of the box. The reason for this that all geometries are made out of triangles - you can see these outlined on the sphere in the scene above. To create a curved surface like a sphere we need to use lots of very tiny triangles.</p>
<p>Try experimenting with different values for <code>widthSegments</code> and <code>heightSegments</code> to see how these settings affect the quality of the geometry. It&rsquo;s important to use the smallest value that looks good for both settings. The number of triangles the sphere is built from increases very quickly when you use larger values for these parameters. What you&rsquo;re looking for is a tradeoff between quality and performance. If the sphere is far away from the camera or very small, you might be able to get away with a low-quality geometry made out of very few triangles, while if the sphere is the main focal point of your scene (such as a globe or planet), you will probably want to use a higher quality geometry.</p>
<h2 id="adding-many-objects-to-the-scene">Adding Many Objects to the Scene</h2>
<p>In a few moments, we&rsquo;ll create twenty-one sphere-shaped meshes and add them to our scene, arranged in a circle around the center. We could, of course, add each sphere to the scene one by one (in the following examples we&rsquo;ve skipped setting the spheres&rsquo; positions for brevity).</p>


<section class="highlight-wrapper"><span class="caption">Adding lots of sphere to the scene, one by one</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const sphere1 = new Mesh(geometry, material);
const sphere2 = new Mesh(geometry, material);
const sphere3 = new Mesh(geometry, material);
// ...
const sphere20 = new Mesh(geometry, material);
const sphere21 = new Mesh(geometry, material);

scene.add(sphere1);
scene.add(sphere2);
scene.add(sphere3);
// ...
scene.add(sphere20);
scene.add(sphere21);

</code>
  </pre>
</section>

<p>Kind of tedious, don&rsquo;t you think? This is the perfect time to use a loop:</p>


<section class="highlight-wrapper"><span class="caption">Creating many spheres in a loop</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

for (let i = 0; i &lt; 21; i&#43;&#43;) {
  const sphere = new Mesh(geometry, material);
  scene.add(sphere);
}

</code>
  </pre>
</section>

<p>That&rsquo;s better. We&rsquo;ve gone from over forty lines of code to just four. However, we have to think about
this issue from two perspectives: clean code, and a clean scene graph. There&rsquo;s nothing wrong, technically, with adding lots of objects directly to the scene like this. There are no issues with performance or anything else. The problems will come when we want to do something with the spheres. Perhaps we want to show/hide them all at once, or perhaps we want to animate them (as we&rsquo;ll do below). In that case, we&rsquo;ll have to keep track of all of them in our code and change them one by one, and to animate them we would have to add a <code>.tick</code> method to all twenty-one spheres.</p>
<p>It would be much better if we had some way of treating them as a group, don&rsquo;t you think?</p>
<h2 id="hello-group">The <code>Group</code> Object</h2>
<p><a href="https://threejs.org/docs/#api/objects/Group" target="_blank" rel="noopener noreferrer">Groups</a> occupy <a href="/book/first-steps/transformations/#the-object3d-base-class-and-the-scene-graph">a position in the scene graph</a> and can have children, but are themselves invisible. If the <code>Scene</code> represents the entire universe, then you can think of a <code>Group</code> as a single <em>compound</em> object within that universe.</p>
<figure >
  <img src="/static/images/first-steps/scene_tree.svg" loading="lazy" alt="A `Group` in the Scene Graph" title="A `Group` in the Scene Graph"  />
    <figcaption>A <code>Group</code> in the Scene Graph</figcaption></figure>
<p>When we move a group around, all of its children move too. Likewise, if we rotate or scale a group, all of its children will be rotated or scaled too. However, the children can also be translated, rotated, or scaled independently. This is exactly how objects behave in the real world. For example, a car is made up of separate pieces like the body, windows, wheels, engine, and so on, and when you move the car they all move with it. But the wheels can rotate independently, and you can open the doors and roll down the windows, spin the steering wheel, and so on.</p>
<p>Of course, all of that applies to <em>every</em> scene object. Every scene object has <code>.add</code> and <code>.remove</code> methods inherited from <code>Object3D</code>, just like the <code>Group</code> and the <code>Scene</code> itself, and <a href="/book/first-steps/transformations/#working-with-the-scene-graph">every object can hold a position in the scene graph and have children</a>. The difference is that groups are <em>purely organizational</em>. Other scene objects, like meshes, lights, cameras, and so on, have some other purpose in addition to occupying a place in the scene graph. However, groups exist purely to help you manipulate other scene objects.</p>
<h3 id="working-with-groups">Working with Groups</h3>
<p>Like the <code>Scene</code> constructor, the <code>Group</code> constructor doesn&rsquo;t take any parameters:</p>


<section class="highlight-wrapper"><span class="caption">Importing and creating a <code>Group</code></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
import {
  Group,
} from &#39;three.module.js&#39;;

const group = new Group();
</code>
  </pre>
</section>

<p>You can <a href="https://threejs.org/docs/#api/en/core/Object3D.add" target="_blank" rel="noopener noreferrer"><code>.add</code></a> and <a href="https://threejs.org/docs/#api/en/core/Object3D.remove" target="_blank" rel="noopener noreferrer"><code>.remove</code></a> children from a group:</p>


<section class="highlight-wrapper"><span class="caption">Adding and removing objects from a <code>Group</code></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
group.add(mesh);
group.add(light);

// later
group.remove(light);
</code>
  </pre>
</section>

<p>Once you add the group to your scene, any children of the group become part of the scene too:</p>


<section class="highlight-wrapper"><span class="caption">Adding a group to your scene</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
// the mesh (and light if we didn&#39;t remove it)
// will become visible
scene.add(group);
</code>
  </pre>
</section>

<p>Getting back to our spheres, we&rsquo;ll create the spheres in a loop like before, but now we&rsquo;ll add them to a group, and then we&rsquo;ll add the group to the scene.</p>


<section class="highlight-wrapper"><span class="caption">Adding the spheres to a group instead of the scene allows us to manipulate them as a unit</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const scene = new Scene();
const group = new Group();
scene.add(group);

for (let i = 0; i &lt; 21; i&#43;&#43;) {
  const sphere = new Mesh(geometry, material);
  group.add(sphere);
}

</code>
  </pre>
</section>

<figure class="medium right">
  <iframe title="A `group` in action" width="100%" height="500px" src="https://threejs.org/examples/webgl_loader_collada_kinematics.html" importance="low" loading="lazy" sandbox="allow-scripts"></iframe><figcaption>A <code>Group</code> in action</figcaption></figure>
<p>In case our simple group of spheres has not convinced you, a classic example of the reason for grouping objects is a robotic arm. The arm in this scene consists of at least four individually moving pieces, and they are connected by joints in a hierarchy, with the base of the arm at the top and the &ldquo;hand&rdquo; at the bottom. Imagine if these were all added directly to the scene, with no connection to each other, and our task was to animate them. Each joint in the arm requires the joints preceding it to remain connected while it moves. If we had to account for this without any kind of connection between the pieces, there would be a lot of painful math involved. However, when we connect the pieces in a parent-child relationship within the scene graph, the hierarchical movements logically follow. When we move the entire group, the whole arm will move. If we rotate the base, the upper joints will move but the group and base will not move. When we rotate the middle joint, the top joint will rotate too, and finally, when we rotate the top joint, nothing else will be forced to move with it.</p>
<p>This kind of logical connection between objects is one of the things that grouping objects within the scene graph makes easy.</p>
<h2 id="introduce-clone">The <code>.clone</code> Method</h2>
<p>In the above examples where we created lots of spheres, we skipped over the part where we have to move each sphere into a new position. If we don&rsquo;t do that, all of the spheres will remain at the exact center of the scene, all jumbled on top of each other. This is where cloning an object can be useful. We can set up one object just how we like it, then we can create an exact clone. This clone will have the same transform, the same shape, the same material, if it&rsquo;s a light, it will have the same color and intensity, if it&rsquo;s a camera it will have the same field of view and aspect ratio, and so on. Then, we can make whatever adjustments we want to the clone.</p>
<p>Nearly all objects in three.js have a <code>.clone</code> method, which allows you to create an identical copy of that object. All scene objects inherit from <a href="https://threejs.org/docs/#api/en/core/Object3D.clone" target="_blank" rel="noopener noreferrer"><code>Object3D.clone</code></a>, while geometries inherit from <a href="https://threejs.org/docs/#api/en/core/BufferGeometry.clone" target="_blank" rel="noopener noreferrer"><code>BufferGeometry.clone</code></a>, and materials inherit from <a href="https://threejs.org/docs/#api/en/materials/Material.clone" target="_blank" rel="noopener noreferrer"><code>Material.clone</code></a>.</p>
<p>In this chapter, we&rsquo;ll focus on cloning meshes, which works like this:</p>


<section class="highlight-wrapper"><span class="caption">Cloning a mesh</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const mesh = new Mesh(geometry, material);
const clonedMesh = mesh.clone();
</code>
  </pre>
</section>

<p>If we set the position, rotation, and scale of <code>mesh</code>, and then clone it, <code>clonedMesh</code> will start with the same position, rotation, and scale as the original.</p>


<section class="highlight-wrapper"><span class="caption">Cloned objects have the same transform as the original object</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const mesh = new Mesh(geometry, material);
mesh.position.set(1, 1, 1);
mesh.rotation.set(0.5, 0.5, 0.5);
mesh.scale.set(2, 2, 2);

const clonedMesh = mesh.clone();
// clonedMesh.position === (1, 1, 1)
// clonedMesh.rotation === (0.5, 0.5, 0.5)
// clonedMesh.scale === (2, 2, 2)
</code>
  </pre>
</section>

<p>After cloning, you can adjust the transforms on the original mesh and the cloned mesh separately.</p>


<section class="highlight-wrapper"><span class="caption">Adjusting the transforms of the original and cloned meshes</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
// only mesh will move
mesh.position.x = 20;

// only clonedMesh will increase in size
clonedMesh.scale.set(5, 5, 5);
</code>
  </pre>
</section>

<p><code>clonedMesh</code> also has the same geometry and material as <code>mesh</code>. <strong>However, the geometry and material are not cloned, they are shared</strong>. If we make any changes to the shared material, for example, to change its color, <strong>all the cloned meshes will change, along with the original</strong>. The same applies if you make any changes to the geometry.</p>


<section class="highlight-wrapper"><span class="caption">Changes to the material or geometry will affect all clones</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
// mesh AND clonedMesh will turn red
mesh.material.color.set(&#39;red&#39;);

// mesh AND clonedMesh will turn blue
clonedMesh.material.color.set(&#39;blue&#39;);
</code>
  </pre>
</section>

<p>However, you can give a clone an entirely new material, and the original will not be affected.</p>


<section class="highlight-wrapper"><span class="caption">You can break the connection by giving clones a new material or geometry</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

clonedMesh.material = new MeshStandardMaterial({ color: &#39;indigo&#39; });

// mesh.material -&gt; still red

</code>
  </pre>
</section>

<h3 id="custom-properties-like-tick-are-not-cloned">Custom Properties like <code>.tick</code> are Not Cloned</h3>
<p>One important final note. Only the default properties of an object will be cloned. If you create custom properties like <a href="/book/first-steps/animation-loop/#the-tick-method">the <code>.tick</code> method</a> we&rsquo;re using to create animations, these will not be cloned. You&rsquo;ll have to set up any custom properties again on the cloned mesh.</p>
<h2 id="create-the-_meshgroupjs_-module">Create the <em><strong>meshGroup.js</strong></em> Module</h2>
<p>Now, we will finally add these twenty-one spheres to our scene. Rename the <em><strong>cube.js</strong></em> module from the previous chapter to <em><strong>meshGroup.js</strong></em>, and delete everything inside it (in the editor we&rsquo;ve done this for you). Inside this new module, we&rsquo;ll use <code>SphereBufferGeometry</code>, <code>Group</code>, and <code>.clone</code> to create a bunch of spheres and then spend some time experimenting with them.</p>
<p>First, set up the imports. These are mostly the same as the previous chapter, except that we have replaced <code>BoxBufferGeometry</code> and <code>TextureLoader</code>, with <code>SphereBufferGeometry</code> and <code>Group</code>. Next, create the <code>createMeshGroup</code> function, and finally, export this function at the bottom of the module:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: initial structure</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
import {
  SphereBufferGeometry,
  Group,
  MathUtils,
  Mesh,
  MeshStandardMaterial,
} from &#39;three&#39;;

function createMeshGroup() {}

export { createMeshGroup };
</code>
  </pre>
</section>

<h3 id="create-the-group">Create the <code>Group</code></h3>
<p>Inside the  function, create a new group, and then give it a <code>.tick</code> method:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: create a group</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="9"
    data-line="12-16"
    data-line-offset="9"
    >
    <code class="highlight language-js match-braces">
function createMeshGroup() {
  // a group holds other objects
  // but cannot be seen itself
  const group = new Group();

  group.tick = (delta) =&gt; {};

  return group;
}

export { createMeshGroup };
</code>
  </pre>
</section>

<p>This completes the skeleton structure for the new module. Over in World, switch the <code>createCube</code> import to <code>createMeshGroup</code> (again, already done for you in the editor):</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>World.js</strong></em>: import the new <code>meshGroup</code> module</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="1"
    data-line="3"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">import { createCamera } from &#39;./components/camera.js&#39;;
import { createLights } from &#39;./components/lights.js&#39;;
import { createMeshGroup } from &#39;./components/meshGroup.js&#39;;
import { createScene } from &#39;./components/scene.js&#39;;

import { createControls } from &#39;./systems/controls.js&#39;;
import { createRenderer } from &#39;./systems/renderer.js&#39;;
import { Resizer } from &#39;./systems/Resizer.js&#39;;
</code>
  </pre>
</section>

<p>Make a similar change in the constructor:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>World.js</strong></em>: create the group and add it to the scene and animation loop</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="17"
    data-line="26-29"
    data-line-offset="17"
    >
    <code class="highlight language-js match-braces">  constructor(container) {
    camera = createCamera();
    renderer = createRenderer();
    scene = createScene();
    loop = new Loop(camera, scene, renderer);
    container.append(renderer.domElement);

    const controls = createControls(camera, renderer.domElement);
    const { ambientLight, mainLight } = createLights();
    const meshGroup = createMeshGroup();

    loop.updatables.push(controls, meshGroup);
    scene.add(ambientLight, mainLight, meshGroup);

    const resizer = new Resizer(container, camera, renderer);
  }
</code>
  </pre>
</section>

<p>At this point, your scene will contain a single empty group and nothing else. However, groups are invisible so all you&rsquo;ll see is the blue background.</p>
<h3 id="create-the-prototype-sphere">Create the Prototype Sphere</h3>
<p>Next, we&rsquo;ll create the spheres and add them to the group. We&rsquo;ll do this by creating one <em>prototype</em> sphere and then we&rsquo;ll clone that twenty times for a total of twenty-one spheres.</p>
<p>First, create a <code>SphereBufferGeometry</code> to give the prototype mesh its shape. This geometry will be shared by all the spheres. We&rsquo;ll give it a <code>radius</code> of 0.25, and set both <code>widthSegments</code> and <code>heightSegments</code> to sixteen:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: create a <code>SphereBufferGeometry</code></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="14"
    data-line=""
    data-line-offset="14"
    >
    <code class="highlight language-js match-braces">
const geometry = new SphereBufferGeometry(0.25, 16, 16);
</code>
  </pre>
</section>

<p>Setting both <code>widthSegments</code> and <code>heightSegments</code> to sixteen gives us a decent tradeoff between quality and performance, as long as we don&rsquo;t zoom in too close. With these settings, each sphere will be made out of 480 tiny triangles.</p>
<p>Next, create a <code>MeshStandardMaterial</code>. Nothing new here, except this time we&rsquo;ll <a href="/book/first-steps/physically-based-rendering/#change-the-materials-color">set the color</a> to indigo. Once again, this material will be shared by all of the spheres.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: create a MeshStandardMaterial</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="16"
    data-line=""
    data-line-offset="16"
    >
    <code class="highlight language-js match-braces">
const material = new MeshStandardMaterial({
  color: &#39;indigo&#39;,
});
</code>
  </pre>
</section>

<p>Finally, create the mesh and then add it to the group:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: create the prototype mesh</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="20"
    data-line=""
    data-line-offset="20"
    >
    <code class="highlight language-js match-braces">
const protoSphere = new Mesh(geometry, material);

// add the sphere to the group
group.add(protoSphere);
</code>
  </pre>
</section>

<p>We&rsquo;ll <code>.clone</code> this mesh to create the rest of the meshes, hence the name <code>.protoSphere</code>. Putting all that together, here&rsquo;s the <code>createMeshGroup</code> function so far:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: current progress</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="9"
    data-line=""
    data-line-offset="9"
    >
    <code class="highlight language-js match-braces">
function createMeshGroup() {
  // a group holds other objects
  // but cannot be seen itself
  const group = new Group();

  const geometry = new SphereBufferGeometry(0.25, 16, 16);

  const material = new MeshStandardMaterial({
    color: &#39;indigo&#39;,
  });;

  // create one prototype sphere
  const protoSphere = new Mesh(geometry, material);

  // add the sphere to the group
  group.add(protoSphere);

  group.tick = (delta) =&gt; {};

  return group;
}
</code>
  </pre>
</section>

<figure class="medium right">
  <img src="/static/images/first-steps/proto-sphere.png" loading="lazy" alt="The protosphere" title="The protosphere"  /></figure>
<p>At this point, the <code>protoSphere</code> should show up in the center of your scene.</p>
<p>Note how the <code>HemisphereLight</code> we added in the last chapter combines with the color of the sphere to create different shades across the surface. Also, look closely at the silhouette of the sphere. Can you see that it&rsquo;s made from lots of short straight lines? If you zoom way in using the orbit controls and then rotate the camera, this should become more obvious. Clearly, <code>widthSegments</code> and <code>heightSegments</code> at sixteen doesn&rsquo;t give us enough detail for a full-screen sphere. Now, zoom back out to the original size. The sphere should look better now, showing us that this quality level is fine for small or far-away spheres.</p>
<h3 id="clone-the-protosphere">Clone the <code>protoSphere</code></h3>
<p>This sub-heading wins the prize for most likely to be a line of dialogue in a cheesy sci-fi movie.</p>
<p>With our prototype mesh set up, we&rsquo;ll clone it to create the other meshes.</p>


<section class="highlight-wrapper"><span class="caption">Clone the <code>protoSphere</code></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const clonedSphere = protoSphere.clone();

</code>
  </pre>
</section>

<p>We&rsquo;ll use a <a href="/book/appendix/javascript-reference/#for-loop"><strong>for loop</strong></a> to create twenty new spheres, adding each to the group as we create them. Normally, to loop twenty times, we would do this:</p>


<section class="highlight-wrapper"><span class="caption">A basic for loop that runs twenty times</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
for (let i = 0; i &lt; 20; i&#43;&#43;) {
  console.log(&#39;Hello twenty times!&#39;);
}
</code>
  </pre>
</section>

<p>However, in a moment, we&rsquo;ll arrange the cloned spheres in a circle using some trigonometry and we&rsquo;ll need values of <code>i</code> between zero and one. Since $\frac{1}{20}=0.05$, we can write the loop this way instead:</p>


<section class="highlight-wrapper"><span class="caption">A for loop that runs twenty times with <code>i</code> values between zero and one</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
for (let i = 0; i &lt; 1; i &#43;= 0.05) {
  console.log(&#39;Hello twenty times!&#39;);
}
</code>
  </pre>
</section>

<p>Add this loop to <code>createMeshGroup</code> to create the twenty new spheres:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: create twenty cloned spheres</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="18"
    data-line="25-31"
    data-line-offset="18"
    >
    <code class="highlight language-js match-braces">
...

const protoSphere = new Mesh(geometry, material);

// add the sphere to the group
group.add(protoSphere);

// create twenty clones of the protoSphere
// and add each to the group
for (let i = 0; i &lt; 1; i &#43;= 0.05) {
  const sphere = protoSphere.clone();

  group.add(sphere);
}

...
</code>
  </pre>
</section>

<p>Now we have a total of twenty-one spheres (the original sphere plus twenty clones). However, we haven&rsquo;t moved any of the spheres yet, so they are all positioned exactly on top of each other at the center of the scene and it looks like there is still only one sphere.</p>
<h3 id="position-the-cloned-spheres-in-a-circle">Position the Cloned Spheres in a Circle</h3>
<p>We&rsquo;ll use a bit of trigonometry to place the cloned spheres in a circle surrounding the <code>protoSphere</code>. Here&rsquo;s one way to write the equations of a circle with radius one, where $0 \le i \le 1$:</p>
<p>$$
\begin{aligned}
x &amp;= \cos(2 \pi i) \cr
y &amp;= \sin(2 \pi i) \cr
\end{aligned}
$$</p>
<p>If we input values of $i$ between zero and one, we&rsquo;ll get points spread around the circumference of the circle. We can easily rewrite these function in JavaScript <a href="/book/appendix/javascript-reference/#the-math-object">using the built-in <code>Math</code> class</a>:</p>


<section class="highlight-wrapper"><span class="caption">Equations for points on a circle</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = Math.cos(2 * Math.PI * i);
const y = Math.sin(2 * Math.PI * i);
</code>
  </pre>
</section>

<p>Next, move the equations into your for loop (now can you see why we wanted values of <code>i</code> between zero and one?):</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: position the cloned meshes around a circle</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="27"
    data-line="31,32"
    data-line-offset="27"
    >
    <code class="highlight language-js match-braces">
for (let i = 0; i &lt; 1; i &#43;= 0.05) {
  const sphere = protoSphere.clone();

  // position the spheres on around a circle
  sphere.position.x = Math.cos(2 * Math.PI * i);
  sphere.position.y = Math.sin(2 * Math.PI * i);

  this.group.add(sphere);
}
</code>
  </pre>
</section>

<p>Once you do this, the cloned spheres will move into a circle surrounding the original <code>protoSphere</code>.</p>
<h3 id="scale-the-group">Scale the Group</h3>
<p>The circle we created has radius one, which is quite small. We&rsquo;ll double the scale of the group to make it bigger:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: scale the group</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="39"
    data-line=""
    data-line-offset="39"
    >
    <code class="highlight language-js match-braces">  // every sphere inside the group will be scaled
  group.scale.multiplyScalar(2);
</code>
  </pre>
</section>

<p>The <a href="https://threejs.org/docs/#api/en/math/Vector3.multiplyScalar" target="_blank" rel="noopener noreferrer"><code>.multiplyScalar</code></a> method <a href="/book/first-steps/transformations/#the-multiplyscalar-method">multiplies the $x$, $y$, and $z$ components of a vector by a number</a>. When we double the scale of the group, every object inside the group doubles in size too.</p>
<h3 id="scale-the-spheres">Scale the Spheres</h3>
<p>For some extra visual flair, let&rsquo;s scale the cloned spheres from tiny to large. Add the following line to the loop:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: scale the cloned spheres</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="27"
    data-line="34"
    data-line-offset="27"
    >
    <code class="highlight language-js match-braces">  for (let i = 0; i &lt; 1; i &#43;= 0.05) {
    const sphere = protoSphere.clone();

    // position the spheres on around a circle
    sphere.position.x = Math.cos(2 * Math.PI * i);
    sphere.position.y = Math.sin(2 * Math.PI * i);

    sphere.scale.multiplyScalar(0.01 &#43; i);

    group.add(sphere);
  }
</code>
  </pre>
</section>

<p>The variable <code>i</code> lies in the range $0 \le i \le 1$, so here, we are scaling the meshes from nearly zero to full size.</p>
<h3 id="spin-the-wheel">Spin the Wheel</h3>
<p>Finally, update the <code>group.tick</code> method to set the spheres in motion. We&rsquo;ll use the same approach we used to <a href="/book/first-steps/animation-loop/#rotate-the-cube">create the cube animation</a>, except this time we are rotating on a single axis so it&rsquo;s a simple spinning motion, like a wheel rotating around its center.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: animate the group</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="42"
    data-line=""
    data-line-offset="42"
    >
    <code class="highlight language-js match-braces">  const radiansPerSecond = MathUtils.degToRad(30);

  // each frame, rotate the entire group of spheres
  group.tick = (delta) =&gt; {
    group.rotation.z -= delta * radiansPerSecond;
  };
</code>
  </pre>
</section>

<h3 id="complete-createmeshgroup-function">Complete <code>createMeshGroup</code> Function</h3>
<p>With all that in place, here&rsquo;s the complete <code>createMeshGroup</code> function:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: complete createMeshGroup function</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="9"
    data-line=""
    data-line-offset="9"
    >
    <code class="highlight language-js match-braces">function createMeshGroup() {
  // a group holds other objects
  // but cannot be seen itself
  const group = new Group();

  const geometry = new SphereBufferGeometry(0.25, 16, 16);

  const material = new MeshStandardMaterial({
    color: &#39;indigo&#39;,
  });

  const protoSphere = new Mesh(geometry, material);

  // add the protoSphere to the group
  group.add(protoSphere);

  // create twenty clones of the protoSphere
  // and add each to the group
  for (let i = 0; i &lt; 1; i &#43;= 0.05) {
    const sphere = protoSphere.clone();

    // position the spheres on around a circle
    sphere.position.x = Math.cos(2 * Math.PI * i);
    sphere.position.y = Math.sin(2 * Math.PI * i);

    sphere.scale.multiplyScalar(0.01 &#43; i);

    group.add(sphere);
  }

  // every sphere inside the group will be scaled
  group.scale.multiplyScalar(2);

  const radiansPerSecond = MathUtils.degToRad(30);

  // each frame, rotate the entire group of spheres
  group.tick = (delta) =&gt; {
    group.rotation.z -= delta * radiansPerSecond;
  };

  return group;
}
</code>
  </pre>
</section>

<h2 id="experiment">Experiment!</h2>
<p>Finally, we have a scene that we can play with. You can get interesting results by making tiny changes within the loop. For example, try experimenting with a different step size in the loop to create more or fewer spheres:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: try different values instead of 0.05</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="27"
    data-line=""
    data-line-offset="27"
    >
    <code class="highlight language-js match-braces">  for (let i = 0; i &lt; 1; i &#43;= 0.05) {
</code>
  </pre>
</section>

<p>What happens if you change 0.05 to 0.001? How small can that value be before you start to notice a drop in the frame rate?</p>
<p>Or, how about changing the $z$ positions in the loop as well as $x$ and $y$?</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>meshGroup.js</strong></em>: change sphere&rsquo;s z position</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="31"
    data-line=""
    data-line-offset="31"
    >
    <code class="highlight language-js match-braces">
sphere.position.x = Math.cos(2 * Math.PI * i);
sphere.position.y = Math.sin(2 * Math.PI * i);
sphere.position.z = -i * 5;
</code>
  </pre>
</section>








<figure id="scene-954621783" class="inline-scene loading-dots round"></figure>

<script type="module">
  import init from "/static/examples/worlds/inline-scenes/first-steps/snake.js";
  init("#scene-954621783");
</script>

<p>You&rsquo;ll have to adjust the camera as well to get this exact view. That sounds like a &ldquo;hard&rdquo; challenge!</p>
<h2 id="challenges">Challenges</h2>
<aside class="success">
  
    <h3 id="easy">Easy</h3>
<ol>
<li>
<p>Increase and decrease the number of spheres by changing the value 0.05 in the loop. Try to calculate how many spheres you want before you make the change, rather than entering random numbers.</p>
</li>
<li>
<p>Try out some other shapes besides spheres and boxes. How about <a href="https://threejs.org/docs/#api/en/geometries/ConeBufferGeometry" target="_blank" rel="noopener noreferrer">cones</a>, <a href="https://threejs.org/docs/#api/en/geometries/CylinderBufferGeometry" target="_blank" rel="noopener noreferrer">cylinders</a>, <a href="https://threejs.org/docs/#api/en/geometries/RingBufferGeometry" target="_blank" rel="noopener noreferrer">rings</a>, or <a href="https://threejs.org/docs/#api/en/geometries/DodecahedronBufferGeometry" target="_blank" rel="noopener noreferrer">dodecahedrons</a>? For this exercise, simply replace the <code>SphereBufferGeometry</code> with one of the other buffer geometry classes. The constructor for each type of geometry takes different parameters so read the docs carefully, and remember to import the class before you use it.</p>
</li>
<li>
<p>Try adjusting the <code>widthSegments</code> and <code>heightSegments</code>. How high can you go before you notice a drop in the frame rate? What does the sphere look like with really low values? What happens if you don&rsquo;t use the same number for both parameters?</p>
</li>
</ol>

  
</aside>
<aside class="notice">
  
    <h3 id="medium">Medium</h3>
<ol>
<li>
<p>Inside the <code>group.tick</code> method, we are subtracting the rotation each frame: <code>.rotation.z -= ...</code>. This results in <em>clockwise</em> rotation. Switch to <code>+=</code>, and notice how the rotation changes to <em>anti-clockwise</em>. If you add rotation, the movement will be anti-clockwise. If you subtract rotation, the movement will be clockwise. <strong>Positive rotation in three.js is anti-clockwise</strong>.</p>
</li>
<li>
<p>Can you create some other animations here? Remember, you can animate <em>any property that can be changed</em>.</p>
</li>
</ol>

  
</aside>
<aside class="warning">
  
    <h3 id="hard">Hard</h3>
<ol>
<li>
<p>You guessed it! Can you make the scene in the editor exactly match the scene above?</p>
</li>
<li>
<p>Back to the original scene, can you alternate between two different shapes around the circle? Say, ten spheres, and ten boxes? How about alternating between three different shapes? Or ten different shapes?</p>
</li>
<li>
<p>While it&rsquo;s true that you can animate any property, the hard part is making smooth, repeating motion. Rotation is a special case since you can keep increasing forever and the object will go round and round in circles. To create similar behavior for the other properties, you can use the trigonometric functions sin, cos, and tan. We used cos and sin to place the spheres in a circle, and you can do something similar to move the group&rsquo;s position in a circle. Can you figure it out? No tips though, after all, this is supposed to be a hard challenge!</p>
</li>
</ol>

  
</aside>

          </div>
        </div>
      </main>
    </div><div class="side-menu left-menu">
  <div class="icons">
    <input type="checkbox" id="invert-colors-toggle" class="hidden-input" />
    <label
      for="invert-colors-toggle"
      class="control-elem"
      title="Day/Night Theme"
    >
      <span class="day-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"
          />
        </svg>
      </span>
      <span class="night-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"
          />
        </svg>
      </span>
    </label>

    <input type="checkbox" id="orientation-toggle" class="hidden-input" />
    <label
      for="orientation-toggle"
      class="control-elem hide"
      title="Orientation lock: auto/portrait/landscape"
    >
      <span class="auto-icon hide">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"
          />
        </svg>
      </span>
      <span class="portrait-icon hide">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 320 512"
        >
          <path
            fill="currentColor"
            d="M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"
          />
        </svg>
      </span>
      <span class="landscape-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 320 512"
        >
          <path
            fill="currentColor"
            d="M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"
          />
        </svg>
      </span>
    </label>
  </div>

  <nav class="table-of-contents">
    <h2><a href="/book/contents/">Table of Contents</a></h2>
    <div id="main-toc">
      <ul>
        <li class="section-head">
          <span class="chapter">0:</span
          ><a
            href="/book/introduction/"
            title="Welcome to Discover three.js!"
            >Welcome to Discover three.js!</a
          >
        </li>
        <li class="">
          <span class="chapter">0.1:</span
          ><a
            href="/book/introduction/about-the-book/"
            title="How to Use This Book"
            >How to Use This Book</a
          >
        </li>
        <li class="">
          <span class="chapter">0.2:</span
          ><a
            href="/book/introduction/prerequisites/"
            title="What Do You Need to Run a three.js App?"
            >What Do You Need to Run a three.js App?</a
          >
        </li>
        <li class="">
          <span class="chapter">0.3:</span
          ><a
            href="/book/introduction/get-help/"
            title="Welcome to the Community: three.js Around the Web"
            >Welcome to the Community: three.js Around the Web</a
          >
        </li>
        <li class="">
          <span class="chapter">0.4:</span
          ><a
            href="/book/introduction/github-repo/"
            title="three.js on GitHub - Where the Magic Happens"
            >three.js on GitHub - Where the Magic Happens</a
          >
        </li>
        <li class="">
          <span class="chapter">0.5:</span
          ><a
            href="/book/introduction/get-threejs/"
            title="How to Include three.js in Your Projects"
            >How to Include three.js in Your Projects</a
          >
        </li>
        <li class="">
          <span class="chapter">0.7:</span
          ><a
            href="/book/introduction/threejs-with-frameworks/"
            title="Using three.js with React, Vue.js, Angular, Svelte, TypeScript..."
            >Using three.js with React, Vue.js, Angular, Svelte,
            TypeScript...</a
          >
        </li>
        <li class="section-head">
          <span class="chapter">1:</span
          ><a
            href="/book/first-steps/"
            title="Getting Started: Here&#39;s Where the Real Fun Begins!"
            >Getting Started: Here&#39;s Where the Real Fun Begins!</a
          >
        </li>
        <li class="">
          <span class="chapter">1.1:</span
          ><a
            href="/book/first-steps/app-structure/"
            title="The Structure of a three.js App"
            >The Structure of a three.js App</a
          >
        </li>
        <li class="">
          <span class="chapter">1.2:</span
          ><a
            href="/book/first-steps/first-scene/"
            title="Your First three.js Scene: Hello, Cube!"
            >Your First three.js Scene: Hello, Cube!</a
          >
        </li>
        <li class="">
          <span class="chapter">1.3:</span
          ><a
            href="/book/first-steps/world-app/"
            title="Introducing the World App"
            >Introducing the World App</a
          >
        </li>
        <li class="">
          <span class="chapter">1.4:</span
          ><a
            href="/book/first-steps/physically-based-rendering/"
            title="Physically Based Rendering and Lighting"
            >Physically Based Rendering and Lighting</a
          >
        </li>
        <li class="">
          <span class="chapter">1.5:</span
          ><a
            href="/book/first-steps/transformations/"
            title="Transformations and Coordinate Systems"
            >Transformations and Coordinate Systems</a
          >
        </li>
        <li class="">
          <span class="chapter">1.6:</span
          ><a
            href="/book/first-steps/responsive-design/"
            title="Making Our Scenes Responsive (and also Dealing with Jaggies)"
            >Making Our Scenes Responsive (and also Dealing with Jaggies)</a
          >
        </li>
        <li class="">
          <span class="chapter">1.7:</span
          ><a
            href="/book/first-steps/animation-loop/"
            title="The Animation Loop"
            >The Animation Loop</a
          >
        </li>
        <li class="">
          <span class="chapter">1.8:</span
          ><a
            href="/book/first-steps/textures-intro/"
            title="A Brief Introduction to Texture Mapping"
            >A Brief Introduction to Texture Mapping</a
          >
        </li>
        <li class="">
          <span class="chapter">1.9:</span
          ><a
            href="/book/first-steps/camera-controls/"
            title="Extend three.js With a Camera Controls Plugin"
            >Extend three.js With a Camera Controls Plugin</a
          >
        </li>
        <li class="">
          <span class="chapter">1.10:</span
          ><a
            href="/book/first-steps/ambient-lighting/"
            title="Ambient Lighting: Illumination from Every Direction"
            >Ambient Lighting: Illumination from Every Direction</a
          >
        </li>
        <li class="">
          <span class="chapter">1.11:</span
          ><a
            href="/book/first-steps/organizing-with-group/"
            title="Organizing Your Scenes"
            >Organizing Your Scenes</a
          >
        </li>
        <li class="">
          <span class="chapter">1.12:</span
          ><a
            href="/book/first-steps/built-in-geometries/"
            title="The Built-In Geometries"
            >The Built-In Geometries</a
          >
        </li>
        <li class="">
          <span class="chapter">1.13:</span
          ><a
            href="/book/first-steps/load-models/"
            title="Load 3D Models in glTF Format"
            >Load 3D Models in glTF Format</a
          >
        </li>
        <li class="">
          <span class="chapter">1.14:</span
          ><a
            href="/book/first-steps/animation-system/"
            title="The three.js Animation System"
            >The three.js Animation System</a
          >
        </li>
        <li class="section-head">
          <span class="chapter">A:</span
          ><a href="/book/appendix/" title="Appendices">Appendices</a>
        </li>
        <li class="">
          <span class="chapter">A.1:</span
          ><a
            href="/book/appendix/html-and-css-reference/"
            title="HTML and CSS Used in This Book"
            >HTML and CSS Used in This Book</a
          >
        </li>
        <li class="">
          <span class="chapter">A.2:</span
          ><a
            href="/book/appendix/javascript-reference/"
            title="JavaScript Reference"
            >JavaScript Reference</a
          >
        </li>
        <li class="">
          <span class="chapter">A.3:</span
          ><a
            href="/book/appendix/dom-api-reference/"
            title="The Document Object Model and DOM API"
            >The Document Object Model and DOM API</a
          >
        </li>
        <li class="">
          <span class="chapter">A.4:</span
          ><a
            href="/book/appendix/javascript-modules/"
            title="JavaScript Modules"
            >JavaScript Modules</a
          >
        </li>
        <li class="">
          <span class="chapter">A.5:</span
          ><a
            href="/book/appendix/asynchronous-javascript/"
            title="Asynchronous JavaScript"
            >Asynchronous JavaScript</a
          >
        </li>
        <li class="">
          <span class="chapter">B.1:</span
          ><a
            href="/book/appendix/threejs-versions/"
            title="Dealing with Different three.js Versions"
            >Dealing with Different three.js Versions</a
          >
        </li>
        <li class="unavailable section-head">
          <span class="chapter">R:</span
          ><span>References and Resources</span>
        </li>
        <li class="">
          <span class="chapter">R:</span
          ><a
            href="/tips-and-tricks/"
            title="The Big List of three.js Tips and Tricks!"
            >The Big List of three.js Tips and Tricks!</a
          >
        </li>
      </ul>
    </div>
  </nav>
</div>
<nav class="side-menu right-menu">
  <h2>
    <a href="/">
      <img
        alt="Discover three.js logo"
        width="100%"
        src="/static/images/logo/banner_trans_512.png"
      />
    </a>
  </h2>
  <ul class="links" style="text-align: center">
    <li><a href="/book/contents/">Table Of Contents</a></li>
    <li><a href="/tips-and-tricks/">Tips and Tricks</a></li>

    <li style="margin: auto">
      <a href="/#mailing-list-signup" class="internal-link"
        >Stay up to date - sign up to the mailing list!</a
      >
    </li>
  </ul>
</nav><style>
  @font-face {
    font-family: "Open Sans";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local("Open Sans Regular"), local("OpenSans-Regular"),
      url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0b.woff2)
        format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
  @font-face {
    font-family: "Varela Round";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local("Varela Round Regular"), local("VarelaRound-Regular"),
      url(https://fonts.gstatic.com/s/varelaround/v12/w8gdH283Tvk__Lua32TysjIfp8uP.woff2)
        format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
  @font-face {
    font-family: "Fira Code";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url(https://fonts.gstatic.com/s/firacode/v9/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVD7Ng.woff2)
      format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
</style></body>
</html>
