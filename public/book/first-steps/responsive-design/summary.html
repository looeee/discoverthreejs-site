<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <title>Making Our Scenes Responsive (and also Dealing with Jaggies) | Discover three.js</title><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="ROBOTS" content="INDEX, FOLLOW" />

<meta name="application-name" content="Discover three.js" />

<meta itemprop="name" content="Discover three.js" />

<meta property="og:title" content="How to Use This Book | Discover three.js" />
<meta name="twitter:title" content="How to Use This Book | Discover three.js" />

<meta name="description" content="No book is complete without references! Lots of resources to continue your learning in the amazing world of 3D graphics here" />
<meta property="og:description" content="No book is complete without references! Lots of resources to continue your learning in the amazing world of 3D graphics here" />
<meta name="twitter:description" content="No book is complete without references! Lots of resources to continue your learning in the amazing world of 3D graphics here" />

<meta
  itemprop="keywords"
  content="threejs webgl opengl fbx gltf khronos webvr vr webdev design cg graphics animation javascript esnext es6 education tutorials blog ebook node npm"
/>

<meta property="og:site_name" content="Discover three.js" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://discoverthreejs.com/" />
<meta
  property="og:image"
  content="https://discoverthreejs.com/static/images/logo.png"
/>
<meta
  property="twitter:image"
  content="https://discoverthreejs.com/static/images/logo.png"
/>
<meta name="twitter:creator" content="@lewy_blue" />
<meta name="twitter:site" content="@lewy_blue" />
<meta name="twitter:card" content="TODO" />
<meta name="twitter:image:width" content="1024" />
<meta name="twitter:image:height" content="1024" />

<meta name="theme-color" content="#FFFFFF" />
<meta name="msapplication-TileColor" content="#00aba9" />
<meta name="msapplication-TileImage" content="/mstile-150x150.png?v=43" /><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "WebPage",
    "image": "https://discoverthreejs.com/static/images/logo.png",
    "mainEntity": {
      "@type": "Book",
      "author": {
        "@type": "Person",
        "name": "Lewy Blue",
        "jobTitle": "Author",
        "url": "https://twitter.com/lewy_blue"
      },
      "about": "",
      "copyrightHolder": "https://discoverthreejs.com",
      "copyrightYear": "2021",
      "bookFormat": "http://schema.org/EBook",
      "datePublished": "2018-10-01",
      "image": "https://discoverthreejs.com/static/images/logo.png",
      "inLanguage": "English",
      "name": "Discover three.js",
      "genre": "Education",
      "keywords": "threejs webgl animation javascript es6 education tutorials blog ebook",
      "publisher": {
        "@type": "Organization",
        "name": "https://discoverthreejs.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://discoverthreejs.com/static/images/logo.png"
        }
      }
    }
  }
</script><link
      rel="canonical"
      href="https://discoverthreejs.com/book/introduction/about-the-book/"
    />

    <link rel="shortcut icon" type="image/png" href="/favicon.ico?v=43" />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/apple-touch-icon.png?v=43"
    />

    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/favicon-16x16.png?v=43"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/favicon-32x32.png?v=43"
    />

    <link rel="manifest" href="/site.json?v=43" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg?v=43" color="#5bbad5" />
<style>
  .loading-page {
    display: none;
  }
</style>

<link href="/static/css/chapters.min.css?v=43" rel="stylesheet" />

<noscript>
  <style>
    .loading-page {
      display: block;
    }
  </style>
  <link href="/static/css/noscript.min.css?v=43" rel="stylesheet" />
</noscript>    
    
    
    

    

    

    

    

    

    

    

    <script type="module">
      console.log("TEST")
      const x =  false ;
      console.log('x: ', x);

      import { setupChapterEarly } from "/static/js/chapter.early.js";
      setupChapterEarly();

      window.addEventListener('load', async () => {
        const { setupChapterLate } = await import(
          "/static/js/chapter.late.js"
        );
        setupChapterLate();

        const { setupIDE } = await import(
          "/static/js/ide.js"
        );

        const ideConfig = {

          showIDE:  true ,
          IDE: {
            fullScreen: false,
            container: '#ide-wrapper',
            serverDirectory: 'static\/examples',
            stripDirectory: 'worlds\/first-steps\/responsive-design\/',
            closedFolders: '[\u0022components\u0022,\u0022styles\u0022,\u0022vendor\u0022]'
              .replace(/[\s\'\[\]']+/g, '')
              .split(','),
            comparisonMode: 'true',
            files: '[\u0022worlds\/first-steps\/responsive-design\/src\/World\/components\/camera.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/World\/components\/cube.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/World\/components\/lights.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/World\/components\/scene.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/World\/systems\/renderer.start.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/World\/systems\/renderer.final.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/World\/systems\/Resizer.start.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/World\/systems\/Resizer.final.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/World\/World.start.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/World\/World.final.js\u0022,\u0022worlds\/first-steps\/responsive-design\/src\/main. js\u0022,\u0022styles\/main.css\u0022,\u0022vendor\/three\/build\/three.module.js\u0022,\u0022worlds\/first-steps\/responsive-design\/index.html\u0022]'
              .replace(/[\s\'\[\]']+/g, '')
              .split(','),
            startFiles: 'null'
              .replace(/[\s\'\[\]']+/g, '')
              .split(','),
            finalFiles: 'null'
              .replace(/[\s\'\[\]']+/g, '')
              .split(','),
            entry: 'index.html',
            activeDocument: 'src\/World\/systems\/Resizer.js',
            switchImportsAllowed:
              'true',
          },
        }

        console.log('ideConfig: ', ideConfig);
        setupIDE(ideConfig);
      });
    </script>

  </head>
  <body class="loading-page"><nav class="top-nav">
  <div class="nav-background"></div>

  <div class="icon-group left">
    <input type="checkbox" id="left-menu-toggle" class="hidden-input" />
    <label
      for="left-menu-toggle"
      class="control-elem"
      title="Table Of Contents"
    >
      <span class="open-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
        >
          <path
            fill="currentColor"
            d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"
          />
        </svg>
      </span>
      <span class="close-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 352 512"
        >
          <path
            fill="currentColor"
            d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"
          />
        </svg>
      </span>
    </label>

    <input
      type="checkbox"
      id="toggle-ide"
      class="hidden-input ide-toggle"
    />
    <label
      for="toggle-ide"
      class="control-elem ide-control hide"
      title="Show/Hide IDE"
    >
      <span class="on-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"
          />
        </svg>
      </span>
      <span class="off-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"
          />
        </svg>
      </span>
    </label>
  </div>

  <div class="icon-group center">
    <a
      href="/book/introduction/"
      title="Welcome to Discover three.js!"
      class="control-elem previous"
    >
      <svg
        class="icon"
        role="img"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 320 512"
      >
        <path
          fill="currentColor"
          d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"
        />
      </svg>
    </a>
    <a
      href="/book/introduction/prerequisites/"
      class="control-elem next"
      title="What Do You Need to Run a three.js App?"
    >
      <svg
        class="icon"
        role="img"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 320 512"
      >
        <path
          fill="currentColor"
          d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"
        />
      </svg>
    </a>
  </div>

  <div class="icon-group right">
    <input type="checkbox" id="right-menu-toggle" class="hidden-input" />
    <label for="right-menu-toggle" class="control-elem" title="Main Menu">
      <span class="open-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 448 512"
        >
          <path
            fill="currentColor"
            d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
          />
        </svg>
      </span>
      <span class="close-close hide">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 352 512"
        >
          <path
            fill="currentColor"
            d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"
          />
        </svg>
      </span>
    </label>
  </div>
</nav><div class="wrapper orientation-auto">
      <main class="panel animate">
        <div class="scroller">
          <div class="content">
            
              <div class="chapter-info">Word Count:2104, reading time: ~10minutes</div>
            

            <h1 id="making-our-scenes-responsive-and-also-dealing-with-jaggies">Making Our Scenes Responsive (and also Dealing with Jaggies)</h1>
<p>Welcome back! The last chapter was a long one, stuffed full of mathematical and computer graphics theory. Here, we&rsquo;ll slow things down a little and look at the current state of our app.</p>
<p>Since we created <a href="/book/first-steps/world-app/">the World app</a> a couple of chapters ago, our code is well structured and ready to be expanded as we add features over the coming chapters. Next, we switched to <a href="/book/first-steps/physically-based-rendering/">physically correct lighting and rendering</a> and explained how we&rsquo;ll (nearly always) build our scenes using meters for measurement. Our brains are tuned to appreciate physically correct lighting and colors, so when we set up our scenes this way a lot of the hard work of making them look great is done for us. This applies even to scenes with a cartoony or abstract look.</p>
<p>In the last chapter, we explored the coordinate systems and mathematical operations called transformations that are used to move objects around in 3D space. Over the next couple of chapters, we&rsquo;ll use everything we have learned so far and start to create scenes that are more interesting than a single cube.</p>
<p>But first, take a closer look at the cube:</p>
<figure class="left small noborder">
  <img src="/static/images/first-steps/cube-medium.png" loading="lazy" alt="Our humble cube" title="Our humble cube"  /></figure>
<p>Closer&hellip;</p>
<figure class="large noborder">
  <img src="/static/images/first-steps/cube-medium.png" loading="lazy" alt="Our humble cube is getting closer" title="Our humble cube is getting closer"  /></figure>
<p>Even closer&hellip;</p>
<figure class="noborder">
  <img src="/static/images/first-steps/cube-closeup-text.png" loading="lazy" alt="Not until you see the white of it&#39;s eyes!" title="Not until you see the white of it&#39;s eyes!"  /></figure>
<p>Look closely at the cube&rsquo;s edges. Can you see that they are not straight, but rather look jagged and unclean? Technically, this is called <strong>aliasing</strong>, but informally we refer to these as jaggies. Ugh&hellip;</p>
<p>There&rsquo;s another problem. Try resizing the preview window in the editor and you&rsquo;ll see that the scene does not adapt to fit the new size (the preview might refresh too fast to see this easily, in which case, try popping it out into a new window using the {% include 'partials/icons/solid/external-link-alt.svg' %} button). <strong>In the language of web design, our scene is not <em>responsive</em></strong>. In this chapter, we&rsquo;ll fix both of these issues.</p>
<h2 id="antialiasing">Anti-Aliasing</h2>
<figure >
  <img src="/static/images/first-steps/antialias.svg" loading="lazy" alt="Anti-alias on and off" title="Anti-alias on and off"  /></figure>
<p>It turns out that drawing straight lines using square pixels is hard unless the straight lines are exactly horizontal or vertical. We&rsquo;ll use a technique called <strong>anti-aliasing</strong> (<strong>AA</strong>) to counter this.</p>
<h3 id="enable-anti-aliasing">Enable Anti-Aliasing</h3>
<p>We can turn on anti-aliasing by passing a single new parameter into the <code>WebGLRenderer</code> constructor.  As with <a href="/book/first-steps/physically-based-rendering/#change-the-material-s-color">the <code>MeshStandardMaterial</code></a>, the <code>WebGLRenderer</code> constructor takes a specification object with named parameters. Here, we will set the <code>antialias</code> parameter to <code>true</code>:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>renderer.js</strong></em>: Enable antialiasing</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="3"
    data-line="4"
    data-line-offset="3"
    >
    <code class="highlight language-js match-braces">function createRenderer() {
  const renderer = new WebGLRenderer({ antialias: true });

  renderer.physicallyCorrectLights = true;

  return renderer;
}
</code>
  </pre>
</section>

<p>Note that <strong>you can&rsquo;t change this setting once you have created the renderer</strong>. To change it, you need to create an entirely new renderer. That&rsquo;s rarely a problem though since you&rsquo;ll want this on for most scenes.</p>
<h3 id="multisample-anti-aliasing-msaa">Multisample Anti-Aliasing (MSAA)</h3>
<p><strong>Anti-aliasing is performed using the built-in WebGL method, which is <a href="https://en.wikipedia.org/wiki/Multisample_anti-aliasing" target="_blank" rel="noopener noreferrer">multisample anti-aliasing</a> (MSAA)</strong>. Depending on your browser and graphics card, there&rsquo;s a chance this will be unavailable or disabled, although on modern hardware that&rsquo;s unlikely. If your app does end up running on a device without MSAA, this setting will be ignored, but your scene will be otherwise unaffected.</p>
<p>MSAA is not a perfect solution, and there will be scenes that still display aliasing, even with AA enabled. In particular, scenes with many long, thin straight lines (such as wire fences, or telephone lines) are notoriously hard to remove aliasing from. If possible, avoid creating such scenes. On the other hand, some scenes look fine without AA, in which case you might choose to leave it switched off. On the powerful GPU in a laptop, you are unlikely to notice any difference in performance. However, mobile devices are a different story and you might be able to gain a few precious frames per second by disabling AA.</p>
<p>Other anti-aliasing techniques such as SMAA and FXAA are available as post-processing passes, as we&rsquo;ll see later in the book. However, these passes are performed on the CPU, while MSAA is done on the GPU (for most devices), so you may see a drop in performance if you use another technique, again, especially on mobile devices.</p>
<h2 id="seamless-resize">Seamlessly Handling Browser Window Size Changes</h2>
<p>Currently, our app cannot handle a user doing something as simple as rotating their phone or resizing their browser. <strong>We need to handle resizing gracefully, in an automatic manner that&rsquo;s invisible to our users</strong>, and which involves a minimum of effort on our part. Unlike anti-aliasing, there&rsquo;s no magic setting to fix this. However, we already have a <code>Resizer</code> class, so here, we&rsquo;ll extend this to reset the size whenever the window changes size. After all, that&rsquo;s why we called this class a <a href="/book/first-steps/world-app/#systems-the-resizer-module-1">Re-sizer</a> in the first place.</p>
<h3 id="listen-for-resize-events-on-the-browser-window">Listen for <code>resize</code> Events on the Browser Window</h3>
<p>First, we need some way of listening to the browser and then taking action when the window&rsquo;s size changes. In web-dev terminology, we want to <strong>listen for resize events</strong>. A built-in browser method called <code>element.addEventListener</code> makes our work easy here. We can use this method to listen for all kinds of events, such as <code>click</code>, <code>scroll</code>, <code>keypress</code>, and many more, on any HTML element. Whenever an event occurs, we say <strong>the event has fired</strong>. When a user clicks their mouse, the <code>click</code> event will fire, when they spin their scroll wheel, the <code>scroll</code> event will fire, when they resize the browser window, the <code>resize</code> event will fire, and so on.</p>
<p>Later, we&rsquo;ll use event listeners to add interactivity to our scenes. Here, we want to listen for the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/resize_event" target="_blank" rel="noopener noreferrer"><code>resize</code></a> event, which fires whenever the browser&rsquo;s window size changes. Rotating a mobile device from landscape to portrait, dragging a window between monitors on a multi-monitor setup, and resizing the browser by dragging the edges of the window with a mouse all cause the <code>resize</code> event to fire, which means the code we add here will handle all of these scenarios.</p>
<p><em>If you are unfamiliar with event listeners, check out the <a href="/book/appendix/dom-api-reference/#listening-for-events">DOM API reference</a> in the appendices for more info.</em></p>
<p>We can listen for most events, like <code>click</code>, or <code>scroll</code>, on any HTML element. However, the <code>resize</code> event listener must be attached to <a href="/book/appendix/dom-api-reference/#global-object">the global <code>window</code> object</a>. There is another way of listening for resize events which works with any element: the <a href="https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/ResizeObserver" target="_blank" rel="noopener noreferrer"><code>ResizeObserver</code></a>. However, it&rsquo;s quite new and at the time of writing this chapter isn&rsquo;t yet widely supported. Besides, it&rsquo;s a little more work to set up, so we&rsquo;ll stick with the tried and trusted <code>resize</code> event for now.</p>
<h3 id="test-addeventlistener-in-the-browser-console">Test <code>addEventListener</code> in the Browser Console</h3>
<p>Before we set up automatic resizing in our app, we&rsquo;ll use the browser console to test <code>addEventListener</code> and the <code>resize</code> event. Open your browser console by pressing the F12 key, paste in the following code, then press <em>Enter</em>:</p>


<section class="highlight-wrapper"><span class="caption">Paste this code into your browser console then resize the page</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function onResize() {
  console.log(&#39;You resized the browser window!&#39;);
}

window.addEventListener(&#39;resize&#39;, onResize);
</code>
  </pre>
</section>

<figure class="medium right">
  <img src="/static/images/first-steps/console-resize.png" loading="lazy" alt="Logging resize event to console" title="Logging resize event to console"  /></figure>
<p>This will call the <code>onResize</code> function every time the window resizes. Once you&rsquo;ve entered the code, try resizing your browser while keeping an eye on the console. You should see something like the following image.</p>
<p>When we resize the window, the <code>onResize</code> callback might get called many times. You might think you have performed a single resize, but find the <code>resize</code> event has fired ten times or more. As a result, doing too much work in <code>onResize</code> can cause stuttering. It&rsquo;s important to keep this function simple.</p>
<blockquote>
<p>Don&rsquo;t do heavy calculations in the resize function.</p>
</blockquote>
<p>If you find this function growing in size, you might consider using a throttling function such as <a href="https://lodash.com/docs#throttle" target="_blank" rel="noopener noreferrer">lodash&rsquo;s <code>_.throttle</code></a> to prevent it from being called too often.</p>
<h3 id="extend-the-resizer-class">Extend the Resizer Class</h3>
<p>Now that we&rsquo;ve confirmed everything works as expected, we&rsquo;ll go ahead and extend the <code>Resizer</code> class to automatically handle resizing. That means we need to call the sizing code in two situations: first, on load, to set the initial size, and then again whenever the size changes.  So, let&rsquo;s move that code into a separate function, and then call it once when our scene loads:</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>Resizer.js</strong></em>: move the sizing code into a setSize function and call it on load</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="1"
    data-line="1-7,12"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const setSize = (container, camera, renderer) =&gt; {
  camera.aspect = container.clientWidth / container.clientHeight;
  camera.updateProjectionMatrix();

  renderer.setSize(container.clientWidth, container.clientHeight);
  renderer.setPixelRatio(window.devicePixelRatio);
};

class Resizer {
  constructor(container, camera, renderer) {
    // set initial size on load
    setSize(container, camera, renderer);
  }
}

export { Resizer };

</code>
  </pre>
</section>

<p>Great. Now, let&rsquo;s add an event listener and call <code>setSize</code> again whenever the event fires.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>Resizer.js</strong></em>: set up the event listener</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="9"
    data-line="14-17"
    data-line-offset="9"
    >
    <code class="highlight language-js match-braces">

class Resizer {
  constructor(container, camera, renderer) {
    // set initial size
    setSize(container, camera, renderer);

    window.addEventListener(&#39;resize&#39;, () =&gt; {
      // set the size again if a resize occurs
      setSize(container, camera, renderer);
    });
  }
}

</code>
  </pre>
</section>

<figure class="medium left">
  <img src="/static/images/first-steps/cube-stretched.png" loading="lazy" alt="Cube abuse!" title="Cube abuse!"  />
    <figcaption>Cube abuse!</figcaption></figure>
<p>Now, <code>setSize</code> is called whenever the <code>resize</code> event fires. However, we&rsquo;re not quite done yet. If you try resizing the window now, you&rsquo;ll see that the scene does expand or contract to fit the new window size. However, weird things are happening to the cube. It seems to be getting squashed and stretched instead of resizing with the window. What&rsquo;s going on?</p>
<figure class="medium right">
  <img src="/static/images/first-steps/cube-flattened.png" loading="lazy" alt="Oh, the humanity!" title="Oh, the humanity!"  />
    <figcaption>Oh, the humanity!</figcaption></figure>
<p style="clear:both; margin: 0; padding: 0; line-height: 0;">&nbsp</p>
<p>The camera, renderer, and <code>&lt;canvas&gt;</code> element are all being resized correctly. However, we&rsquo;re only calling <code>.render</code> a single time, which draws a single frame into the canvas. When the canvas is resized, this frame is stretched to fit the new size.</p>
<h3 id="create-an-onresize-hook">Create an <code>onResize</code> Hook</h3>
<p>This means we need to generate a new frame every time the resize event fires. To do this, we need to call <code>World.render</code> right after <code>setSize</code>, inside the event listener in the <code>Resizer</code> class. However,  we&rsquo;d rather not pass the entire World class into Resizer. Instead, we&rsquo;ll create a <code>Resizer.onResize</code> hook. This enables us to perform some custom behavior whenever a resize happens.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>Resizer.js</strong></em>: an empty onResize method for custom resizing behavior</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="9"
    data-line="18,22"
    data-line-offset="9"
    >
    <code class="highlight language-js match-braces">class Resizer {
  constructor(container, camera, renderer) {
    // set initial size on load
    setSize(container, camera, renderer);

    window.addEventListener(&#39;resize&#39;, () =&gt; {
      // set the size again if a resize occurs
      setSize(container, camera, renderer);
      // perform any custom actions
      this.onResize();
    });
  }

  onResize() {}
}
</code>
  </pre>
</section>

<p><code>.onResize</code> is an <a href="/book/appendix/javascript-reference/#empty-functions">empty method</a> that we can customize from outside the <code>Resizer</code> class.</p>
<h3 id="customize-resizeronresize-in-world">Customize <code>Resizer.onResize</code> in World</h3>
<p>Over in World, replace the empty <code>.onResize</code> with a new one that calls <code>World.render</code>.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>World.js</strong></em>: customise Resizer.onResize</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="14"
    data-line="26-28"
    data-line-offset="14"
    >
    <code class="highlight language-js match-braces">  constructor(container) {
    camera = createCamera();
    scene = createScene();
    renderer = createRenderer();
    container.append(renderer.domElement);

    const cube = createCube();
    const light = createLights();

    scene.add(cube, light);

    const resizer = new Resizer(container, camera, renderer);
    resizer.onResize = () =&gt; {
      this.render();
    };
  }
</code>
  </pre>
</section>

<p>With that, automatic resizing is complete.</p>
<p>Now that automatic resizing and antialiasing are working, our app looks much more professional. In the next chapter, we&rsquo;ll set up an animation loop, which will spit out a steady stream of frames at a rate of sixty per second. Once we do that, we&rsquo;ll no longer need to worry about re-rendering the frame after resizing.</p>
<h2 id="challenges">Challenges</h2>
<aside class="success">
  
    <h3 id="easy">Easy</h3>
<ol>
<li>
<p>Enable and disable AA and compare the difference.</p>
</li>
<li>
<p>Rotate the cube until the edges are vertical and horizontal. Now, can you see any difference with AA disabled?</p>
</li>
<li>
<p>Comment out the code for resizing in <em><strong>World.js</strong></em> and compare the difference when you resize the window.</p>
</li>
<li>
<p>Comment out the custom <code>onResize</code> hook in <em><strong>World.js</strong></em> and see what happens when you resize the window.</p>
</li>
</ol>

  
</aside>
<aside class="notice">
  
    <h3 id="medium">Medium</h3>
<ol>
<li>
<p>Disable antialiasing. Now, zoom in on the cube to get a better view of the aliasing artifact. Don&rsquo;t use your browser&rsquo;s zoom function. Instead, try these methods:</p>
<ul>
<li>Enlarge the cube using <code>cube.scale</code>.</li>
<li>Bring the cube closer to you using <code>cube.position.z</code>.</li>
<li>Bring the camera closer to the cube using <code>camera.position.z</code> <br><br></li>
</ul>
</li>
<li>
<p>Still with AA disabled, use <code>camera.position.x</code> (horizontal movement) and <code>camera.position.y</code> (vertical movement) to zoom in on the right-hand corner of the cube.</p>
</li>
<li>
<p>Repeat 2., but this time, use <code>cube.position.x</code> and <code>cube.position.y</code>.</p>
</li>
</ol>
<p><em>Note how aliasing artifacts (jaggies) change as you move the cube around or zoom in and out.</em></p>

  
</aside>
<aside class="warning">
  
    <h3 id="hard">Hard</h3>
<ol>
<li>
<p>Instead of using the container to size the scene, try entering some numbers manually. For example, create a scene that is 64 pixels wide and high, or 256 pixels wide and high. You might want to change the scene&rsquo;s background color here to see this more easily.</p>
</li>
<li>
<p>Play with the <code>devicePixelRatio</code>. Try setting a higher value for DPR, like 4 or 8 (don&rsquo;t go too high though!). What happens if you set a value below 1, like 0.5? What happens if you set a high value for DPR and disable AA? How do the edges of the cube look?</p>
</li>
</ol>
<p><em><code>devicePixelRatio</code> values other than 1 render the scene at a higher or low resolution and then scale it to fit in the canvas. A DPR of 2 will render the scene at double resolution and scale down, while a DPR of 0.5 will render at half resolution and scale up. As you can imagine, high DPR values are very expensive to render!</em></p>

  
</aside>

          </div>
        </div>
      </main>
    </div><div class="side-menu left-menu">
  <div class="icons">
    <input type="checkbox" id="invert-colors-toggle" class="hidden-input" />
    <label
      for="invert-colors-toggle"
      class="control-elem"
      title="Day/Night Theme"
    >
      <span class="day-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"
          />
        </svg>
      </span>
      <span class="night-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"
          />
        </svg>
      </span>
    </label>

    <input type="checkbox" id="orientation-toggle" class="hidden-input" />
    <label
      for="orientation-toggle"
      class="control-elem hide"
      title="Orientation lock: auto/portrait/landscape"
    >
      <span class="auto-icon hide">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        >
          <path
            fill="currentColor"
            d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"
          />
        </svg>
      </span>
      <span class="portrait-icon hide">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 320 512"
        >
          <path
            fill="currentColor"
            d="M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"
          />
        </svg>
      </span>
      <span class="landscape-icon">
        <svg
          class="icon"
          role="img"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 320 512"
        >
          <path
            fill="currentColor"
            d="M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"
          />
        </svg>
      </span>
    </label>
  </div>

  <nav class="table-of-contents">
    <h2><a href="/book/contents/">Table of Contents</a></h2>
    <div id="main-toc">
      <ul>
        <li class="section-head">
          <span class="chapter">0:</span
          ><a
            href="/book/introduction/"
            title="Welcome to Discover three.js!"
            >Welcome to Discover three.js!</a
          >
        </li>
        <li class="">
          <span class="chapter">0.1:</span
          ><a
            href="/book/introduction/about-the-book/"
            title="How to Use This Book"
            >How to Use This Book</a
          >
        </li>
        <li class="">
          <span class="chapter">0.2:</span
          ><a
            href="/book/introduction/prerequisites/"
            title="What Do You Need to Run a three.js App?"
            >What Do You Need to Run a three.js App?</a
          >
        </li>
        <li class="">
          <span class="chapter">0.3:</span
          ><a
            href="/book/introduction/get-help/"
            title="Welcome to the Community: three.js Around the Web"
            >Welcome to the Community: three.js Around the Web</a
          >
        </li>
        <li class="">
          <span class="chapter">0.4:</span
          ><a
            href="/book/introduction/github-repo/"
            title="three.js on GitHub - Where the Magic Happens"
            >three.js on GitHub - Where the Magic Happens</a
          >
        </li>
        <li class="">
          <span class="chapter">0.5:</span
          ><a
            href="/book/introduction/get-threejs/"
            title="How to Include three.js in Your Projects"
            >How to Include three.js in Your Projects</a
          >
        </li>
        <li class="">
          <span class="chapter">0.7:</span
          ><a
            href="/book/introduction/threejs-with-frameworks/"
            title="Using three.js with React, Vue.js, Angular, Svelte, TypeScript..."
            >Using three.js with React, Vue.js, Angular, Svelte,
            TypeScript...</a
          >
        </li>
        <li class="section-head">
          <span class="chapter">1:</span
          ><a
            href="/book/first-steps/"
            title="Getting Started: Here&#39;s Where the Real Fun Begins!"
            >Getting Started: Here&#39;s Where the Real Fun Begins!</a
          >
        </li>
        <li class="">
          <span class="chapter">1.1:</span
          ><a
            href="/book/first-steps/app-structure/"
            title="The Structure of a three.js App"
            >The Structure of a three.js App</a
          >
        </li>
        <li class="">
          <span class="chapter">1.2:</span
          ><a
            href="/book/first-steps/first-scene/"
            title="Your First three.js Scene: Hello, Cube!"
            >Your First three.js Scene: Hello, Cube!</a
          >
        </li>
        <li class="">
          <span class="chapter">1.3:</span
          ><a
            href="/book/first-steps/world-app/"
            title="Introducing the World App"
            >Introducing the World App</a
          >
        </li>
        <li class="">
          <span class="chapter">1.4:</span
          ><a
            href="/book/first-steps/physically-based-rendering/"
            title="Physically Based Rendering and Lighting"
            >Physically Based Rendering and Lighting</a
          >
        </li>
        <li class="">
          <span class="chapter">1.5:</span
          ><a
            href="/book/first-steps/transformations/"
            title="Transformations and Coordinate Systems"
            >Transformations and Coordinate Systems</a
          >
        </li>
        <li class="">
          <span class="chapter">1.6:</span
          ><a
            href="/book/first-steps/responsive-design/"
            title="Making Our Scenes Responsive (and also Dealing with Jaggies)"
            >Making Our Scenes Responsive (and also Dealing with Jaggies)</a
          >
        </li>
        <li class="">
          <span class="chapter">1.7:</span
          ><a
            href="/book/first-steps/animation-loop/"
            title="The Animation Loop"
            >The Animation Loop</a
          >
        </li>
        <li class="">
          <span class="chapter">1.8:</span
          ><a
            href="/book/first-steps/textures-intro/"
            title="A Brief Introduction to Texture Mapping"
            >A Brief Introduction to Texture Mapping</a
          >
        </li>
        <li class="">
          <span class="chapter">1.9:</span
          ><a
            href="/book/first-steps/camera-controls/"
            title="Extend three.js With a Camera Controls Plugin"
            >Extend three.js With a Camera Controls Plugin</a
          >
        </li>
        <li class="">
          <span class="chapter">1.10:</span
          ><a
            href="/book/first-steps/ambient-lighting/"
            title="Ambient Lighting: Illumination from Every Direction"
            >Ambient Lighting: Illumination from Every Direction</a
          >
        </li>
        <li class="">
          <span class="chapter">1.11:</span
          ><a
            href="/book/first-steps/organizing-with-group/"
            title="Organizing Your Scenes"
            >Organizing Your Scenes</a
          >
        </li>
        <li class="">
          <span class="chapter">1.12:</span
          ><a
            href="/book/first-steps/built-in-geometries/"
            title="The Built-In Geometries"
            >The Built-In Geometries</a
          >
        </li>
        <li class="">
          <span class="chapter">1.13:</span
          ><a
            href="/book/first-steps/load-models/"
            title="Load 3D Models in glTF Format"
            >Load 3D Models in glTF Format</a
          >
        </li>
        <li class="">
          <span class="chapter">1.14:</span
          ><a
            href="/book/first-steps/animation-system/"
            title="The three.js Animation System"
            >The three.js Animation System</a
          >
        </li>
        <li class="section-head">
          <span class="chapter">A:</span
          ><a href="/book/appendix/" title="Appendices">Appendices</a>
        </li>
        <li class="">
          <span class="chapter">A.1:</span
          ><a
            href="/book/appendix/html-and-css-reference/"
            title="HTML and CSS Used in This Book"
            >HTML and CSS Used in This Book</a
          >
        </li>
        <li class="">
          <span class="chapter">A.2:</span
          ><a
            href="/book/appendix/javascript-reference/"
            title="JavaScript Reference"
            >JavaScript Reference</a
          >
        </li>
        <li class="">
          <span class="chapter">A.3:</span
          ><a
            href="/book/appendix/dom-api-reference/"
            title="The Document Object Model and DOM API"
            >The Document Object Model and DOM API</a
          >
        </li>
        <li class="">
          <span class="chapter">A.4:</span
          ><a
            href="/book/appendix/javascript-modules/"
            title="JavaScript Modules"
            >JavaScript Modules</a
          >
        </li>
        <li class="">
          <span class="chapter">A.5:</span
          ><a
            href="/book/appendix/asynchronous-javascript/"
            title="Asynchronous JavaScript"
            >Asynchronous JavaScript</a
          >
        </li>
        <li class="">
          <span class="chapter">B.1:</span
          ><a
            href="/book/appendix/threejs-versions/"
            title="Dealing with Different three.js Versions"
            >Dealing with Different three.js Versions</a
          >
        </li>
        <li class="unavailable section-head">
          <span class="chapter">R:</span
          ><span>References and Resources</span>
        </li>
        <li class="">
          <span class="chapter">R:</span
          ><a
            href="/tips-and-tricks/"
            title="The Big List of three.js Tips and Tricks!"
            >The Big List of three.js Tips and Tricks!</a
          >
        </li>
      </ul>
    </div>
  </nav>
</div>
<nav class="side-menu right-menu">
  <h2>
    <a href="/">
      <img
        alt="Discover three.js logo"
        width="100%"
        src="/static/images/logo/banner_trans_512.png"
      />
    </a>
  </h2>
  <ul class="links" style="text-align: center">
    <li><a href="/book/contents/">Table Of Contents</a></li>
    <li><a href="/tips-and-tricks/">Tips and Tricks</a></li>

    <li style="margin: auto">
      <a href="/#mailing-list-signup" class="internal-link"
        >Stay up to date - sign up to the mailing list!</a
      >
    </li>
  </ul>
</nav><style>
  @font-face {
    font-family: "Open Sans";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local("Open Sans Regular"), local("OpenSans-Regular"),
      url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0b.woff2)
        format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
  @font-face {
    font-family: "Varela Round";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local("Varela Round Regular"), local("VarelaRound-Regular"),
      url(https://fonts.gstatic.com/s/varelaround/v12/w8gdH283Tvk__Lua32TysjIfp8uP.woff2)
        format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
  @font-face {
    font-family: "Fira Code";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url(https://fonts.gstatic.com/s/firacode/v9/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVD7Ng.woff2)
      format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
</style></body>
</html>
