<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <title>JavaScript Reference | Discover three.js</title><meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

<meta name="HandheldFriendly" content="True" />
<meta name="MobileOptimized" content="320" />

<meta name="viewport" content="width=device-width, initial-scale=1" />


<meta name="ROBOTS" content="INDEX, FOLLOW" />


<meta name="application-name" content="Discover three.js" />

<meta itemprop="name" content="Discover three.js" />

<meta property="og:title" content="JavaScript Reference | Discover three.js" />
<meta name="twitter:title" content="JavaScript Reference | Discover three.js" />

<meta name="description" content="To create three.js applications, you need to know some JavaScript. This chapter is a reference for all the parts of the language we use throughout this book." />
<meta property="og:description" content="To create three.js applications, you need to know some JavaScript. This chapter is a reference for all the parts of the language we use throughout this book." />
<meta name="twitter:description" content="To create three.js applications, you need to know some JavaScript. This chapter is a reference for all the parts of the language we use throughout this book." />

<meta
  itemprop="keywords"
  content="threejs webgl opengl fbx gltf khronos webvr vr webdev design cg graphics animation javascript esnext es6 education tutorials blog ebook node npm"
/>

<meta property="og:site_name" content="Discover three.js" />
<meta property="og:type" content="book" />
<meta property="og:url" content="https://discoverthreejs.com/" />
<meta
  property="og:image"
  content="https://discoverthreejs.com/images/logo.png"
/>
<meta
  property="twitter:image"
  content="https://discoverthreejs.com/images/logo.png"
/>
<meta name="twitter:creator" content="@lewy_blue" />
<meta name="twitter:site" content="@lewy_blue" />
<meta name="twitter:card" content="To create three.js applications, you need to know some JavaScript. This chapter is a reference for all the parts of the language we use throughout this book." />
<meta name="twitter:image:width" content="1024" />
<meta name="twitter:image:height" content="1024" />

<meta name="theme-color" content="#FFFFFF" />
<meta name="msapplication-TileColor" content="#00aba9" />
<meta name="msapplication-TileImage" content="/mstile-150x150.png?v=1618908049" /><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "WebPage",
    "image": "https://discoverthreejs.com/images/logo.png",
    "mainEntity": {
      "@type": "Book",
      "author": {
        "@type": "Person",
        "name": "Lewy Blue",
        "jobTitle": "Author",
        "url": "https://twitter.com/lewy_blue"
      },
      "about": "",
      "copyrightHolder": "https://discoverthreejs.com",
      "copyrightYear": "2021",
      "bookFormat": "http://schema.org/EBook",
      "datePublished": "2018-10-01",
      "image": "https://discoverthreejs.com/images/logo.png",
      "inLanguage": "English",
      "name": "Discover three.js",
      "genre": "Education",
      "keywords": "threejs webgl animation javascript es6 education tutorials blog ebook",
      "publisher": {
        "@type": "Organization",
        "name": "https://discoverthreejs.com",
        "logo": {
          "@type": "ImageObject",
          "url": "https://discoverthreejs.com/images/logo.png"
        }
      }
    }
  }
</script><link
  rel="canonical"
  href="https://discoverthreejs.com/book/appendix/javascript-reference/"
/>

<link rel="shortcut icon" type="image/png" href="/favicon.ico?v=1618908049" />

<link
  rel="apple-touch-icon"
  sizes="180x180"
  href="/apple-touch-icon.png?v=1618908049"
/>

<link
  rel="icon"
  type="image/png"
  sizes="16x16"
  href="/favicon-16x16.png?v=1618908049"
/>
<link
  rel="icon"
  type="image/png"
  sizes="32x32"
  href="/favicon-32x32.png?v=1618908049"
/>

<link rel="manifest" href="/site.json?v=1618908049" />
<link rel="mask-icon" href="/safari-pinned-tab.svg?v=1618908049" color="#5bbad5" />
<style>
      .loading-page {
        display: none;
      }
    </style>

    <link href="/css/chapters.min.css?v=1618908049" rel="stylesheet" />

    <noscript>
      <style>
        .loading-page {
          display: block;
        }
      </style>
      <link href="/css/noscript.min.css?v=1618908049" rel="stylesheet" />
    </noscript>    
    
    
    

    

    

    

    

    

    

    

    <script type="module">
  import { setupChapterEarly } from "/js/chapterEarly.js";
  setupChapterEarly();

  window.addEventListener('load', async () => {
    const { setupChapterLate } = await import(
      "/js/chapterLate.js"
    );
    setupChapterLate();

    
    const { setupIDE } = await import(
      "/js/ide.js"
      );

    const ideConfig = {

      showIDE:  true ,
      IDE: {
        fullScreen: false,
        container: '#ide-wrapper',
        serverDirectory: 'examples',
        stripDirectory: 'worlds\/appendix\/javascript-reference\/',
        closedFolders: ''
          .replace(/[\s\'\[\]']+/g, '')
          .split(','),
        comparisonMode: '',
        files: 'worlds\/appendix\/javascript-reference\/src\/main.js, worlds\/appendix\/javascript-reference\/index.html'
          .replace(/[\s\'\[\]']+/g, '')
          .split(','),
        entry: 'index.html',
        activeDocument: 'src\/main.js',
        switchImportsAllowed:
          'false',
      },
    }

    await setupIDE(ideConfig);
    
  });
</script></head>
  <body class="loading-page"><nav class="top-nav">
  <div class="nav-background"></div>

  <div class="icon-group left">
    <input type="checkbox" id="left-menu-toggle" class="hidden-input" />
    <label
      for="left-menu-toggle"
      class="control-elem"
      title="Table Of Contents"
    >
      <span class="open-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M448 360V24c0-13.3-10.7-24-24-24H96C43 0 0 43 0 96v320c0 53 43 96 96 96h328c13.3 0 24-10.7 24-24v-16c0-7.5-3.5-14.3-8.9-18.7-4.2-15.4-4.2-59.3 0-74.7 5.4-4.3 8.9-11.1 8.9-18.6zM128 134c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm0 64c0-3.3 2.7-6 6-6h212c3.3 0 6 2.7 6 6v20c0 3.3-2.7 6-6 6H134c-3.3 0-6-2.7-6-6v-20zm253.4 250H96c-17.7 0-32-14.3-32-32 0-17.6 14.4-32 32-32h285.4c-1.9 17.1-1.9 46.9 0 64z"/></svg></span>
      <span class="close-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg></span>
    </label>

    <input
      type="checkbox"
      id="toggle-ide"
      class="hidden-input ide-toggle"
    />
    <label
      for="toggle-ide"
      class="control-elem ide-control hide"
      title="Show/Hide IDE"
    >
      <span class="on-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M384 64H192C86 64 0 150 0 256s86 192 192 192h192c106 0 192-86 192-192S490 64 384 64zm0 320c-70.8 0-128-57.3-128-128 0-70.8 57.3-128 128-128 70.8 0 128 57.3 128 128 0 70.8-57.3 128-128 128z"/></svg></span>
      <span class="off-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M384 64H192C85.961 64 0 149.961 0 256s85.961 192 192 192h192c106.039 0 192-85.961 192-192S490.039 64 384 64zM64 256c0-70.741 57.249-128 128-128 70.741 0 128 57.249 128 128 0 70.741-57.249 128-128 128-70.741 0-128-57.249-128-128zm320 128h-48.905c65.217-72.858 65.236-183.12 0-256H384c70.741 0 128 57.249 128 128 0 70.74-57.249 128-128 128z"/></svg></span>
    </label>
  </div>

  <div class="icon-group center">





<a href="/book/appendix/html-and-css-reference/" title="HTML and CSS Used in This Book" class="control-elem previous"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"/></svg></a><a href="/book/appendix/dom-api-reference/" class="control-elem next" title="The Document Object Model and DOM API"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></a></a>
  </div>

  <div class="icon-group right">
    <input type="checkbox" id="right-menu-toggle" class="hidden-input" />
    <label for="right-menu-toggle" class="control-elem" title="Main Menu">
      <span class="open-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"/></svg></span>
      <span class="close-close hide"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512"><path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/></svg></span>
    </label>
  </div>
</nav><div class="wrapper orientation-auto">
      <main class="panel animate">
        <div class="scroller">
          <div class="content">
            
              <div class="chapter-info">Word Count:15470, reading time: ~73minutes</div>
            
            <h1 id="javascript-reference">JavaScript Reference</h1>
<figure class="tiny right noborder">
  <img src="/images/app-logos/javascript.png" loading="lazy" alt="JavaScript logo" title="JavaScript logo"  /></figure>
<p>In the previous chapter, we created a very basic web page consisting of one HTML file and one CSS file. Now, we&rsquo;ll turn our attention to JavaScript which is the main language we&rsquo;ll use throughout this book.</p>
<p>Over the next four chapters, we&rsquo;ll cover <em>everything</em> you need to know about JavaScript to follow the code in this book.</p>
<p>These chapters are for you:</p>
<ul>
<li>If you have never used JavaScript before.</li>
<li>If you are familiar with older versions of JavaScript and you&rsquo;re wondering what these fancy new modules and arrow functions are all about.</li>
<li>If you&rsquo;re making the switch from another language like Python or Java.</li>
<li>If you&rsquo;re already familiar with JavaScript but you want a refresher on the parts we&rsquo;ll be using throughout the book.</li>
</ul>
<p>These chapters are intended to be a lighting quick introduction to bring you up to speed so you can proceed with this book, no matter your background. If you do want to go deeper on any topic, the excellent and in-depth tutorials on the <a href="https://developer.mozilla.org/en-US/docs/Web" target="_blank" rel="noopener noreferrer">Mozilla Developer Network (MDN)</a> are a good place to start.</p>
<p>In this chapter, we&rsquo;ll start by exhaustively (and perhaps exhaustingly) exploring the syntax you need to know to follow the main text. You may find it more useful to use it as a reference rather than attempting to read through from start to finish. You will be referred here from the main text whenever we encounter a new JavaScript feature.</p>
<p>This chapter is not a complete JavaScript reference. The JavaScript used in this book is only a fraction of the entire JavaScript API, we make no attempt to explain <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Inheritance_and_the_prototype_chain" target="_blank" rel="noopener noreferrer"><strong>prototypical inheritance</strong></a>, and we&rsquo;ll only briefly touch on <a href="#scope-and-closures"><strong>scope and closures</strong></a> which are arguably the trickiest parts of JavaScript to understand.</p>
<h2 id="old-school-and-modern-javascript">Old-School and Modern JavaScript</h2>
<p>Throughout this section, we&rsquo;ll frequently refer to <em>old-school</em> and <em>modern</em> JavaScript. Here, <em>modern</em> means any features added to JavaScript in version ES6 (released in 2015) or later. <em>Old-school</em> refers to any syntax that existed prior to that, from versions ES1 through ES5. The reason for this distinction is that when using a feature of modern JavaScript, you have to take care to ensure it has been implemented by browsers, although fortunately this is becoming less and less of an issue as browser vendors catch up with the spec.</p>
<p>Modern JavaScript is also referred to as <em>ESNext</em>. All the syntax from old-school JavaScript still works, so we can consider ESNext to be a superset of old-school JavaScript.</p>
<h2 id="javascript-modules-and-the-entry-point">JavaScript Modules and the Entry Point</h2>
<p>All the JavaScript we write will go inside files with <code>.js</code> extensions. Rather than put everything into one file, we&rsquo;ll split out code into many small modules, a topic to which we devote <a href="/book/appendix/javascript-modules/">an entire chapter</a> since modules are part of modern JavaScript and may be unfamiliar to many people.</p>
<p>Once we&rsquo;ve split up our application in this manner, we&rsquo;ll have one main JavaScript file that references and coordinates the other JavaScript modules. This main file is called the <strong>entry point</strong> of our application, and we will name it <em><strong>main.js</strong></em> (it&rsquo;s also common to call this <em><strong>index.js</strong></em> or <em><strong>app.js</strong></em>).</p>
<h2 id="referencing-javascript-modules-from-html">Referencing JavaScript Modules from HTML</h2>
<p>Next, we need to connect <em><strong>main.js</strong></em> to our minimal HTML page so that it will run when the page loads. We touched on this <a href="/book/appendix/html-and-css-reference/#the-src-attribute">in the previous chapter</a>.</p>
<p>Here, we have placed the <em><strong>main.js</strong></em> file in a folder called <em><strong>src/</strong></em> right next to the <em><strong>index.html</strong></em> file.</p>
<p>To load this file, we&rsquo;ll add a <code>&lt;script&gt;</code> element with a <code>src</code> attribute to <a href="/book/appendix/html-and-css-reference/#the-head-element">the head section</a> of <em><strong>index.html</strong></em>. The <code>src</code> attribute will reference <em><strong>main.js</strong></em>.</p>
<p>Open up the inline code editor on this page to see this in action.</p>


<section class="highlight-wrapper"><span class="caption">Referencing main.js from index.html</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-html match-braces">
&lt;script type=&#34;module&#34; src=&#34;./src/main.js&#34;&gt;&lt;/script&gt;
</code>
  </pre>
</section>

<p>This file also has a <code>type=&quot;module&quot;</code> attribute to let the browser know that we&rsquo;re splitting our code up into modules.</p>
<h3 id="inline-scripts">Inline Scripts</h3>
<p>You can also write JavaScript directly in HTML like this:</p>


<section class="highlight-wrapper"><span class="caption">An inline script element that contains old-school JavaScript</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-html match-braces">
&lt;script&gt;
  console.log(&#39;Welcome to JavaScript!&#39;);
&lt;/script&gt;
</code>
  </pre>
</section>

<p>Inline scripts can also have the <code>type=&quot;module&quot;</code> attribute:</p>


<section class="highlight-wrapper"><span class="caption">An inline script element that contains modern JavaScript</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-html match-braces">
&lt;script type=&#34;module&#34;&gt;
  console.log(&#39;Welcome to JavaScript Modules!&#39;);
&lt;/script&gt;
</code>
  </pre>
</section>

<p>We&rsquo;ll never write inline code in this book. It&rsquo;s cleaner to keep your JavaScript in a separate file.</p>
<p>However, to the browser, there&rsquo;s no difference between code written inline or in a separate file. Any code from this chapter will work the same way in either case.</p>
<h2 id="the-developer-console">The Developer Console</h2>
<p>Yet another place you can run JavaScript code is the <a href="/book/appendix/dom-api-reference/#the-browser-developer-console">browser console</a>. Press F12 to open it now, if you&rsquo;re reading this from a device with a keyboard.</p>
<p>The console provides a handy scratchpad for testing out ideas while you work on a website. If you like, you can open the console now and test out the code in this chapter while you read.</p>
<h2 id="comments">Comments</h2>
<p>Single line comments in JavaScript start with a double forward slash: <code>//</code></p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
// This is a comment - anything written here will be ignored
// This is the second line of the comment
</code>
  </pre>
</section>

<p>We can also write multi-line comments, starting with <code>/*</code> and ending with <code>*/</code>.</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
/*

 This is a multi-line comment.

 Everything inside here gets ignored

*/
</code>
  </pre>
</section>

<h2 id="keywords">Keywords</h2>
<p>In general, you can name things whatever you like when writing JavaScript. You can even use emojis or hieroglyphs. However, some keywords are reserved. These are used to access functionality of the language, for example  <code>var</code>, <code>let</code>, <code>const</code>, <code>function</code>, <code>Object</code>, <code>String</code>, <code>Number</code>, <code>class</code>, <code>this</code>, and so on. We&rsquo;ll encounter many of them throughout this chapter.</p>
<h2 id="operators">Operators</h2>
<p>Most special characters that can be typed using a standard keyboard are reserved as operators, for example <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>!</code>, <code>(</code>, <code>)</code>, and so on. We&rsquo;ll cover many of these in more detail below, and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Expressions_and_Operators" target="_blank" rel="noopener noreferrer">this page has a complete list</a>.</p>
<h2 id="capitalization-matters">Capitalization Matters</h2>
<p>The capitalization of a word matters in JavaScript. This applied both to reserved keywords and names you create. For example, <code>String</code> is a reserved keyword, but <code>string</code> is not. If you create an object called <code>Cat</code>, it will be different from an object called <code>cat</code>.</p>
<h2 id="variables-let-const-var">Variables: <code>let</code>, <code>const</code>, <code>var</code></h2>
<p>Variables are named areas of the computer&rsquo;s memory. We can save some data (a <em>value</em>) to a variable and then use the name to access it later. In JavaScript, variables don&rsquo;t have a specific data type, so we can save any type of data such as strings, numbers, arrays, objects, and functions, to any variable.</p>
<p>Variable names cannot start with numbers. <code>23cats</code> is not a valid variable name, but <code>cats23</code> is.</p>
<p>Variables names can start with some special characters (as long as they are not used for operators). The two non-reserved special characters that can be typed with a standard keyboard are <code>$</code> and <code>_</code>, so variables names like <code>$cats</code>, <code>_cats</code> are common.</p>
<h3 id="naming-conventions">Naming Conventions</h3>
<p>While the JavaScript spec doesn&rsquo;t include any special rules for naming things beyond the ones described above, in practice certain conventions are often used. For example, when a function name starts with a capital letter (<code>Cats</code>), it is usually a class or a constructor (more on that below), while a completely capitalized word is often used for mathematical constants (<code>EPSILON</code>, <code>PI</code>, <code>SQRT2</code>, and so on). Variables names that start with <code>_</code> are usually intended to be private (not accessible from outside the current scope, module, or file).</p>
<h4 id="camel-case">Camel Case</h4>
<p>Variable names are usually written in <a href="https://en.wikipedia.org/wiki/Camel_case" target="_blank" rel="noopener noreferrer"><strong>CamelCase</strong></a>: <code>aHerdOfCats</code>, <code>aKindleOfKittens</code>.</p>


<section class="highlight-wrapper"><span class="caption">Variable names are almost always written in CamelCase</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const myName = &#39;Lewy&#39;;

let modelHasLoaded = false;
</code>
  </pre>
</section>

<h3 id="var"><code>var</code></h3>
<p>Old-school JavaScript had one way of defining a variable, using the keyword <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/var" target="_blank" rel="noopener noreferrer"><code>var</code></a>:</p>


<section class="highlight-wrapper"><span class="caption">Old-school JavaScript variables used the var keyword</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
var a = &#39;hello&#39;; // a string

var b = 5; // a number

var e = [1, 2, 3, 4, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;, &#39;i&#39;]; // an array containing numbers and strings
</code>
  </pre>
</section>

<p><code>var</code> has some technical issues which we won&rsquo;t get into here, so the ES6 release of JavaScript introduced two new ways of defining variables: <code>let</code> and <code>const</code>.</p>
<p>You can still use <code>var</code> for backward compatibility, but you don&rsquo;t need to anymore, and we&rsquo;ll never use <code>var</code> in this book.</p>
<h3 id="const"><code>const</code></h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const" target="_blank" rel="noopener noreferrer"><code>const</code></a> is used to assign data to a variable that <strong>cannot be changed</strong> within the current scope (<a href="#scope-and-closures">we&rsquo;ll explain scope below</a>).</p>


<section class="highlight-wrapper"><span class="caption">The const keyword the first of two ways of defining variables in modern JavaScript</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = 5; // x must always equal 5 within the current scope
</code>
  </pre>
</section>

<p>Attempting to change it later will cause an error:</p>


<section class="highlight-wrapper"><span class="caption">Variables defined using const cannot be changed</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
x = 6; //  Error! Can&#39;t update constant variable!
</code>
  </pre>
</section>

<h3 id="let"><code>let</code></h3>
<p>When using <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let" target="_blank" rel="noopener noreferrer"><code>let</code></a> to define a variable you are saying that the value may be changed sometime in the future:</p>


<section class="highlight-wrapper"><span class="caption">The const keyword the second way of defining variables in modern JavaScript</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let y = 5;
</code>
  </pre>
</section>

<p>Unlike with <code>const</code>, you can change the value later:</p>


<section class="highlight-wrapper"><span class="caption">Variables defined using let can be changed</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
y = 6; // no error, y now holds the number 6
</code>
  </pre>
</section>

<p><code>const</code> will always be our first choice for assigning variables. We&rsquo;ll only use <code>let</code> if we are certain that a variable needs to change later.</p>
<p>Aside from any optimizations that the JavaScript engine might perform, it&rsquo;s useful to look at code and know at a glance if a variable will have the same value everywhere, or might change later in the code.</p>
<h3 id="dynamic-typing">Dynamic Typing</h3>
<p>JavaScript is a <em>loosely</em> or <em>dynamically</em> typed language. In short, this means that we can assign any data type to a variable:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let x = 5; // x holds a number

// sometime later
x = &#39;lemon&#39;; // x now holds a string.
</code>
  </pre>
</section>

<p>This makes the language flexible, but it can also lead to confusion as it puts the responsibility on you, the programmer, to remember what kind of data a variable holds.</p>
<p>One of the benefits of <code>const</code> is that you know a variable will always hold the initial data type that you assigned to it.</p>
<h2 id="primitive-data-types">Primitive Data Types</h2>
<p>Until recently there were only five <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noopener noreferrer">primitive data types</a> in JavaScript: <code>Boolean</code>, <code>Number</code>, <code>String</code>, <code>Null</code>, and <code>Undefined</code>.</p>
<p>Two new types, <a href="https://developer.mozilla.org/en-US/docs/Glossary/Symbol" target="_blank" rel="noopener noreferrer">Symbol</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noopener noreferrer">BigInt</a>, were added recently. We won&rsquo;t need to use those in this book though. Let&rsquo;s examine the other five now.</p>
<h3 id="boolean">Boolean</h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Boolean" target="_blank" rel="noopener noreferrer">Booleans</a> are the keywords <code>true</code> and <code>false</code>. We can use them as <em>flags</em> to let us know whether something is switched on or not, has been completed, needs to be updated, and so on:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let shouldWeUpdateTheThing = false;

let lightIsOn = true;

let modelHasLoaded = true;

let animationIsPlaying = false;
</code>
  </pre>
</section>

<p>Notice that the variables we have saved these Booleans into are all declared using <code>let</code>. Since they are flags, we&rsquo;ll usually want to change the value at some point. For example, when we start to play the animation we&rsquo;ll set <code>animationIsPlaying</code> to <code>true</code>, when we switch off the light we&rsquo;ll set <code>lightIsOn</code> to <code>false</code>, and so on.</p>
<p>Booleans also returned by the <a href="#comparison-operators"><strong>comparison operators</strong></a> which we&rsquo;ll introduce in a few moments.</p>
<h3 id="number">Number</h3>
<p>JavaScript does not differentiate between an <strong>integer</strong> such as -23, 0, or 100 and a <strong>floating-point number</strong> such as 0.05, 23.0002, or 4.5. All numbers are stored as floating points. There&rsquo;s no such thing as an integer value in JavaScript. In other words, 5 and 5.0 are the same value. This is not the case in every programming language.</p>
<p>All numbers are represented using the <a href="https://developer.mozilla.org/en-US/docs/Glossary/Number" target="_blank" rel="noopener noreferrer">Number</a> data type. The Number data type can hold any number between $-2^{53} - 1$ and $2^{53} - 1$ ($-9007199254740991$ and $9007199254740991$).</p>
<h4 id="special-numbers">Special Numbers</h4>
<p>There are a couple of special constants within the Number data type that you might encounter: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity" target="_blank" rel="noopener noreferrer"><code>Infinity</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN" target="_blank" rel="noopener noreferrer"><code>NaN</code></a> (Not a Number), and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/EPSILON" target="_blank" rel="noopener noreferrer"><code>Number.EPSILON</code></a> which represents the smallest possible value that can be represented in JavaScript.</p>
<h4 id="working-with-floating-point-data">Working with Floating-Point Data</h4>
<p>All numbers in JavaScript are floating-point numbers, and as with any programming language, care must be taken to avoid <em>floating-point errors</em>.</p>
<p><strong>Some decimal numbers cannot be represented accurately in binary, and this results in a common class of errors called <em>floating-point errors</em></strong>.</p>
<p>For example, $12.9 \times 2.3 = 29.67$, right?</p>
<p>Not according to floating-point arithmetic!</p>


<section class="highlight-wrapper"><span class="caption">If you check the console, you won&rsquo;t see the result you expect!</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const result = 12.9 * 2.3;

console.log(result); // -&gt; 29.669999999999998
</code>
  </pre>
</section>

<p>We expect $29.67$, but we get $29.669999999999998$. This is an error of approximately $0.000000000000001$, or $1 \times 10^{-15}$.</p>
<p>Of course, is an <em>exceedingly</em> tiny number. In practice, in most cases, you won&rsquo;t notice this error.</p>
<p>However, there are some situations where this is a problem:</p>
<ol>
<li>Comparing the results of two mathematical operations together.</li>
<li>Using the result as input for another calculation.</li>
</ol>
<p>In the second case, if you perform many thousands of calculations, which is common when performing animations, for example, the error will increase with every new calculation. Within a couple of seconds, you may notice your animations have gone out of sync.</p>
<p>This is a somewhat complex topic and we won&rsquo;t get into it more deeply here. If you want to look explore this further, here&rsquo;s <a href="https://floating-point-gui.de/basic/" target="_blank" rel="noopener noreferrer">a simple article</a>, and <a href="http://adripofjavascript.com/blog/drips/avoiding-problems-with-decimal-math-in-javascript.html" target="_blank" rel="noopener noreferrer">a slightly less simple article with some techniques for resolving the problem</a>.</p>
<h3 id="string">String</h3>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Glossary/String" target="_blank" rel="noopener noreferrer">String</a> data type represents arrays of letters, numbers, and other characters as well as methods for manipulating them.</p>
<p>Strings which can be defined using single quotes:</p>


<section class="highlight-wrapper"><span class="caption">Strings can be defined with single quotes</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const a = &#39;Hi there!&#39;;
</code>
  </pre>
</section>

<p>Or using double quotes:</p>


<section class="highlight-wrapper"><span class="caption">&hellip; or double quotes</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const b = &#34;I&#39;m a bumblebee!&#34;;
</code>
  </pre>
</section>

<h4 id="escape-characters">Escape Characters</h4>
<p>When using double quotes we can write the word <code>&quot;I'm&quot;</code> which contains a single quote character.
To write this using single quotes, we have to use a backslash <a href="https://en.wikipedia.org/wiki/Escape_character#JavaScript" target="_blank" rel="noopener noreferrer"><strong>escape character</strong></a>:</p>


<section class="highlight-wrapper"><span class="caption">Escaping characters</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const b = &#39;I\&#39;m a bumblebee&#39;;
</code>
  </pre>
</section>

<h4 id="template-strings">Template Strings</h4>
<p>A new way of creating strings became available in ESNext JavaScript, known as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" target="_blank" rel="noopener noreferrer"><strong>template literals</strong></a> or <strong>template strings</strong>. These are defined using <em>backticks</em> rather than quotes, and allow us to do a few extra things. For example, template strings can span multiple lines:</p>


<section class="highlight-wrapper"><span class="caption">A template string spanning multiple lines</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = `
  A multi-line string like this
  would&#39;ve been much harder to
  write in JavaScript up until
  a couple of years ago
  ^_^
`;
</code>
  </pre>
</section>

<p>We can also use template strings to include variables and calculation in our strings, by placing them inside <code>${}</code>.</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const val = 5;

const string = `The value is ${val}`;
</code>
  </pre>
</section>

<p>This makes combining and adding strings together much simpler. To display the result of adding two numbers in old-school JavaScript we&rsquo;d have to do all of this:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const a = 2;
const b = 3;

const answer = &#39;The sum of &#39; &#43; a &#43; &#39; plus &#39; &#43; b &#43; &#39; is: &#39; &#43; (a &#43; b) &#43; &#39;.&#39;;
</code>
  </pre>
</section>

<p>Phew!</p>
<p>Doing this with template strings is much simpler:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const answer = `The sum of ${a} plus ${b} is ${a &#43; b}.`;
</code>
  </pre>
</section>

<h3 id="null-and-undefined">Null and Undefined</h3>
<p>The next two primitive data types, <a href="https://developer.mozilla.org/en-US/docs/Glossary/Null" target="_blank" rel="noopener noreferrer">Null</a> and <a href="https://developer.mozilla.org/en-US/docs/Glossary/Undefined" target="_blank" rel="noopener noreferrer">Undefined</a>, are similar in JavaScript. Both mean &ldquo;nothing here&rdquo;.</p>
<p>The main difference is that <code>undefined</code> get assigned automatically whenever some value is not found, whereas <code>null</code> only happens when the programmer types in <code>null</code> somewhere in the code.</p>
<p>If you ask JavaScript &ldquo;<em>what is</em> <code>x</code>_?_&rdquo; but you&rsquo;ve never given any value to <code>x</code>, then it will tell you &ldquo;<code>x</code> _is <code>undefined</code>_&rdquo;.</p>
<p>By contrast, you might set <code>let x = null</code> somewhere in your code to let yourself know that <code>x</code> has not been given a value yet.</p>
<p>Note that the name of the data types are <strong>Null</strong> and <strong>Undefined</strong>, starting with capital letters, but when we use them in our code, they start with small letters: <code>null</code> and <code>undefined</code>.</p>
<h2 id="objects">Objects</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Objects" target="_blank" rel="noopener noreferrer">Object</a> is the only <strong>non-primitive data type</strong> in JavaScript. Non-primitive means that objects are made up of collections of other data types.</p>
<p>Objects in JavaScript are defined using curly braces: <code>{}</code>, and hold collections of data in <code>[key, value]</code> pairs.</p>


<section class="highlight-wrapper"><span class="caption">The Object data type</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const object = {};
</code>
  </pre>
</section>

<p><strong>Everything that is not one of the above primitive data types is an object, including functions, arrays, and classes.</strong> This makes Object the most important data type in JavaScript, and you should take the time to understand it well. For more details check out the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects" target="_blank" rel="noopener noreferrer">Working with objects</a> guide on MDN.</p>
<p>When we create a function, array, class, or any other entity that derives from object, we immediately have access to all the properties, methods, and other functionality of objects.</p>
<p>The <code>object</code> we created above is not very interesting, since it doesn&rsquo;t contain any data. Here, we are creating an object called <code>newObject</code> with two keys <code>x</code> and <code>y</code> which hold values <code>5</code> and <code>'hello'</code> respectively.</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const newObject = {
  x: 5,
  y: &#39;hello&#39;,
};
</code>
  </pre>
</section>

<p><strong>Keys</strong> are also referred to as <strong>property names</strong>, and <strong>values</strong> are also referred to as <strong>properties</strong>. That means that <code>x</code> and <code>y</code> are property names, and <code>5</code> and <code>'hello'</code> are properties.</p>
<h3 id="keysproperty-names">Keys/Property Names</h3>
<p>Property names are always strings, whereas properties can be any data type (numbers, strings, arrays, other objects, functions, <code>null</code>, <code>undefined</code>, etc. ).</p>
<p>However, we don&rsquo;t need to put quotes around the property names, as we usually do when defining string - they are implicit. But you <em>can</em> add quotes if you like:</p>


<section class="highlight-wrapper"><span class="caption">An object containing some data</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const myObject = {
  &#39;x&#39;: 5,
  &#39;y&#39;: &#39;hello&#39;,
};
</code>
  </pre>
</section>

<p>Also, if you want to add certain characters like spaces or <code>-</code> to your property names, you will need to use quotes:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const myObject = {
  x: 5,
  hello-kitty: &#39;meow&#39;,
};

// Uncaught SyntaxError: Unexpected token &#39;-&#39;
</code>
  </pre>
</section>

<p>If we wrap <code>hello-kitty</code> in quotes, we can use it as a property name:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const myObject = {
  x: 5,
  &#39;hello-kitty&#39;: &#39;meow&#39;,
};
</code>
  </pre>
</section>

<p>We can store functions and arrays in objects:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const myObject = {
  x: 5,
  y: &#39;hello&#39;,
  variousNoises: [&#39;meow&#39;, &#39;woof&#39;, &#39;grrr&#39;, &#39;arg&#39;],
  printMeow: function() {
    console.log(&#39;meow-meow&#39;)
  }
};
</code>
  </pre>
</section>

<p>When a function is stored in an object like this we&rsquo;ll refer to it as a <strong>method</strong>.</p>
<p>More on arrays and functions below.</p>
<h3 id="dot-notation">Accessing data in Objects: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_accessors" target="_blank" rel="noopener noreferrer">Dot Notation and Bracket Notation</a></h3>
<p>The first and most common way of accessing data in objects is to use <strong>dot notation</strong>:</p>


<section class="highlight-wrapper"><span class="caption">Accessing values using Dot Notation</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const n = myObject.x; // variable n now holds the value 5
</code>
  </pre>
</section>

<p>You will often see methods being called using dot notation. For example, to call the <code>printMeow</code> method:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
myObject.printMeow();
// meow-meow
</code>
  </pre>
</section>

<p>Alternatively, we can use <strong>bracket notation</strong>, in which case we will pass in the key as a string.</p>


<section class="highlight-wrapper"><span class="caption">Accessing values using Bracket Notation</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const p = myObject[&#39;y&#39;]; // now variable p holds the value &#39;hello&#39;
</code>
  </pre>
</section>

<p>Bracket notation is used when you need to use a variable to access the data:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const cats = {
  fineFeline: &#39;bengal&#39;,
};

const x = &#39;fine&#39;;
const y = &#39;Feline&#39;;

const z = x &#43; y; // z = &#39;fineFeline&#39;

const result = cats[z]; // result now holds the string &#39;bengal&#39;
</code>
  </pre>
</section>

<p>You also need to use bracket notation to access property names with weird characters like our <code>hello-kitty</code> example above.</p>
<p>Attempting to access that property name using dot notation will cause an error:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
myObject.hello-kitty;
// Uncaught ReferenceError: kitty is not defined
</code>
  </pre>
</section>

<p>Bracket notation to the rescue!</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
myObject[&#39;hello-kitty&#39;];
// &#34;meow&#34;
</code>
  </pre>
</section>

<h3 id="adding-and-changing-object-data">Adding and Changing Object Data</h3>
<p>We can add more data to an object after we have created it, and we can also change existing data. Once again, we can use either dot or bracket notation to do this.</p>
<p>Here, we add a key/value pair to an object using dot notation:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const cats = {
  fineFeline: &#39;bengal&#39;,
};

// add a new key/value pair
cats.fluffBall = &#39;persian&#39;;

// assign a new value to an existing key
cats.fineFeline = &#39;maineCoon&#39;;
</code>
  </pre>
</section>

<p>Note that, even though we defined the <code>cats</code> variable using <code>const</code>, we can still change data <em>inside</em> the object. However, we cannot assign a completely new value to <code>cats</code>:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
cats = 6; //  Error! Can&#39;t update constant variable!
</code>
  </pre>
</section>

<h3 id="the-delete-operator">The <code>delete</code> Operator</h3>
<p>You can also delete a key from an object using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete" target="_blank" rel="noopener noreferrer">delete operator</a>:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
delete cats.fluffBall;
</code>
  </pre>
</section>

<h2 id="arrays">Arrays</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer">Arrays</a> in JavaScript are defined using square brackets: <code>[]</code> and hold a list of values. These values can be things like numbers, strings, other arrays, other objects, functions, and so on. Anything that can be stored in an object can also be stored in an array (since arrays are derived from objects):</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const myArray = [&#39;hello&#39;, &#39;goodbye&#39;, 45, 23];
</code>
  </pre>
</section>

<p>We access data from an array using an index, starting at zero. In the above array, index zero holds the string <code>'hello'</code> and index three holds the number <code>23</code>.</p>
<p>We use bracket notation to access elements of an array at a given index:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = myArray[0]; // x now holds the string &#39;hello&#39;
const y = myArray[2]; // y now holds the number 45
</code>
  </pre>
</section>

<p>However, we cannot use dot notation with arrays:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
x = myArray.0; // Error!
</code>
  </pre>
</section>

<h3 id="arrays-are-objects">Arrays are Objects</h3>
<p>As we mentioned above, everything that is not a primitive data type in JavaScript is an object. That means that arrays must be objects. Array indices must be object property names and array values must be object properties.</p>
<p>This also means that the indices must be strings. Let&rsquo;s test that:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = myArray[&#39;0&#39;]; // x now holds the string &#39;hello&#39;
</code>
  </pre>
</section>

<p>Sure enough, array indices are strings. When we access an array using a number, for example <code>myArray[0]</code>, the quotes are added automatically for us.</p>
<p>Arrays have several methods to help with accessing or modifying the data they contain. Check out the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener noreferrer">Arrays page on MDN</a> for a complete list.</p>
<p>We&rsquo;ll use <code>Array.push</code> quite a bit to add new items to the end of the array:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const arr = []; // create an empty array

arr.push(2); // arr = [ 2 ]

arr.push(&#39;bumblebee&#39;, &#39;butterfly&#39;); // arr = [ 2, &#39;bumblebee&#39;, &#39;butterfly&#39; ]
</code>
  </pre>
</section>

<p>We can also find the length of the array using <code>Array.length</code>:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const myArray = [&#39;hello&#39;, &#39;goodbye&#39;, 45, 23];

const length = myArray.length; // length = 4;
</code>
  </pre>
</section>

<p>We can access the last element in the array using <code>length - 1</code> as the index:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const lastElem = myArray[myArray.length - 1]; // lastElem = 23
</code>
  </pre>
</section>

<p>The <code>-1</code> is needed since arrays are indexed from zero, not one.</p>
<h2 id="functions">Functions</h2>
<p>Functions are defined using the <code>function</code> keyword and look like this:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function () {
  // do some stuff here
}
</code>
  </pre>
</section>

<p>This is an <em>anonymous function</em>, meaning that it has no name, and therefore no way for us to refer to it later.</p>
<h3 id="naming-functions">Naming Functions</h3>
<p>Often it will be useful for us to give our functions a name so that we can pass them around in our code and use them later. We can name functions in two ways. First, we can assign the function to a variable:</p>


<section class="highlight-wrapper"><span class="caption">We can save functions in variable</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const functionSavedInVariable = function() {
  // do some stuff
};
</code>
  </pre>
</section>

<p>Second, we can directly name the function:</p>


<section class="highlight-wrapper"><span class="caption">We can give functions names</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function namedFunction() {
  // do some stuff
}
</code>
  </pre>
</section>

<h3 id="calling-functions">Calling Functions</h3>
<p>We can <em>call</em> or <em>invoke</em> a function using either its name or the name of the variable that we assigned it to, followed by <code>()</code>. There&rsquo;s no difference in either case.</p>


<section class="highlight-wrapper"><span class="caption">Calling functions</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
functionSavedInVariable();
namedFunction();
</code>
  </pre>
</section>

<h3 id="empty-functions">Empty Functions</h3>
<p>Functions can be empty:</p>


<section class="highlight-wrapper"><span class="caption">An empty function</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function emptyFunction() {}
</code>
  </pre>
</section>

<p>This function does nothing, but it&rsquo;s often useful to write functions like this and fill them in later. By doing this, we can build up our code structure before we have fully worked out how a function will work.</p>
<p>When we create an empty function that we intend to replace later, we&rsquo;ll refer to it as a <strong>placeholder function</strong>.</p>
<h3 id="function-parameters-and-arguments">Function Parameters (and Arguments)</h3>
<p>Function can take <em>parameters</em>:</p>


<section class="highlight-wrapper"><span class="caption">To pass data into a function we define it with parameters</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function add(a, b) {
  const sum = a &#43; b;
}
</code>
  </pre>
</section>

<p>Later, we can call this function with two <em>arguments</em>. Here the arguments are the numbers 1 and 2:</p>


<section class="highlight-wrapper"><span class="caption">When we invoke the function we supply arguments: specific values for the parameters</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
add(1, 2);
</code>
  </pre>
</section>

<p><code>a</code> and <code>b</code> are <strong>parameters</strong>, and <code>1</code> and <code>2</code> are <strong>arguments</strong>, but this distinction is not usually important and many people use the two terms interchangeably.</p>
<h3 id="the-return-keyword">The <code>return</code> Keyword</h3>
<p>The <code>add()</code> function above is not very useful. It does add two things together, but it doesn&rsquo;t give us any way to see the results! Usually, we want a function to give us back some data, and for that, we need to use the <code>return</code> keyword.</p>


<section class="highlight-wrapper"><span class="caption">To get data from a function we use the return keyword</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function add(a, b) {
  return a &#43; b;
}

const x = add(1, 2); // x = 3
</code>
  </pre>
</section>

<p>A function will immediately exit when it encounters the <code>return</code> keyword and nothing else in the function will be processed:</p>


<section class="highlight-wrapper"><span class="caption">The function will exit when it encounters a return statement</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function useless(a, b) {
  return;

  const sum = a &#43; b; // your program will never reach this line.
}
</code>
  </pre>
</section>

<p>In this function, we are not returning any data, which means the result of the function will be <code>undefined</code>:</p>


<section class="highlight-wrapper"><span class="caption">A return statement without data will be undefined</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = useless(1, 2); // x = undefined
</code>
  </pre>
</section>

<p>There&rsquo;s nothing wrong with doing this. Often, you want a function to exit without returning data.</p>
<h3 id="pure-and-impure-functions">Pure and Impure Functions</h3>
<p>Another way of getting data out of a function is to change the value of a variable defined outside the function, as in this somewhat contrived example:</p>


<section class="highlight-wrapper"><span class="caption">An impure function changes the value of a variable defined outside the function</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let x = 5;

function changeXImpure() {
  x = 10;
}

changeXImpure(x); // now x = 10
</code>
  </pre>
</section>

<p>When we change data from outside the function, we call the function <em>impure</em>. In most cases, you should avoid doing this as it makes your code harder to read.</p>
<p>Usually, it&rsquo;s easy to convert an impure function into a pure function.</p>


<section class="highlight-wrapper"><span class="caption">A pure function returns any data but does not modify external variables</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let x = 5;

function changeXPure() {
  return 10;
}

x = changeXPure(x); // now x = 10
</code>
  </pre>
</section>

<p><strong>Functional programming</strong> is a programming style that requires you to only use pure functions. In this book, we&rsquo;ll take a pragmatic approach. We&rsquo;ll aim to write pure functions but if it seems like we&rsquo;re jumping through hoops to do so, we&rsquo;ll allow a couple of impure functions to slip in.</p>
<h3 id="passing-data-into-functions">Passing Data into Functions</h3>
<p>Functions in JavaScript are <strong>polymorphic</strong>, meaning that they don&rsquo;t care what kind of data type you pass in.</p>
<p>Take a look at the <code>add</code> function again.</p>


<section class="highlight-wrapper"><span class="caption">The add function</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function add(a, b) {
  return a &#43; b;
}
</code>
  </pre>
</section>

<p>We can call this function with any data type.</p>
<p>For example, we can pass in numbers as we did above:</p>


<section class="highlight-wrapper"><span class="caption">Calling the add function with two numbers</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = add(1, 2);
// x = 3
</code>
  </pre>
</section>

<p>Or, we can pass in two strings:</p>


<section class="highlight-wrapper"><span class="caption">Calling the add function with two strings</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = add(&#39;caterpillar&#39;, &#39;butterfly&#39;);
// x = &#39;caterpillarbutterfly&#39;
</code>
  </pre>
</section>

<p>Or a string and a number:</p>


<section class="highlight-wrapper"><span class="caption">Calling the add function with a number and a string</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = add(2, &#39;asparagus&#39;);
// x = &#34;2asparagus&#34;
</code>
  </pre>
</section>

<p>We can even add an object and a string:</p>


<section class="highlight-wrapper"><span class="caption">Calling the add function with two strings</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = {
  a: &#39;kitty&#39;,
};

const y = &#39;goodbye&#39;;

const z = add(x, y);
// z = &#34;[object Object]goodbye&#34;
</code>
  </pre>
</section>

<p>JavaScript doesn&rsquo;t care. But look what happened we added the number <code>&quot;2&quot;</code> and the string <code>&quot;asparagus&quot;</code>. We got the string <code>&quot;2asparagus&quot;</code> since the number <code>2</code> was automatically converted to a string.</p>
<p>Even weirder, when we added the object and string together we got the string <code>&quot;[object Object]goodbye&quot;</code>! Huh?</p>
<p>What we have encountered here is <strong>type coercion</strong>. In short, when we tell JavaScript to add two values together, the values get converted to a data type suitable for addition. For mathematical operations like addition, the end result will be either a number or a string. We&rsquo;ll look at <a href="#type-coercion">type coercion</a> more deeply when we&rsquo;re exploring comparison operators below.</p>
<p>The important thing to take away here is that JavaScript will let you add <em>anything</em> to <em>anything</em>, but that doesn&rsquo;t mean you will always get a sensible result! Unless you know what you are doing, only add numbers to numbers or strings to strings.</p>
<p>What about that <code>&quot;[object Object]goodbye&quot;</code>? In this case, once again the object has been converted to a string. When an object gets converted to a string, it becomes the string <code>&quot;[object Object]&quot;</code>. Mystery solved, for now.</p>
<h3 id="functions-are-objects">Functions Are Objects</h3>
<p>Just like arrays, functions are also objects. This means that <a href="#objects">everything we wrote about objects</a> is true for functions as well. For example, we can create a new property (<code>[key, value]</code>) pair on a function:</p>


<section class="highlight-wrapper"><span class="caption">Functions are objects so we can add new properties to them</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function add(a, b) {
  return a &#43; b;
}

add.details = &#39;Adds the two arguments together&#39;;
</code>
  </pre>
</section>

<h3 id="arrow-functions">Arrow Functions</h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener noreferrer">Arrow Functions</a> are a new kind of function available in modern JavaScript. These are similar to normal functions but have a shorter syntax.</p>
<p>Here&rsquo;s an anonymous arrow function:</p>


<section class="highlight-wrapper"><span class="caption">An anonymous arrow function</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
() =&gt; {};
</code>
  </pre>
</section>

<p>Compare that to an anonymous normal function:</p>


<section class="highlight-wrapper"><span class="caption">An anonymous &lsquo;normal&rsquo; function</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function() {};
</code>
  </pre>
</section>

<p>Let&rsquo;s create a subtract function to complement our add function above, written in arrow style:</p>


<section class="highlight-wrapper"><span class="caption">A simple arrow function that subtracts the two arguments</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const subtract = (a, b) =&gt; {
  return a - b;
};
</code>
  </pre>
</section>

<p>Leaving out the curly braces makes the <code>return</code> keyword implicit:</p>


<section class="highlight-wrapper"><span class="caption">If you omit the {} the return keyword is implicit</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const subtract = (a, b) =&gt; a - b;
</code>
  </pre>
</section>

<p>This makes arrow functions extremely terse. When writing JavaScript you will create a lot of simple functions and writing them as arrow functions makes the code much shorter and easier to read.</p>
<p>Let&rsquo;s compare that to our <code>add</code> function again to show the difference:</p>


<section class="highlight-wrapper"><span class="caption">Arrow and normal functions are invoked in the same way</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function add(a, b) {
  return a &#43; b;
}

const subtract = (a, b) =&gt; a - b;

const x = add(1,2); // x = 3
const y = subtract(2,1); // y = 1
</code>
  </pre>
</section>

<h4 id="the-difference-between-arrow-functions-and-normal-functions">The Difference Between Arrow Functions and &ldquo;Normal&rdquo; Functions</h4>
<p>When writing simple functions like <code>add</code> and <code>subtract</code>, there&rsquo;s no difference between arrow functions and &ldquo;normal&rdquo; functions. In most cases, you can pick whichever style looks best. Sometimes, writing out <code>function...</code> will break up the flow of your code, while at other times you may want to make it very clear that a block of code is a separate function. <strong>We will always write anonymous functions as arrow functions.</strong></p>
<p>However, in other situations, there are important technical differences between these two function styles. Understanding these requires an understanding of <a href="#scope-and-closures">scope and the <code>this</code> keyword</a> so we&rsquo;ll come back to this below.</p>
<h2 id="arithmetic-operators">Arithmetic Operators</h2>
<p>All the standard mathematical operators (AKA <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators" target="_blank" rel="noopener noreferrer">arithmetic operators</a>) are available in JavaScript. You can think of these operators as shorthand for functions, so the <code>+</code> operator is equivalent to our <code>add</code> function:</p>


<section class="highlight-wrapper"><span class="caption">Arithmetic operators can be considered as shorthand for functions</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const add = (a, b) =&gt; a &#43; b;

// These two statements are equivalent
const x = add(1, 2);
const y = 1 &#43; 2;
</code>
  </pre>
</section>

<p>Operators come in three forms: <strong>unary operators</strong>, which take one argument, or <strong>operand</strong>, <strong>binary operators</strong>, which take two operands, and <strong>ternary operators</strong>, which take three operands. Actually, there&rsquo;s only one ternary operator, all the rest are unary or binary. Note that the word <em>binary</em> here has nothing two do with the <em>binary number system</em>.</p>
<h3 id="binary-arithmetic-operators">Binary Arithmetic Operators</h3>
<h4 id="basic-arithmetic">Basic Arithmetic</h4>


<section class="highlight-wrapper"><span class="caption">The basic arithmetic operators</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const sum = 1 &#43; 2; // binary addition

const sub = 5 - 3; // binary subtraction

const div = 10 / 2; // binary division

const mult = 5 * 20; // binary  multiplication
</code>
  </pre>
</section>

<p>These are all <strong>binary operators</strong>, which means that they work with two operands. In the <strong>binary operation</strong> $1+2$:</p>
<ul>
<li>$+$ is the <strong>operator</strong></li>
<li>1 and 2 are the <strong>operands</strong></li>
</ul>
<h4 id="the-modulo-operator">The Modulo Operator</h4>
<p>The <a href="https://en.wikipedia.org/wiki/Modulo_operation" target="_blank" rel="noopener noreferrer"><em>modulo</em> or <em>remainder</em> operator</a> is another binary operator that gives the remainder when the left operand is divided by the right. It always takes the sign of the left operand:</p>


<section class="highlight-wrapper"><span class="caption">The modulo operator</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
101 % 10; // 1
-101 % 10; // -1
15 % 4; // 3
15 % 3; // 0
</code>
  </pre>
</section>

<h4 id="the-exponentiation-operator">The Exponentiation Operator</h4>
<p>The final binary operator is the <em>exponentiation</em>, or <em>to the power of</em>, operator:</p>


<section class="highlight-wrapper"><span class="caption">The exponentiation operator</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const a = 2;

const b = a ** 2; // b = 2 * 2;

const c = a ** 3; // c = 2 * 2 * 2;

const d = a ** 4; // d = 2 * 2 * 2 * 2
</code>
  </pre>
</section>

<h3 id="unary-operators">Unary Operators</h3>
<p>By contrast with binary operators, <strong>unary operators</strong> work with a single operand.</p>
<p>First, there&rsquo;s <strong>unary negation</strong>, which means <em>take a variable and make it negative</em>.</p>


<section class="highlight-wrapper"><span class="caption">The unary negation operator</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const a = 5;

const b = -a; // b = -5
</code>
  </pre>
</section>

<p>Of course, that means we must also have <strong>unary addition</strong>:</p>


<section class="highlight-wrapper"><span class="caption">The unary addition operator is not useful as a mathematical operator</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const a = 5;

const b = &#43;a; // still 5
</code>
  </pre>
</section>

<p><strong>Unary plus</strong> is a different beast, however. It&rsquo;s useless as a mathematical operator, but it turns that it&rsquo;s the fastest way to turn something, such as a string, into a number:</p>


<section class="highlight-wrapper"><span class="caption">However, it can be used to turn a string into a number</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const a = &#39;3&#39;; // a string holding the character 3

const x = &#43;a; // x now holds the number 3
</code>
  </pre>
</section>

<p>It doesn&rsquo;t work in all situations, and in many cases will return <a href="#special-numbers"><code>NaN</code> (not a number)</a>.</p>


<section class="highlight-wrapper"><span class="caption">When the string doesn&rsquo;t have an obvious number equivalent the result will be NaN</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = &#39;Eritrea&#39;;

const y = &#43;x; // y = NaN
</code>
  </pre>
</section>

<p>Unary negation and unary addition use the same character as binary negation and addition. The only difference is whether you supply them with one or two operands.</p>
<h4 id="increment-and-decrement-operators">Increment and Decrement Operators</h4>
<p>Next in the list of unary operators are <em>increment (<code>++</code>)</em> and <em>decrement (<code>--</code>)</em>:</p>


<section class="highlight-wrapper"><span class="caption">The increment and decrement operators</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let x = 1;

x&#43;&#43;; // return x and then add one to x

&#43;&#43;x; // add one to x and then return it

x--; // return x and then subtract one from x

--x; // subtract one from x and then return it
</code>
  </pre>
</section>

<p>The two statements <strong>return <code>x</code> and then add one to <code>x</code></strong> and <strong>add one to <code>x</code> and then return it</strong> are potentially confusing, so let&rsquo;s see if we can make that clearer with an example.</p>
<p>First, let&rsquo;s try <code>x++</code>:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let x = 1;

const y = x&#43;&#43;;

// y = 1, x = 2
</code>
  </pre>
</section>

<p>Next, here&rsquo;s <code>++x</code>:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let x = 1;

const y = &#43;&#43;x;

// y = 2, x = 2
</code>
  </pre>
</section>

<h2 id="assignment-operators">Assignment Operators</h2>
<p>The basic <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Assignment_Operators" target="_blank" rel="noopener noreferrer">assignment operator</a> is represented by a single equals sign:</p>


<section class="highlight-wrapper"><span class="caption">The assignment operator</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = 5;
const y = &#39;hello&#39;;
</code>
  </pre>
</section>

<p>We&rsquo;ve already been using this quite a bit throughout this chapter.</p>
<p>The rest of the assignment operators are shorthand for each of the binary arithmetic operators:</p>


<section class="highlight-wrapper"><span class="caption">Shorthand assignment operators</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let a = 1;

a &#43;= 5; // a = a &#43; 5 (addition)

a -= 5; // a = a - 5 (subtraction)

a /= 5; // a = a / 5 (division)

a *= 5; // a = a * 5 (multiplication)

a **= 5; // a = a ** 5 (exponentiation)

a %= 5; // a = a % 5 (modulo)
</code>
  </pre>
</section>

<h2 id="logical-operators-and-or-not">Logical Operators: AND, OR, NOT</h2>
<p>There are three <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_Operators" target="_blank" rel="noopener noreferrer">logical operators</a> in JavaScript: AND, OR and NOT, which are defined using <code>&amp;&amp;</code>, <code>||</code> and <code>!</code>, respectively. AND (<code>$$</code>) and OR (<code>||</code>) are binary operators while NOT (<code>!</code>) is a unary operator.</p>
<p>We will often use these to compare Boolean values (<code>true</code> and <code>false</code>):</p>


<section class="highlight-wrapper"><span class="caption">Comparing Boolean values using AND, OR, and NOT</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = true;
const y = true;
const z = false;

x &amp;&amp; y; // true AND true -&gt; true
x &amp;&amp; z; // true AND false -&gt; false
z &amp;&amp; z; // false AND false -&gt; false

x || y; // true OR true -&gt; true
x || z; // true OR false -&gt; true

!x; // NOT true -&gt; false
!z; // NOT false -&gt; true
</code>
  </pre>
</section>

<p>However, more care needs to be taken when comparing other values. We&rsquo;ll discuss this in more detail in the section <a href="#truthy-falsy">Truthy and Falsy</a> below.</p>
<h2 id="comparison-operators">Comparison Operators</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Comparison_Operators" target="_blank" rel="noopener noreferrer">Comparison operators</a> compare two values and return a Boolean value (<code>true</code> or <code>false</code>).</p>
<p>All comparison operators are binary operators, meaning they take two operands.</p>
<p>Special care must be taken, not only in JavaScript but in any programming language, when comparing two floating-point numbers together. See the section <a href="#working-with-floating-point-data">Working with Floating-Point Data</a> earlier in this chapter.</p>
<h3 id="equality-comparison-operator">Equality Comparison Operator</h3>
<p>The first comparison operator we will examine is the equality operator. This comes in two flavors in JavaScript:</p>
<ol>
<li>the strict equality operator, denoted by <strong>three equals signs</strong> (<code>===</code>)</li>
<li>the loose equality operator, denoted by <strong>two equals signs</strong> (<code>==</code>)</li>
</ol>
<p>To save some time here, we won&rsquo;t get into a discussion of the difference between these two. If we <em>were</em> to discuss it, we&rsquo;d realize that in nearly every situation, we should use strict equality (<code>===</code>). We&rsquo;ll never use the loose equality operator (<code>==</code>) in this book.</p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness" target="_blank" rel="noopener noreferrer">You can read more about these two operators here</a>.</p>
<p>Using the strict equality operator, we compare two values (operands) and we get back either <code>true</code> or <code>false</code>:</p>


<section class="highlight-wrapper"><span class="caption">The strict equality operator</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
&#39;bumblebee&#39; === &#39;butterfly&#39;; // false

5 === 5; // true

true === true; // true
false === true; // false
false === false; // true
</code>
  </pre>
</section>

<h3 id="inequality-comparison-operator">Inequality Comparison Operator</h3>
<p>Strict inequality is denoted by <code>!==</code> (NOT equal):</p>


<section class="highlight-wrapper"><span class="caption">The strict inequality operator</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
5 !== 4; // true

5 !== 5; // false

&#39;apples&#39; !== &#39;dragon fruit&#39;; // true

true !== true; // false
false !== true; // true
false !== false; // false
</code>
  </pre>
</section>

<p>There is also the non-strict version: <code>!=</code>, but again, you should avoid using that unless you have a specific reason for doing so.</p>
<h3 id="relational-comparison-operators-greaterlesser-comparison">Relational Comparison Operators (Greater/Lesser Comparison)</h3>
<p>There are four relational comparison operators:</p>
<ol>
<li>greater than (<code>&gt;</code>)</li>
<li>greater than or equal (<code>&gt;=</code>)</li>
<li>less than (<code>&lt;</code>)</li>
<li>less than or equal (<code>&lt;=</code>)</li>
</ol>
<p>There&rsquo;s no need for strict and loose versions of these operators.</p>
<p>These all read from left to right, so when we write <code>x &lt; y</code> we are asking &ldquo;is x less than y?&quot;:</p>


<section class="highlight-wrapper"><span class="caption">The relational comparison operators</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
3 &lt; 5; // true

6 &gt; 23; // false

6 &lt; 6; // false

6 &lt;= 6; // true

34 &lt;= 2; // false

34 &gt;= 2; // true;
</code>
  </pre>
</section>

<h3 id="comparing-different-data-types">Comparing Different Data Types</h3>
<p>What happens when we compare two different data types? <code>6 &lt;= 5</code> has an obvious answer (that&rsquo;s <code>false</code>, by the way), but what about <code>'apples' &lt;= 5</code>?</p>
<p>Even comparing two values of the same data type doesn&rsquo;t always have an obvious answer:</p>


<section class="highlight-wrapper"><span class="caption">To find out the answer, try entering this in the browser console</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
&#39;apples&#39; &lt;= &#39;APPLES&#39;; // umm...?
</code>
  </pre>
</section>

<p>JavaScript allows us to compare <em>anything</em> with <em>anything</em>, and always has an answer ready. Figuring out what the answer will be is sometimes tricky though.</p>


<section class="highlight-wrapper"><span class="caption">Comparing different data types can give unexpected answers</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const a = &#39;apples&#39;; // a string
const b = 23; // a number
const c = { name: &#39;olive&#39; }; // an object

a &gt;= b; // hmm?
b === c; // not sure about this one
c !== a; // no idea... :&#39;(
</code>
  </pre>
</section>

<p><strong>When writing JavaScript, it&rsquo;s <em>your</em> responsibility to make sure that your comparisons make sense</strong>. Comparing <code>'apples'</code> with <code>0xffa500</code> is probably a sign there&rsquo;s a mistake in your code somewhere.</p>
<p>However, we should still take the time to understand the algorithms that JavaScript uses to calculate a result when comparing different data types.</p>
<p>Note: for actual comparison of data <em>types</em>, you should use <a href="#typeof-and-instanceof"><code>typeof</code> or <code>instanceof</code></a>, which are covered in detail below.</p>
<h2 id="type-coercion">Type Coercion</h2>
<p>The first thing JavaScript does when comparing different data types is to <strong>convert both values to the <em>same</em> <a href="#primitive-data-types">primitive data type</a></strong>. This process is called <a href="https://developer.mozilla.org/en-US/docs/Glossary/Type_coercion" target="_blank" rel="noopener noreferrer"><strong>type coercion</strong></a>.</p>
<p>Note that this coercion only happens for the sake of the comparison. The actual data you have stored in a variable is not changed in any way.</p>
<h4 id="comparing-strings-with-numbers">Comparing Strings with Numbers</h4>
<p>We&rsquo;ll examine the case of comparing strings with numbers in detail here. Something similar happens whenever you compare any two values of different data types.</p>
<p>If we compare a number with a string, then both values will be converted to a number.</p>


<section class="highlight-wrapper"><span class="caption">Comparing a string and a number results in the string being temporarily converted to a number</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
&#39;2&#39; &lt;= 3; // true
</code>
  </pre>
</section>

<p>This is also where the difference between strict and loose equality becomes apparent:</p>


<section class="highlight-wrapper"><span class="caption">The difference between strict and loose equality becomes apparent when comparing different data types</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
&#39;2&#39; == 2; // true

&#39;2&#39; === 2; // false
</code>
  </pre>
</section>

<p><strong>Usually, you wouldn&rsquo;t consider the string <code>'2'</code> to be equal to the number <code>2</code>. That&rsquo;s why we use strict equality (<code>===</code>).</strong></p>
<p>It&rsquo;s obvious how you can convert/coerce the string <code>'2'</code> to the number <code>2</code>. But what about a string like <code>'asparagus'</code>?</p>
<p>Every string that is not a number or the empty string will be converted to <a href="#special-numbers"><code>NaN</code> (Not a Number)</a>, and any number we compare with <code>NaN</code> will return <code>false</code>:</p>


<section class="highlight-wrapper"><span class="caption">Most strings are converted to NaN for comparisons with numbers</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
2 === &#39;asparagus; // false
2.3434 &gt; &#39;australopithecus ; //false
2.1 &lt; &#39;aspic; //false
2323 &gt; &#39;astaxanthin; //false
-2 &lt; &#39;auspicious; //false

// ...and so on
</code>
  </pre>
</section>



<section class="highlight-wrapper"><span class="caption">Comparing numbers with NaN always returns false</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
2 === NaN; // false
2.3434 &gt; NaN; //false
2.1 &lt; NaN; //false
2323 &gt; NaN; //false
-2 &lt; NaN; //false

// ...and so on
</code>
  </pre>
</section>

<p>The empty string (<code>''</code>) is a special case and will be converted to <code>0</code>:</p>


<section class="highlight-wrapper"><span class="caption">The empty string is converted to zero for comparisons</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
&#39;&#39; &lt;  2; // true

&#34;&#34; &gt;  1; // false

`` == 0 // true

`` === 0 // false
</code>
  </pre>
</section>

<h2 id="other-operators">Other Operators</h2>
<p>We&rsquo;ve covered quite a few operators here, but these are by no means an exhaustive list of all the operators available in JavaScript. Check out <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators" target="_blank" rel="noopener noreferrer">Expressions and Operators</a> page on MDN for a complete list.</p>
<p>You may also want to check out the page on <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="_blank" rel="noopener noreferrer">Operator Precedence</a> which goes into some details about what happens when you are applying multiple operators in one statement.</p>
<h2 id="typeof-and-instanceof"><code>typeof</code> and <code>instanceof</code></h2>
<p>Often, you will need to check what type of data a variable contains, such as strings, numbers, Booleans, functions, objects, and classes. For this purpose, JavaScript provides two similar operators: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof" target="_blank" rel="noopener noreferrer"><code>typeof</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="noopener noreferrer"><code>instanceof</code></a>.</p>
<p><code>typeof</code> is the simpler of these, and you can use it to check primitive data types:</p>
<ul>
<li><code>Undefined</code> (but not <code>Null</code>)</li>
<li>Boolean</li>
<li>Numbers</li>
<li>BigInt</li>
<li>Strings</li>
<li>Symbols</li>
<li>Functions</li>
</ul>


<section class="highlight-wrapper"><span class="caption">Some examples of using typeof</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const aString = &#39;hello&#39;;
const aNumber = 2;
const aBoolean = true;
const aFunction = function(){}
const anArrowFunction = () =&gt; {};

typeof aString; // &#39;string&#39;
typeof aNumber; // &#39;number&#39;
typeof aBoolean; // &#39;boolean&#39;
typeof aFunction; // &#39;function&#39;
typeof anArrowFunction; // &#39;function&#39;

</code>
  </pre>
</section>

<p>Using <code>typeof</code>, you can easily check whether two variables contain the same primitive data type:</p>


<section class="highlight-wrapper"><span class="caption">Comparing primitives with typeof</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const hello = &#39;hello&#39;;
const goodbye = &#39;goodbye&#39;;

const eleven = 11;
const twelve = 12;

// two variables with numbers have the same type
typeof eleven === typeof twelve; // true

// two variables with strings have the same type
typeof hello === typeof goodbye; // true

// here, one variable has a number and the other a string
// so they don&#39;t have the same type
typeof eleven === typeof goodbye; // false

</code>
  </pre>
</section>

<p>So far so good. However, if you use <code>typeof</code> with anything that&rsquo;s not in that short list of primitive data types, the result will be simply <code>'object'</code>.</p>


<section class="highlight-wrapper"><span class="caption">For non-primitive data types, typeof always returns &lsquo;object&rsquo;</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

class ClassyMcClassFace {};

const aClassInstance = new ClassyMcClassFace();
const anArray = [1,2,3];
const anObject = { a: 5 };

typeof aClassInstance; // &#39;object&#39;
typeof anArray; // &#39;object&#39;
typeof anObject; // &#39;object&#39;

</code>
  </pre>
</section>

<p>As we have mentioned several times throughout this chapter, everything that is not a primitive data type in JavaScript is an object, so this answer is correct. However, it&rsquo;s not very useful and it means we can&rsquo;t use <code>typeof</code> for comparing custom objects and classes.</p>
<p>For these we&rsquo;ll turn to <code>instanceof</code>.</p>


<section class="highlight-wrapper"><span class="caption">instanceof can be used to check the type of objects, arrays, and classes</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const aClassInstance = new ClassyMcClassFace();
const anArray = [1,2,3];
const anObject = { a: 5 };

aClassInstance instanceof ClassyMcClassFace; // true
anArray instanceof Array; // true
anObject instanceof Object; // true

</code>
  </pre>
</section>

<p>Comparisons using <code>instanceof</code> are a little more verbose than <code>typeof</code>:</p>


<section class="highlight-wrapper"><span class="caption">Comparing data types using instanceof</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const a = new ClassyMcClassFace();
const b = new ClassyMcClassFace();

(a instanceof ClassMcClassFace) &amp;&amp; (b instanceof ClassMcClassFace); // true
([1,2,3] instanceof Array) &amp;&amp; ([3,4,5] instanceof Array); // true
({a: 5} instanceof Array) &amp;&amp; ([3,4,5] instanceof Array); // false

</code>
  </pre>
</section>

<p>There&rsquo;s quite a bit more to <code>instanceof</code> since it works by checking the object&rsquo;s prototype. We&rsquo;re avoiding the discussion of prototypes in this chapter, so we&rsquo;ll cut this section short here. As usual, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof" target="_blank" rel="noopener noreferrer">the relevant MDN page</a> has a lot more details.</p>
<h2 id="control-flow">Control Flow</h2>
<p>The term <a href="https://developer.mozilla.org/en-US/docs/Glossary/Control_flow" target="_blank" rel="noopener noreferrer">Control Flow</a> refers to various methods of controlling what your program does in a given situation.</p>
<h3 id="block-statements">Block Statements</h3>
<p>The basic element of control flow is the humble <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/block" target="_blank" rel="noopener noreferrer"><strong>block</strong></a>. These are defined using curly braces <code>{}</code>, and are used to group a set of statements.</p>


<section class="highlight-wrapper"><span class="caption">The humble block statement</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
{
  const a = 5;
  const b = 6;
  const c = a &#43; b;
}
</code>
  </pre>
</section>

<p>It&rsquo;s unusual to see a block statement on its own like this. Usually, they are combined with other statements such as if&hellip;else or <a href="#loops">loops</a>.</p>
<h3 id="ifelse-statements">if&hellip;else Statements</h3>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/if...else" target="_blank" rel="noopener noreferrer">if&hellip;else statement</a> is a <strong>conditional statement</strong> that can be used to create branches in your code.</p>
<p>We use comparison operators to create the branches in an if&hellip;else statement.</p>


<section class="highlight-wrapper"><span class="caption">An if..else statement controlling a loading bar</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
if (percentLoaded &lt;= 70) {
  const barColor = &#39;blue&#39;;
  updateLoadingBar(percentLoaded, barColor);
} else if (percentLoaded &lt; 100) {
  const barColor = &#39;red&#39;;
  updateLoadingBar(percentLoaded, barColor);
} else {
  hideLoadingBar();
  startAnimation();
}
</code>
  </pre>
</section>

<p>This example controls a loading bar. As the value of <code>percentLoaded</code> increases, the loading bar is drawn a different color. Finally, once <code>percentLoaded</code> reaches 100, the bar is hidden and the animation is started.</p>
<p>Each branch in this if&hellip;else statement is wrapped in block statement.</p>


<section class="highlight-wrapper"><span class="caption">Each branch in the if..else statement is wrapped in a block</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
{
  const barColor = &#39;blue&#39;;
  updateLoadingBar(percentLoaded, barColor);
}
</code>
  </pre>
</section>

<p>In this example, we check whether a Boolean value is true or false:</p>


<section class="highlight-wrapper"><span class="caption">An if&hellip;else statement used to display an error message when the model fails to load</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let modelLoadedOK = false;

// some code to load the model here
// and set modelLoadedOK = true on success

if (modelLoadedOK === true) {
  drawScene();
} else {
  displayErrorMessage();
}
</code>
  </pre>
</section>

<p>Since there is only one line of code in each branch of this example, you could leave out the block statements:</p>


<section class="highlight-wrapper"><span class="caption">Block statements are optional</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
if (modelLoadedOK === true)
  drawScene();
else
  displayErrorMessage();
</code>
  </pre>
</section>

<p>However, it is considered best practice to always include the block statements since that makes your code more readable.</p>
<p>There are more sophisticated methods of error handling available in JavaScript, but often, a simple if&hellip;else statement is all you need.</p>
<p>Other ways of controlling the flow of your program are <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator" target="_blank" rel="noopener noreferrer">the ternary operator</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch" target="_blank" rel="noopener noreferrer">switch statements</a>.</p>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Control_flow_and_error_handling" target="_blank" rel="noopener noreferrer">control flow and error handling</a> guide on MDN goes into more detail on this topic.</p>
<h2 id="truthy-falsy"><a href="https://developer.mozilla.org/en-US/docs/Glossary/truthy" target="_blank" rel="noopener noreferrer">Truthy</a> and <a href="https://developer.mozilla.org/en-US/docs/Glossary/falsy" target="_blank" rel="noopener noreferrer">Falsy</a></h2>
<p>Take another look at the line where we checked whether the model has loaded above:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="1"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
if (modelLoadedOK === true) {
  drawScene();
}
</code>
  </pre>
</section>

<p>We can shorten this by omitting the <code>=== true</code>:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="1"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
if (modelLoadedOK) {
  drawScene();
}
</code>
  </pre>
</section>

<p>By doing this, we have placed <code>modelLoadedOK</code> into a so-called <strong>Boolean context</strong>.</p>
<p><strong><em>Putting a variable in a Boolean context</em> means we are interpreting that variable as either <code>true</code> or <code>false</code></strong>.</p>
<p>Since <code>modelLoadedOK</code> is already a Boolean, that&rsquo;s not a big deal. However, we can put any data into a Boolean context. For example, instead of creating a Boolean to track whether the model has loaded, we can simply use the model itself:</p>


<section class="highlight-wrapper"><span class="caption">Putting a loaded model into a Boolean context</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const model = loadModel();

if (model) {
  drawScene();
} else {
  displayErrorMessage();
}
</code>
  </pre>
</section>

<p>This is another example of <a href="type-coercion">type coercion</a>, by the way.</p>
<p>If the model exists, then we will interpret the variable <code>model</code> as <code>true</code>. If the model <em>does not</em> exist, then we will interpret the variable as <code>false</code>.</p>
<p><strong>Every value in JavaScript can be interpreted as either <code>true</code> or <code>false</code>.</strong></p>
<p>When a value is interpreted as true, we say that it is <strong>truthy</strong>.</p>
<p>When a value is interpreted as false, we say that it is <strong>falsy</strong>.</p>
<p>Nearly everything is interpreted as truthy in a Boolean context. Here&rsquo;s a complete list of falsy values in JavaScript:</p>
<ul>
<li>The Boolean <code>false</code></li>
<li>The number <code>0</code> or <code>0-</code></li>
<li>The empty string &ldquo;&rdquo;, &lsquo;&rsquo;, or ``</li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li>Not a Number: <code>NaN</code></li>
<li><code>BigInt</code> zero: <code>0n</code></li>
</ul>
<p>And that&rsquo;s it - everything else is truthy.</p>
<h2 id="loops">Loops and Iteration</h2>
<p>One of the things that computers are good at is doing <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Loops_and_iteration" target="_blank" rel="noopener noreferrer">lots of similar things, really, really fast</a>, such as adding a million numbers together.</p>
<p>JavaScript has several methods to perform iteration, but in general, we&rsquo;ll stick with just two: <strong>for loops</strong>, and <strong>for&hellip;of loops</strong>.</p>
<h3 id="for-loop"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for" target="_blank" rel="noopener noreferrer">For Loops</a></h3>
<p>We can perform an operation multiple times using a <strong>for loop</strong>, which looks like this:</p>


<section class="highlight-wrapper"><span class="caption">A for loop</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
for (let i = 0; i &lt; 5; i&#43;&#43;) {
  console.log(i);
}
</code>
  </pre>
</section>

<p>If you open up the browser console and paste in that code, you&rsquo;ll see the output 0, 1, 2, 3, 4.</p>
<p>The rest of the loop is made up of an initialization statement, a condition, a final expression, a block, and a statement:</p>


<section class="highlight-wrapper"><span class="caption">The technical definition of a for loop</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
for ([initialization]; [condition]; [final-expression]) {
  [statement]
}
</code>
  </pre>
</section>

<p>Everything in square brackets is optional. The <code>{}</code> is also optional, but, as with the`if&hellip;else statement, we&rsquo;ll always include it. Matching up the values in the square brackets to our example above, we have:</p>
<ul>
<li>[initialization]: <code>let i = 0</code></li>
<li>[condition]: <code>i &lt; 5</code></li>
<li></li>
<li></li>
</ul>
<p>Here&rsquo;s another simple example that adds the number 1 to <code>total</code> repeatedly until the loop ends after five thousand iterations.</p>


<section class="highlight-wrapper"><span class="caption">Using a for loop to add up some numbers</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let total = 0;

for (let i = 0; i &lt; 5000; i&#43;&#43;) {
  total = total &#43; 1;
}

console.log(total);
// =&gt; 5000
</code>
  </pre>
</section>

<h3 id="for-of-loop">for&hellip;of loops</h3>
<p>Next up is the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of" target="_blank" rel="noopener noreferrer"><strong>for&hellip;of loop</strong></a>, which was recently added to JavaScript (it&rsquo;s an ESNext feature).</p>
<p>for..of loops can be used to loop over the values of any <a href="https://javascript.info/iterable" target="_blank" rel="noopener noreferrer"><strong>iterable object</strong></a>.</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
for (const value of iterable) {
  console.log(value);
}
</code>
  </pre>
</section>

<p>When you hear <em><strong>iterable object</strong></em>, think <em><strong>something similar to an array</strong></em>.</p>
<p>Of course, that means arrays themselves are iterable objects. We can loop over all the values in an array using a for..of loop:</p>


<section class="highlight-wrapper"><span class="caption">Using a<code> for...o</code>f loop to log all the values of an array to the console</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const arr = [1, 2, 3, 4];

for (const value of arr) {
  console.log(value)
}
</code>
  </pre>
</section>

<p>If you paste that code into the console, you&rsquo;ll see the output 1, 2, 3, 4. The useful thing here is that we don&rsquo;t need to care how big the array is. The for&hellip;of loop will hit every value, whether there are four or a million elements in the array.</p>
<p>In this example, we add up all the values in an array to get the total.</p>


<section class="highlight-wrapper"><span class="caption">Using a<code> for...o</code>f loop to add the values in an array</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const arr = [1, 2, 3, 4];

let sum = 0;
for (const value of arr) {
  sum &#43;= value;
}
// now sum = 10
</code>
  </pre>
</section>

<h3 id="iterable-objects">Iterable Objects</h3>
<p>Many other built-in objects besides arrays are iterable. For example, <a href="#string">strings</a>, <a href="#typed-arrays"><code>TypedArray</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="noopener noreferrer"><code>Map</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set" target="_blank" rel="noopener noreferrer"><code>Set</code></a> are all iterable. You can also create custom iterable objects, although that is beyond the scope of this chapter</p>
<h3 id="object-values">Iterating Over <code>Object</code></h3>
<p>A notable exception from the list of iterable objects is <a href="#objects"><code>Object</code></a>:</p>


<section class="highlight-wrapper"><span class="caption">An Object containing some numbers</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const catWeights = {
  ginger: 1,
  gemima: 3,
  geronimo: 30,
};
</code>
  </pre>
</section>

<p>It&rsquo;s common to have an object containing values that you want to iterate over. <code>Object</code> has several helpful methods for this purpose.</p>
<h4 id="objectvalues"><code>Object.values()</code></h4>
<p>First up is <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Object/values" target="_blank" rel="noopener noreferrer">Object.values()</a> which simply returns the values of an object as an array.</p>


<section class="highlight-wrapper"><span class="caption">Object.values returns an array containing the object&rsquo;s values</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const catWeights = {
  ginger: 1,
  gemima: 3,
  geronimo: 30,
};

const weightValues = Object.values(catWeights);

// weightValues = [1, 3, 30];
</code>
  </pre>
</section>

<p>Now we can iterate over the <code>weightValues</code> array using for..of as usual:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let sum = 0;
for (const value of weightValues) {
  sum &#43;= value;
}
// now sum = 34
</code>
  </pre>
</section>

<p>We will usually write this more concisely by placing the call to <code>Object.values</code> inline, within the body of the for&hellip;of loop:</p>


<section class="highlight-wrapper"><span class="caption">A for&hellip;of loop with an inline call to Object.values</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const catWeights = {
  ginger: 1,
  gemima: 3,
  geronimo: 30,
};

let sum = 0;
for (const value of Object.values(catWeights)) {
  sum &#43;= value;
}
// now sum = 34
</code>
  </pre>
</section>

<h4 id="objectkeys"><code>Object.keys</code></h4>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" target="_blank" rel="noopener noreferrer"><code>Object.keys</code></a> is similar to <code>.values</code>, except that it returns the keys as an array.</p>


<section class="highlight-wrapper"><span class="caption">Object.keys returns an array containing the object&rsquo;s keys</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const catWeights = {
  ginger: 1,
  gemima: 3,
  geronimo: 30,
};

const catNames = Object.keys(catWeights);

// catNames = [`ginger`, `gemima`, `geronimo`];
</code>
  </pre>
</section>

<h4 id="objectentries"><code>Object.entries</code></h4>
<p>Finally, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/entries" target="_blank" rel="noopener noreferrer"><code>Object.entries</code></a> returns an array of <code>[key, value]</code> pairs.</p>


<section class="highlight-wrapper"><span class="caption">Object.entries  returns an array containing the object [key, value] pairs</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const catWeights = {
  ginger: 1,
  gemima: 3,
  geronimo: 30,
};

const catEntries = Object.entries(catWeights);

// catEntries = [[&#34;ginger&#34;, 1], [&#34;gemima&#34;, 3], [&#34;geronimo&#34;, 30]]
</code>
  </pre>
</section>

<p>Note that <code>catEntries</code> is a <strong>nested array</strong>, that is, an array that contains other arrays within it.</p>
<h3 id="foreach"><code>Array.forEach</code></h3>
<p>Coming back to arrays, another way of looping over the values in an array is to use the built-in method, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach" target="_blank" rel="noopener noreferrer"><code>Array.forEach</code></a>.</p>


<section class="highlight-wrapper"><span class="caption">Using Array.forEach to iterate an array</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const arr = [1, 2, 3, 4];

let sum = 0;
arr.forEach((value) =&gt; {
  sum &#43;= value;
});
// now sum = 10
</code>
  </pre>
</section>

<p>This takes a function as the argument, and we can perform operations on the array elements, one by one, inside that function. In case it&rsquo;s not clear, here is the function:</p>


<section class="highlight-wrapper"><span class="caption">The arrow function we are passing into Array.forEach above</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
(value) =&gt; {
  sum &#43;= value;
});
</code>
  </pre>
</section>

<p>We can use <code>Object.values</code> with <code>Array.forEach</code> to loop over an object&rsquo;s values, just as we did with for&hellip;of:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const catWeights = {
  ginger: 1,
  gemima: 3,
  geronimo: 30,
};

let sum = 0;
Object.values(catWeights).forEach((weight) =&gt; {
  sum &#43;= weight;
})
// now sum = 34
</code>
  </pre>
</section>

<p>There are several related array methods that can be used for iterating over an array&rsquo;s values:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noopener noreferrer"><code>Array.map</code></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="noopener noreferrer"><code>Array.filter</code></a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" target="_blank" rel="noopener noreferrer"><code>Array.reduce</code></a></li>
</ul>
<p>Appropriate use of these functions can result in beautiful, concise code. In this book, we are more interested in clarity and simplicity, so we&rsquo;ll avoid using them. We&rsquo;ll even avoid using <code>Array.forEach</code> and stick exclusively with for loops and for&hellip;of loops.</p>
<h2 id="callback-functions"><a href="https://developer.mozilla.org/en-US/docs/Glossary/Callback_function" target="_blank" rel="noopener noreferrer">Callback Functions</a></h2>
<p>The function we passed into the <code>arr.forEach</code> method above has a special name: it&rsquo;s called a <strong>callback function</strong>, meaning it gets passed into another function as an argument:</p>


<section class="highlight-wrapper"><span class="caption">Array.forEach takes a callback function as the argument</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const arr = [1, 2, 3, 4];

let sum = 0;
arr.forEach((value) =&gt; {
  sum &#43;= value;
});
// now sum = 10
</code>
  </pre>
</section>

<p>Let&rsquo;s rewrite our <code>forEach</code> loop to get a better look at this callback function:</p>


<section class="highlight-wrapper"><span class="caption">Extracting the callback function</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const arr = [1, 2, 3, 4];

let sum = 0;

// The callback function
const total = (value) =&gt; {
  sum &#43;= value;
};

arr.forEach(total);
</code>
  </pre>
</section>

<p>Now you can see that we&rsquo;re passing in the function called <code>total</code> as an argument to <code>Array.forEach()</code>. There&rsquo;s nothing special about the <code>total</code> function. It&rsquo;s a  normal JavaScript arr function. It&rsquo;s only when used in this manner that we refer to it as a callback function.</p>
<p>We will use callback functions a lot while writing JavaScript code. We&rsquo;ll cover them in more detail in <a href="/book/appendix/asynchronous-javascript/">A.5: Asynchronous JavaScript</a>.</p>
<h2 id="recursion">Recursion</h2>
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions#Recursion" target="_blank" rel="noopener noreferrer"><strong>recursive function</strong></a> is simply a function that calls itself.</p>
<p>Here&rsquo;s a function that prints the string <code>'Hello'</code> to the browser&rsquo;s console one hundred times.</p>


<section class="highlight-wrapper"><span class="caption">Using recursion to print &lsquo;hello&rsquo; repeatedly</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let count = 0;

const printHello = () =&gt; {
  console.log(&#39;Hello&#39;, count);

  count&#43;&#43;;

  // recursion simply means that a function calls itself
  if (count &lt; 100) printHello();
};
</code>
  </pre>
</section>

<p>Whenever you write recursive functions, it&rsquo;s important to include a final case to end the recursion. Here, that&rsquo;s <code>if (count &lt; 100)</code>.</p>
<p>If we leave that out, we&rsquo;ll end up with a function that keeps on printing hello  until the JavaScript engine eventually kills it with an error message.</p>


<section class="highlight-wrapper"><span class="caption">A recursive function without a final case will cause an error</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
let count = 0;

const printHello = () =&gt; {
  console.log(&#39;Hello&#39;, count);

  count&#43;&#43;;

  // recursion simply means that a function calls itself
  printHello();
};

printHello();
</code>
  </pre>
</section>

<p>We&rsquo;ll use recursion to set up an animation loop in <a href="/book/first-steps/animation-loop/">1.7: The Animation Loop</a>.</p>
<h2 id="classes-and-the-new-keyword">Classes and the <code>new</code> Keyword</h2>
<p><strong>We can create <em>instances</em> of a <em>class</em> of objects using the <code>new</code> keyword.</strong></p>
<p>What does that mean?</p>
<p>Think of a particular cat called Geronimo. Geronimo is a big cat. You might even say he&rsquo;s a chonker. He&rsquo;s not much of a guy for friendship but he sure does like to sit on the windowsill and catch the evening sun.</p>
<p>Now, imagine another cat called Gemima. She&rsquo;s small, friendly, tabby. She loves to meow and when she&rsquo;s not chasing a toy she is probably purring on your lap.</p>
<p>Now think of the realm of all possible cats. Big cats, small cats, tabby, short-hair, Persian, some are friendly, some aloof, some purr, some meow a lot, while others like to be silent.</p>
<p>All of these cats belong to that abstract class of things we call <em>Cat</em>.</p>
<p>Geronimo and Gemima are <em>instances</em> of the Cat class.</p>
<p>Similarly, we can create a Cat <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes" target="_blank" rel="noopener noreferrer"><strong><code>Class</code></strong></a> in JavaScript.</p>


<section class="highlight-wrapper"><span class="caption">A simple Cat class</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Cat {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }
}
</code>
  </pre>
</section>

<p>This simple example class stores only two pieces of data about the cats we create: their <code>name</code> and their <code>age</code>.</p>
<p>To create an instance of the <code>Cat</code> class, we&rsquo;ll use the <code>new</code> keyword:</p>


<section class="highlight-wrapper"><span class="caption">Creating some instances of the Cat class</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const geronimo = new Cat(&#39;Geronimo&#39;, 122);

console.log(geronimo);
// Cat {name:&#34;Geronimo&#34; age:122}

const gemima = new Cat(&#39;Gemima&#39;, 1.5);

console.log(gemima);
// Cat {name:&#34;Gemima&#34; age:1.5}
</code>
  </pre>
</section>

<p>If you leave out the <code>new</code> keyword when creating a <code>Cat</code> instance, you&rsquo;ll get an error message:</p>


<section class="highlight-wrapper"><span class="caption">The new keyword is required when creating class instances</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const moggle = Cat(&#39;Moggle&#39;, 3);

// =&gt; Uncaught TypeError:
// Class constructor Cat cannot be invoked without &#39;new
</code>
  </pre>
</section>

<h3 id="class-names-are-capitalized">Class Names are Capitalized</h3>
<p>By convention, class names always start with a capital letter, while class instance names (and most other JavaScript variables) start with a small letter. This is not a rule, however, we will treat it as such and always start class names with a capital letter.</p>
<h3 id="classes-are-objects">Classes are Objects</h3>
<p>Remember, everything that&rsquo;s not a primitive data type in JavaScript is an <a href="#objects">Object</a>, and that includes classes.</p>
<h3 id="prototypes-and-constructor-functions">Prototypes and Constructor Functions</h3>
<p>Classes are a relatively new addition to JavaScript. When using old-school JavaScript the equivalent to classes is constructor functions.</p>
<p>We won&rsquo;t get into this further here, but you will often encounter constructor functions when dealing with old JavaScript code. The <a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/Object_prototypes" target="_blank" rel="noopener noreferrer">Object prototypes</a> guide on MDN is a good starting point if you want to explore the history and technical details of this part of the language</p>
<p>Constructor functions and classes are equivalent (everything you can write one way, you can also write the other), so we&rsquo;ll use the new, cleaner Class syntax in this book.</p>
<p>Note that our class example above has a <code>constructor</code> method inside it, which we&rsquo;ll look at in a moment, but that&rsquo;s not the same thing as a constructor function.</p>
<h3 id="instance-variables">Instance Variables</h3>
<p><code>this.name</code> and <code>this.age</code> are called <a href="https://en.wikipedia.org/wiki/Instance_variable" target="_blank" rel="noopener noreferrer"><strong>instance variables</strong></a> and we can access them using <a href="#dot-notation">dot notation or bracket notation</a>. We will refer to them as <code>Cat.name</code> and <code>Cat.age</code>.</p>
<p>Once we have created an instance of the class, we can access them using the instance name (for example, <code>geronimo.name</code>).</p>


<section class="highlight-wrapper"><span class="caption">Accessing class instance variables</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = geronimo.age; // now x holds the number 122

const y = geronimo[&#39;name&#39;]; // now y holds the string &#39;Geronimo&#39;
</code>
  </pre>
</section>

<p>Within the class, we can access them using <code>this.name</code> and <code>this.age</code>.</p>
<h3 id="class-methods">Class Methods</h3>
<p>When we create a function inside a class, we refer to it as a method. Let&rsquo;s add a <code>meow</code> method to the <code>Cat</code> class.</p>


<section class="highlight-wrapper"><span class="caption">Create the Cat.meow method</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Cat {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }

  meow() {
    console.log(&#39;meow-meow&#39;);
  }
}
</code>
  </pre>
</section>

<p>Once we have created a <code>Cat</code> instance, we can access the method on the instance using dot notation or bracket notation:</p>


<section class="highlight-wrapper"><span class="caption">The cat&rsquo;s meow</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const geronimo = new Cat(&#39;Geronimo&#39;, 122);

geronimo.meow();
// OR
geronimo[&#39;meow&#39;]();
</code>
  </pre>
</section>

<h3 id="the-constructor-method">The <code>constructor</code> Method</h3>
<p>The <code>Cat</code> class we created above has a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/constructor" target="_blank" rel="noopener noreferrer"><code>constructor</code></a> inside it. This is a special method that runs automatically when we create a new class instance. Here, that means when we create a <code>new Cat</code>.</p>
<p>Just to make sure we&rsquo;re totally clear, we&rsquo;re not talking about the old-school <strong>constructor functions</strong> we mentioned above. The <strong>constructor method</strong> is something different.</p>


<section class="highlight-wrapper"><span class="caption">When we create a class instance, the constructor is called automatically</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const geronimo = new Cat(&#39;Geronimo&#39;, 122);
</code>
  </pre>
</section>

<p>We use the constructor method to do the basic setup for a class, for example, setting up instance variables. From here on, we&rsquo;ll refer to the constructor method as simply <strong>constructor</strong>.</p>
<p>The constructor is optional and we can create a class without a constructor if we like:</p>


<section class="highlight-wrapper"><span class="caption">A class without a constructor</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Cat {
  meow() {
    console.log(&#39;meow-meow&#39;);
  }
}
</code>
  </pre>
</section>

<p>If we leave out the constructor then JavaScript <em>implicitly</em> adds one for us, so the above class is equivalent to:</p>


<section class="highlight-wrapper"><span class="caption">If we omit the constructor, an empty one is implicitly created for us</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Cat {
  // no need to type this line, JS does it for you
  constructor() {}

  meow() {
    console.log(&#39;meow-meow&#39;);
  }
}
</code>
  </pre>
</section>

<p>By <em>implicit</em>, we mean that you don&rsquo;t <em>see</em> this code. All the magic happens somewhere out of sight, deep with the browser&rsquo;s JavaScript engine.</p>
<h3 id="returning-values-from-the-constructor">Returning Values from the Constructor</h3>
<p>The <code>return</code> value of the constructor is special because it&rsquo;s also <em>implicit</em>. What this means is that we don&rsquo;t need to type <code>return</code> at the bottom of the constructor. Instead,
JavaScript implicitly adds the line <code>return this</code> at the bottom of the function:</p>


<section class="highlight-wrapper"><span class="caption">The default constructor return is implicit</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Cat {
  constructor(name, age) {
    this.name = name;
    this.age = age;

    // JavaScript adds this line implicitly for us
    return this;
  }
}
</code>
  </pre>
</section>

<p><code>this</code> refers to the class instance created when we call <code>new Cat</code>. We&rsquo;ll take a deeper look at the <code>this</code> keyword in a few moments.</p>
<h3 id="custom-return-values-in-class-constructors">Custom Return Values in Class Constructors</h3>
<p>Sometimes, you may find it useful is to return something other than the class instance from a class. In that case, you can add a custom <code>return</code> statement to the end of the constructor.</p>
<p>Here&rsquo;s a contrived example, where we return an object with name and age properties from the cat class:</p>


<section class="highlight-wrapper"><span class="caption">A custom constructor return</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Cat {
  constructor(name, age) {
    return {
      name,
      age
    };
  }

  // Now there&#39;s no way to run this method
  meow() {
    console.log(&#39;meow-meow&#39;);
  }
}
</code>
  </pre>
</section>

<p>Now, <code>new Cat</code> will no longer return a class, but instead a simple object:</p>


<section class="highlight-wrapper"><span class="caption">Our custom constructor returns gives us a simple Object rather than a class instance</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const fred = new Cat(&#39;Frederico&#39;, 5);

console.log(fred);
// {name: &#34;Frederico&#34;, age: 5}
</code>
  </pre>
</section>

<p>However, doing this means we can no longer access the <code>Cat.meow</code> method.</p>
<h3 id="static-class-methods">Static Class Methods</h3>
<p>Sometimes, you may want to use a class method without going to the trouble of creating a class instance. In that case, you can declare the method as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/static" target="_blank" rel="noopener noreferrer"><code>static</code></a>.</p>


<section class="highlight-wrapper"><span class="caption">A class that simply meows</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Meower {
  static meow() {
    console.log(&#39;meow-meow&#39;);
  }
}
</code>
  </pre>
</section>

<p>Now, to call the static meow method, we access it using <code>Meower.meow</code>.</p>


<section class="highlight-wrapper"><span class="caption">Static methods can be accessed directly on the class</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
Meower.meow();
// =&gt; &#39;meow-meow
</code>
  </pre>
</section>

<p>However, we can no longer access this method on a class instance.</p>


<section class="highlight-wrapper"><span class="caption">Static methods cannot be accessed on a class instance</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const moggy = new Meower();

moggy.meow();
// Uncaught TypeError: moggy.meow is not a function
</code>
  </pre>
</section>

<h3 id="chaining-methods">Chaining Methods</h3>
<p>Often, you&rsquo;ll need to create a class and then run several of it&rsquo;s methods to set it up. For example, here&rsquo;s a frog class with some methods to set up it&rsquo;s stats:</p>


<section class="highlight-wrapper"><span class="caption">A simple frog class</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

class Froggy {
  constructor() {
    this.type = &#39;common&#39;;
    this.color = &#39;green&#39;;
    this.jumpHeight = 5;
    this.ribbitDB = 40;
  }

  setType(type) {
    this.type = type;
  }

  setColor(color) {
    this.color = color;
  }

  setRibbitStrength(strength) {
    this.ribbitDB = strength;
  }

  setJumpHeight(height) {
    this.jumpHeight = height;
  }
}

</code>
  </pre>
</section>

<p>The stats are given default values in the constructor, and the methods allow us to customise them. Of course, for a simple class like this we could pass all the custom values into the constructor, but in real code that&rsquo;s not always possible or desireable. Now let&rsquo;s see what we have to do to customise all of the frog&rsquo;s stats:</p>


<section class="highlight-wrapper"><span class="caption">Customising our frog</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const froggy = new Froggy();

froggy.setType(&#39;tomato&#39;);
froggy.setColor(&#39;red&#39;);
froggy.setRibbitStrength(&#39;10&#39;);
froggy.setJumpHeight(&#39;10&#39;);

</code>
  </pre>
</section>

<p>We can improve this slightly by using <strong>method chaining</strong>. To do this, we will return <code>this</code> at the end of each method. Remember that the <code>constructor</code> implicity returns <code>this</code> already.</p>


<section class="highlight-wrapper"><span class="caption">To use method chaining, each method must return &lsquo;this&rsquo;</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="11,16,21,26"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

class Froggy {
  constructor() {
    this.type = &#39;common&#39;;
    this.color = &#39;green&#39;;
    this.jumpHeight = 5;
    this.ribbitDB = 40;
  }

  setType(type) {
    this.type = type;
    return this;
  }

  setColor(color) {
    this.color = color;
    return this;
  }

  setRibbitStrength(strength) {
    this.ribbitDB = strength;
    return this;
  }

  setJumpHeight(height) {
    this.jumpHeight = height;
    return this;
  }
}

</code>
  </pre>
</section>

<p>Now we can set up our froggy using method chaining</p>


<section class="highlight-wrapper"><span class="caption">Customising our frog using method chaining</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">

const froggy = new Froggy()
	.setType(&#39;tomato&#39;)
	.setColor(&#39;red&#39;)
	.setRibbitStrength(&#39;10&#39;)
  .setJumpHeight(&#39;10&#39;);

</code>
  </pre>
</section>

<h3 id="class-inheritance-and-the-extends-keyword">Class Inheritance and the <code>extends</code> Keyword</h3>
<p>A powerful feature of classes is that we can take an existing class and extend it to create a new, similar class with extra or changed functionality, using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/extends" target="_blank" rel="noopener noreferrer"><strong><code>extends</code> keyword</strong></a>.</p>
<p>When we do this, we call the original class the <strong>base class</strong>, <strong>superclass</strong>, or <strong>parent class</strong>, and we call the new class the <strong>derived class</strong>, <strong>subclass</strong>, or <strong>child class</strong>.</p>
<p>The classic examples used to demonstrate inheritance is to start with an <code>Animal</code> base class, and since this chapter is already full of cats, let&rsquo;s continue with that tradition.</p>
<p>Here&rsquo;s our <code>Animal</code> base class:</p>


<section class="highlight-wrapper"><span class="caption">An Animal class</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Animal {
  constructor(age) {
    this.age = age;
  }

  growOlder() {
    this.age&#43;&#43;;
  }

  reproduce() {
    // implementation of this function is left to your imagination
  }
}
</code>
  </pre>
</section>

<p>We&rsquo;ve decided that all animals will have a single instance variable called <code>age</code>, and two basic abilities: they can grow older, and they can reproduce.</p>
<p>Next, we&rsquo;ll use the <code>extends</code> keyword to create a child class called <code>Cat</code>:</p>


<section class="highlight-wrapper"><span class="caption">Extending the Animal class to create a Cat class</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Cat extends Animal {
  constructor(name, age) {
    super(age);

    this.name = name;
  }

  meow() {
    console.log(&#39;meow-meow&#39;);
  }
}
</code>
  </pre>
</section>

<p><code>Cat</code> can do anything that <code>Animal</code> can do, and they also have a <code>name</code> and can <code>meow</code>.</p>
<h4 id="the-super-keyword">The <code>super</code> Keyword</h4>
<p>Notice the <code>super</code> function. This is optional and means that both <code>Animal.constructor</code> <em>and</em> <code>Cat.constructor</code> will run when we create a <code>new Cat(...)</code>:</p>


<section class="highlight-wrapper"><span class="caption">super() calls the parent&rsquo;s constructor</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const geronimo = new Cat(&#39;Geronimo&#39;, 122);

console.log(geronimo.name); // Geronimo

// The .age instance variable was created in the Animal class constructor
// This was called because we added super(age).
console.log(geronimo.age); // 122
</code>
  </pre>
</section>

<p>Another option here is to completely leave out the constructor in the child class, in which case the parent&rsquo;s constructor will automatically be used.</p>
<p>This gives us three options for the constructor in a child class:</p>


<section class="highlight-wrapper"><span class="caption">Options for child class constructors</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
// Option 1: Animal.constructor will run
// then Cat.constructor will run
class Cat extends Animal {
  constructor(name, age) {
    super(age);

    this.name = name;
  }
}

// Option 2: Only Cat.constructor will run
class Cat extends Animal {
  constructor(name, age) {
    this.name = name;
  }
}

// Option 3: Only Animal.constructor will run
class Cat extends Animal {
  // no constructor method here
}
</code>
  </pre>
</section>

<h4 id="inherited-methods">Inherited Methods</h4>
<p>Even though we didn&rsquo;t define the <code>growOlder</code> and <code>reproduce</code> methods on the <code>Cat</code> class, they were inherited from the <code>Animal</code> base class. That means <code>Cat</code> has a total of three methods. <code>growOlder</code>, <code>reproduce</code>, and <code>meow</code>:</p>


<section class="highlight-wrapper"><span class="caption">We can use any method from the base and any method on the child class from a Cat instance</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const geronimo = new Cat(&#39;Geronimo&#39;, 122);

geronimo.meow();
geronimo.growOlder();
geronimo.reproduce();
</code>
  </pre>
</section>

<p>We can also <em>overwrite</em> methods in the child class. Doing so is simple: we just create a new method with the same name in the child class.</p>
<h4 id="use-inheritance-sparingly">Use Inheritance Sparingly</h4>
<p>Inheritance seems like an amazing, powerful tool, and indeed, it is, when used well. On the other hand, it&rsquo;s easy to misuse and can lead to huge, ugly, and confusing towers of inherited classes.</p>
<p>We won&rsquo;t get into this further here since this is a chapter on JavaScript syntax, not software patterns or architecture. All we&rsquo;ll say for now is, if you are creating multiple levels of inheritance like this:</p>


<section class="highlight-wrapper"><span class="caption">An inheritance chain</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class LivingEntity{}

class Animal extends LivingEntity{}

class Mammal extends Animal{}

class Feline extends Mammal{}

class Cat extends Feline{}
</code>
  </pre>
</section>

<p>&hellip; there&rsquo;s probably a better way to write your code (composition, perhaps?).</p>
<p>Some take this to extremes and try to avoid using inheritance at all. In this book, we&rsquo;ll take a pragmatic approach and use it sparingly.</p>
<p>Another thing to consider is that three.js uses inheritance internally, and it will often be easier for us to follow the patterns of the library we are using rather than trying to work against it.</p>
<h2 id="scope-and-closures">Scope and Closures</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Glossary/Scope" target="_blank" rel="noopener noreferrer">Scope</a> is an important concept in JavaScript, but often confusing for beginners (and experts!).</p>
<p>Simply put, the <strong>scope of a variable</strong> means &ldquo;where can I access this data from?&rdquo;. If data is not in the current scope, then we cannot access it. Here, <em>data</em> can refer to a variable, object, function, class, and so on.</p>

<p>There are four types of scope:</p>
<ol>
<li><strong>Global scope</strong></li>
<li><strong>Module scope (the current file)</strong></li>
<li><strong>Block scope</strong></li>
<li><strong>Function scope (closures)</strong></li>
</ol>
<p>Module scope and block scope are new in ES6. In old-school JavaScript, there was only global and function scope.</p>
<p>Scopes fit inside each other like Russian dolls. When we are in a certain scope, we can access anything from any of the scopes higher up. At the top level is global scope, which we refer to as the <code>Window</code> object in the browser (Node uses different terminology). The next level down is module scope. When writing modular JavaScript, each module (file) has it&rsquo;s own module scope. Finally, block and function scopes can be nested inside each other to any depth.</p>
<p>When we are in module scope, we can access anything from the module scope <em>and</em> global scope. When we are inside a block or function within the module, we can access anything from function/block scope, <em>and</em> module scope, <em>and</em> global scope (we can <em>always</em> access global scope).</p>
<p>However, when we are in global scope, we can&rsquo;t access module scope, and when we are in module scope, we can&rsquo;t access the scope of any functions contained within the module. We&rsquo;ll explain all of this again in the section on <strong>lexical scope</strong> in a few moments.</p>
<h3 id="execution-context">Execution Context</h3>
<p>Closely related to scope is the <strong>execution context</strong> or simply <strong>context</strong>. Context, in simple terms, refers to the value of the <code>this</code> keyword, while scope is related to variable resolution and access. We&rsquo;ll explore <code>this</code> in detail below.</p>
<p>Unlike scope, the execution context <em>can</em> change at run time. For example, a function may be called at multiple points in your code and each time will have a different execution context and hence a different value of <code>this</code>, while the scope will be the same each time. We&rsquo;ll examine <a href="/book/appendix/javascript-reference/#execution-context-and-the-this-keyword">execution context and <code>this</code></a> in more detail below.</p>
<h3 id="global-scope">Global Scope</h3>
<p>At the top level is the global scope. Data in global scope is accessible from anywhere in your code, within every module, class, function, and object. Different JavaScript environments such as browsers and Node.js treat global scope slightly differently.</p>
<p>In the browser, global scope is a top-level object called <code>window</code>. You can add data to the global scope using <code>window.yourVariableName = ...</code>:</p>


<section class="highlight-wrapper"><span class="caption">The browser&rsquo;s global scope</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
window.myInfo = {
  name: &#39;Lewy&#39;,
};
</code>
  </pre>
</section>

<p>Now we can access <code>window.myInfo</code> from anywhere in any JavaScript file that is part of our application.</p>
<p>We&rsquo;ll explore global scope further in <a href="/book/appendix/dom-api-reference/#global-object">A.3: The Document Object Model and DOM API</a>.</p>
<h3 id="module-scope">Module Scope</h3>
<p>When writing <a href="#javascript-modules-and-the-entry-point">modular JavaScript</a>, as we&rsquo;ll be doing throughout this book, every file is a module, and every module creates a scope. For example, here is a module called <strong><em>main.js</em></strong> containing some code. The entire file/module is a scope. Any code we add within this module is created in module scope.</p>


<section class="highlight-wrapper"><span class="caption">The main.js module</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const name = &#39;Lewy&#39;;

class Printer {
  static printName() {
    console.log(name);
  }
}

Printer.printName(); // =&gt; &#39;Lewy&#39;
</code>
  </pre>
</section>

<p>We&rsquo;ll explore module scope further in the <a href="/book/appendix/javascript-modules/">A.4: JavaScript Modules</a>.</p>
<h3 id="block-scope">Block Scope</h3>
<p>Blocks (<a href="#block-statements">defined using <code>{}</code></a>) create a scope.  Here, we define a variable name within a block, and later when we attempt to log it to the console from outside, it&rsquo;s not available.</p>


<section class="highlight-wrapper"><span class="caption">Block scope</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
{
  // within the block scope
  const name = &#39;Lewy&#39;;
  console.log(`Printing name inside block scope: ${name}`); // =&gt; &#39;Lewy&#39;
}

// outside the block scope
console.log(`Printing name outside block scope: ${name}`); // =&gt; undefined
</code>
  </pre>
</section>

<p>As we mentioned earlier, it&rsquo;s not that common to see a bare block statement like this. More often you will encounter them as part of an if&hellip;else statement, for loop, and so on.</p>


<section class="highlight-wrapper"><span class="caption">Blocks are usually paired with things like loops or if&hellip;else statements</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
for(let i = 0; i &lt; 3; i&#43;&#43;){
  const name = &#39;Lewy&#39;;
  console.log(`Printing name inside block scope: ${name}`); // =&gt; &#39;Lewy&#39; &#39;Lewy&#39; &#39;Lewy&#39;
}

console.log(`Printing name outside block scope: ${name}`); // =&gt; undefined
</code>
  </pre>
</section>

<h3 id="closures-function-scope">Closures (Function Scope)</h3>
<p>Function scope is so important that it gets a special name: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures" target="_blank" rel="noopener noreferrer"><strong>closures</strong></a>. Closures were even more important in old-school JavaScript before we had module scope and block scope. Both <a href="#arrow-functions">arrow functions</a> and normal functions create a closure, although, as we&rsquo;ll see below, these two types of function create different <strong>execution contexts</strong>.</p>


<section class="highlight-wrapper"><span class="caption">The local scope of a function is called a closure</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function createName() {
  const name = &#39;Harry&#39;;
  console.log(`Printing name inside closure: ${name}`); // =&gt; &#39;Harry&#39;
}

console.log(`Printing name outside closure: ${name}`); // =&gt; undefined
</code>
  </pre>
</section>

<h4 id="var-let-const-and-scope"><code>var</code>, <code>let</code>, <code>const</code>, and Scope</h4>
<p>Now we can finally explain the difference between <a href="book/appendix/javascript-reference/#variables-let-const-var"><code>var</code> and the new <code>let</code> and <code>const</code></a>. In short, <code>var</code> is function scoped while <code>let</code> and <code>const</code> are block-scoped. Care must be taken when using <code>var</code> with block scope. We will never use <code>var</code> in this book so we won&rsquo;t get into this here, but if you are interested, refer to the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let" target="_blank" rel="noopener noreferrer">MDN <code>let</code> reference</a> for more details.</p>
<h3 id="lexical-scope">Lexical Scope</h3>
<p>Scope in JavaScript, like most modern programming languages, is <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures#Lexical_scoping" target="_blank" rel="noopener noreferrer"><strong>lexical</strong></a>. This means scopes are arranged in a hierarchy with the global scope at the top and the current local scope at the bottom.</p>
<p>If we want to know what scope a piece of data resides in, and hence where in our code we can access it from, we simply need to look at the active line in our text editor. The state of the program when running has no bearing on the scope of data, in contrast to languages with dynamic scope like Lisp.</p>
<p>At each step, while moving through the scope hierarchy, we call the current scope the <strong>child scope</strong> and the scope directly above the <strong>parent scope</strong>. We might also refer to these as <strong>outer scope</strong> and <strong>inner scope</strong> (outer scope refers to all levels of scope above the current scope).</p>
<p>In the following examples, the highlighted line refers to the current scope.</p>
<p>This variable is at the top level in the module, hence it&rsquo;s in module scope. The scope above us in the hierarchy is the global scope.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em> module. Parent scope: global, local scope: module</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="1"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = 5;
</code>
  </pre>
</section>

<p>To access the global scope while working with JavaScript modules, we use the global <code>window</code> object. Here, we add the variable <code>y</code> to the global scope.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em> module. Parent scope: none, local scope: global</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="1"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
window.y = &#39;hello&#39;;
const x = 5;
</code>
  </pre>
</section>

<p>Next, we&rsquo;ll create a block inside the module.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em> module. Parent scope: module, local scope: block</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="5"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
window.y = &#39;hello&#39;;
const x = 5;

{
  const z = {};
}
</code>
  </pre>
</section>

<p>Again, you&rsquo;ll more commonly encounter block scope when working with loops, if&hellip;else statement, and other such constructs.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em> module. Parent scope: module, local scope: block</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="5"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
window.y = &#39;hello&#39;;
const x = 5;

if(window.y === &#39;hello&#39;){
  console.log(window.y); // =&gt; &#39;hello
}
</code>
  </pre>
</section>

<p>Function scope works similarly to block scope.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em> module. Parent scope: module, local scope: function</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="9"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
window.y = &#39;hello&#39;;
const x = 5;

if(window.y === &#39;hello&#39;){
  console.log(window.y); // =&gt; &#39;hello
}

function printHey() {
  console.log(&#39;hey&#39;);
}

printHey(); // =&gt; &#39;hello
</code>
  </pre>
</section>

<p>These are all simple examples, but in a real body of code you will end up with much deeper nesting of scope. Here are a couple of examples. See if you can figure out the parent and local scope in each case.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em> module. Parent scope: ?, local scope: ?</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="5"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const x = 5;

function scopeTest() {
  if(x === 5) {
    console.log(x); // =&gt; ?
  }
}

scopeTest();
</code>
  </pre>
</section>



<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em> module. Parent scope: ?, local scope: ?</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="2"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function scopeTest() {
  const x = 5;
  if(x === 5) {
    console.log(x); // =&gt; ?
  }
}

scopeTest();
</code>
  </pre>
</section>



<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em> module. Parent scope: ?, local scope: ?</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="5"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function printHey() {
  console.log(&#39;hey&#39;);
}

printHey(); // =&gt; &#39;hello
</code>
  </pre>
</section>

<h3 id="hierarchy-of-data-access">Hierarchy of Data Access</h3>
<p>As we mentioned above, the scopes are arranged in a hierarchy with global scope at the top and the current scope at the bottom. We can access data from a parent scope inside a child scope, but we cannot access data from a child scope in the parent scope.</p>
<p>Here, that means we can access the <code>name</code> variable, declared in the parent scope (module scope), from within the child scope (block scope).</p>


<section class="highlight-wrapper"><span class="caption">Data from a parent scope is accessible in the child scope</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="6"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
// module scope (outer/parent scope)
const name = &#39;Peter&#39;;

{
  // block scope (inner/child scope)
  console.log(name); // =&gt; Peter
}
</code>
  </pre>
</section>

<p>However, if we reverse that, we cannot access the variable created in the child scope from the outer scope.</p>


<section class="highlight-wrapper"><span class="caption">Data from a child scope cannot be accessed from the parent scope</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="7"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
{
  // block scope (inner/child scope)
  const name = &#39;Peter&#39;;
}

// module scope (outer/parent scope)
console.log(name); // =&gt; undefined
</code>
  </pre>
</section>

<p>So far so good. But what if we create the variable <code>name</code> in two different scopes?
In this case, <strong>the inner/child scope has precedence over the outer scope</strong>. However, once we are back in the parent scope, the variable will have it&rsquo;s original value again.</p>


<section class="highlight-wrapper"><span class="caption">What happens when a variable with the same name is created in the inner and outer scope?</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line="6,10"
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const name = &#39;Peter&#39;;

{
  const name = &#39;Sarah&#39;;
  // block scope (inner/child scope)
  console.log(name); // =&gt; Sarah
}

// module scope (outer/parent scope)
console.log(name); // =&gt; Peter
</code>
  </pre>
</section>

<p>As you can imagine, this can quickly become confusing, so we avoid using the same name in inner and outer scope. If you text editor or IDE has a linter, it should complain when you do this.</p>
<p>There&rsquo;s a lot more to scope than we have covered here, as you will discover while working with JavaScript. However, this should be enough to get you started with the examples in this book.</p>
<h2 id="execution-context-and-the-this-keyword">Execution Context and the <code>this</code> Keyword</h2>
<p>The keyword <code>this</code> in JavaScript refers to the current execution context. Unlike scope, the value of <code>this</code> can change at runtime depending on how the code is executed.</p>
<p>As JavaScript is executing your code, it maintains a special hidden variable called <code>thisBinding</code>. We never see this variable, but we can access it using <code>this</code>. Depending on how the current piece of code is being executed, <code>thisBinding</code> can have many possible values, including <code>undefined</code>.</p>
<p>Deeply understanding how <code>this</code> works in JavaScript will take you some time, and is beyond the scope of this chapter. Instead, we&rsquo;ll take a look at the value of <code>this</code> in some of the common cases we&rsquo;ll encounter through this book.</p>
<h3 id="this-in-global-scope"><code>this</code> in Global Scope</h3>
<p>In global scope, when executing your code in a web browser, <code>this</code> refers to the <code>window</code> object. You can see by opening the browser console and typing <code>this === window</code>.</p>


<section class="highlight-wrapper"><span class="caption">In the browser console (F12)</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
this === window; // =&gt; true
</code>
  </pre>
</section>

<h3 id="this-in-module-scope"><code>this</code> in Module Scope</h3>
<p>When we are at the top level in our <em><strong>main.js</strong></em> module, the value of <code>this</code> is <code>undefined</code>.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
console.log(this); // =&gt; undefined
</code>
  </pre>
</section>

<h3 id="this-and-functions"><code>this</code> and Functions</h3>
<p>The value of <code>this</code> within a function is the most difficult to understand since it depends on what piece of code called the function, and hence the execution context of the current function call. This can change from one call of the function to the next. To make your life simple, use <code>this</code> sparingly in functions that are not class methods.</p>
<p>Also, there are differences between normal and arrow functions so we&rsquo;ll cover the latter separately below. This section refers exclusively to &ldquo;normal&rdquo; functions.</p>
<p>When used in a function executed from a module, <code>this</code> is <code>undefined</code>.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function testThis() {
  console.log(this)
}

testThis(); // undefined
</code>
  </pre>
</section>

<p>However, when we run the same function in global scope (for example, by pasting the following code into the browser console), <code>this</code> refers to the global <code>Window</code> object.</p>


<section class="highlight-wrapper"><span class="caption">Global scope (for example, the browser console)</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
function testThis() {
  console.log(this)
}

testThis(); // Window
</code>
  </pre>
</section>

<p>Next, when we create a function as a property of an object, <code>this</code> binds to the object itself. When we create a function this way we&rsquo;ll refer to it as a <em>method</em>. Here, in the <code>obj.testThis</code> method, <code>this</code> refers to the <code>obj</code> itself.</p>


<section class="highlight-wrapper"><span class="caption">When created as an object property, the value of this in a function is the object itself</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const obj = {
  z: 5,
  testThis: function () {
    console.log(this);
  }
};

obj.testThis(); // {z: 5, testThis: }
</code>
  </pre>
</section>

<h3 id="this-and-classes"><code>this</code> and Classes</h3>
<p>When used inside a class method, <code>this</code> refers to the class instance. We used <code>this</code> in our <a href="#instance-variables"><code>Cat</code> class</a> earlier:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
class Cat {
  constructor(name, age) {
    this.name = name;
    this.age = age;
  }

  printName() {
    console.log(this.name);
  }

  testThis() {
    console.log(this);
  }
}

const tommy = new Cat(&#39;Tommy&#39;, 6);

tommy.printName(); // =&gt; &#39;Tommy&#39;

tommy.testThis(); // =&gt; Cat{name: &#34;Tommy&#34;, age: 6}
</code>
  </pre>
</section>

<p>First, we store the parameters <code>name</code> and <code>age</code> as <strong>instance variables</strong> in the <code>constructor</code> as <code>this.name</code>, <code>this.age</code>. Later, we can access these variables from other class methods such as <code>.printName</code>.</p>
<p>This is similar to the behavior of <code>this</code> in the <code>obj.testThis</code> method we created above and function created inside classes are also referred to as methods.</p>
<h3 id="this-and-arrow-functions"><code>this</code> and Arrow Functions</h3>
<p>Arrow functions treat <code>this</code> differently than normal functions. Specifically, they don&rsquo;t have a <code>this</code> at all. When you access <code>this</code> inside an arrow function, it will be as if the function didn&rsquo;t exist and you were using <code>this</code> from the parent scope. This can be a bit tricky to grasp so let&rsquo;s illustrate it with an example.</p>
<p>Here, we have created an <code>obj</code> object with a variable <code>obj.z</code> and two functions, one normal function, and one arrow function.</p>


<section class="highlight-wrapper"><span class="caption">An object created to test the difference between arrow function and normal function</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const obj = {
  z: 5,

  normalFunction: function () {
    console.log(this);
  },

  arrowFunction: () =&gt; {
    console.log(this);
  },
};
</code>
  </pre>
</section>

<p>We will now test the value of <code>this</code> in each function, first in the browser console and then in <em><strong>main.js</strong></em>.</p>
<p>First, open up the browser console and paste in the above object. Second, type <code>console.log(this)</code>. Since you are in global scope, <code>this === Window</code>.</p>
<p>Next, run <code>obj.normalFunction</code>. As we saw above, within <code>.normalFunction</code>, <code>this</code> refers to the <code>obj</code> itself.</p>
<p>Finally, run <code>obj.arrowFunction</code>. Once again, you&rsquo;ll see that <code>this</code> refers to <code>Window</code>.</p>


<section class="highlight-wrapper"><span class="caption">Testing scope in the browser console</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
console.log(this); // =&gt; Window

obj.normalFunction(); // =&gt; {z: 5, normalFunction: , arrowFunction: }
obj.arrowFunction(); // =&gt; Window
</code>
  </pre>
</section>

<p>What this all means is that running <code>console.log(this)</code> within the global scope and within <code>obj.arrowFunction</code> gives the same result, but within <code>obj.normalFunction</code> gives a different result.</p>
<p>Next, do it all again in <em><strong>main.js</strong></em>. Notice that in the outer scope and the arrow function, <code>this</code> is now undefined.</p>


<section class="highlight-wrapper"><span class="caption"><em><strong>main.js</strong></em></span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
console.log(this); // =&gt; undefined

obj.normalFunction(); // =&gt; {z: 5, normalFunction: , arrowFunction: }
obj.arrowFunction(); // =&gt; undefined
</code>
  </pre>
</section>

<h4 id="other-arrow-function-differences">Other Arrow Function Differences</h4>
<p>If you open up the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener noreferrer">MDN Arrow functions page</a>, you&rsquo;ll see that arrow functions don&rsquo;t have bindings to <code>this</code>, <code>arguments</code>, <code>super</code>, or <code>new.target</code> keywords. However, for our purposes, the only important difference is the lack of binding to <code>this</code>.</p>
<h4 id="use-cases-for-arrow-functions-and-normal-functions">Use Cases for Arrow Functions and Normal Functions</h4>
<p>In general, the difference between arrow functions and normal functions doesn&rsquo;t matter <em>unless you use <code>this</code> in the function</em>. Usually, you should avoid using <code>this</code> in functions, with two common exceptions: class methods, and callback functions. For these cases, remember these rules:</p>
<ul>
<li>Always use normal functions for class methods</li>
<li>Always use arrow functions for <a href="#callback-functions">callback functions</a></li>
</ul>
<p>We will cut short our discussion of context and scope here to prevent this chapter from becoming an entire book. As with scope, you&rsquo;ll develop a better understanding of how <code>this</code> works as you continue to work with JavaScript. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this" target="_blank" rel="noopener noreferrer">The MDN <code>this</code> reference</a> is only one of <a href="https://stackoverflow.com/questions/3127429/how-does-the-this-keyword-work" target="_blank" rel="noopener noreferrer">many great guides on this subject</a>.</p>
<h2 id="spread-operator">The Spread Operator</h2>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" target="_blank" rel="noopener noreferrer"><strong>Spread operator</strong></a> is a quality of life operator available in modern JavaScript. In other words, it doesn&rsquo;t allow us to do anything we couldn&rsquo;t do in old school JavaScript, it just makes our life easier.</p>
<p>Suppose that we have an array of objects:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const objects = [cube, sphere, tetrahedron];
</code>
  </pre>
</section>

<p>Normally, to add them to our scene, we would have to do this:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
scene.add(objects[0], objects[1], objects[2]);
</code>
  </pre>
</section>

<p>The spread operator is three dots: <code>...</code> and allows us to do the above with a more concise syntax - in other words, it <em>spreads out</em> the array:</p>


<section class="highlight-wrapper">
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
scene.add(...objects);
</code>
  </pre>
</section>

<h3 id="combining-objects-with-spread">Combining Objects with Spread</h3>
<p>We can do something similar to combine two objects. A common use case is to overwrote default parameters with our custom parameters:</p>


<section class="highlight-wrapper"><span class="caption">When combining an object with spread, the right side takes precedence</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const defaults = {
  color: &#39;red&#39;,
  size: &#39;large&#39;,
};

const custom = {
  color: &#39;blue&#39;,
};

const final = { ...defaults, ...custom };

console.log(final);
// =&gt; {color: &#34;blue&#34;, size: &#34;large&#34;}
</code>
  </pre>
</section>

<p>We can combine any number of objects using spread, and <strong>the values to the right will take precedence</strong>. This means the default <code>red</code> will get overwritten by the custom <code>blue</code>.</p>
<h2 id="typed-arrays">Typed Arrays</h2>
<p><a href="#arrays">Arrays</a> in JavaScript can be any length and can hold any kind of data, in contrast to some programming languages, where arrays have a set length and a set data type.</p>


<section class="highlight-wrapper"><span class="caption">Arrays in JavaScript are very flexible</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const array = [1, &#39;two&#39;, 0xff0000, &#39;blue&#39;, undefined, null];

array.push({x: 5});
array.push(&#39;&#39;);
</code>
  </pre>
</section>

<p>This makes our lives as developers easy. We don&rsquo;t have to consider how many things will end up in an array when we create it, or what kind of data we&rsquo;ll store there. The downside is that it&rsquo;s harder for the JavaScript engine to optimize. As the array grows in size, the engine must keep allocating memory which can result in memory fragmentation (pieces of the array scattered throughout your RAM), making it slow to access the array data.</p>
<p>In many JavaScript applications you&rsquo;ll deal with arrays that contain at most a few hundred or thousand entries, so that doesn&rsquo;t matter too much. However, as three.js developers, we often face challenges that are less common in JavaScript development. Perhaps the most common of these is the use of arrays that contain millions of pieces of data representing things like positions in 3D space.</p>
<p>In these cases, the JavaScript engine will do it&rsquo;s best to optimize the array based on the kind of data it contains. For example, if the array contains only small numbers and no gaps, it will optimize for this case. However, as soon as we add another type of data or leave a gap in the array, that optimization is thrown out (de-optimization occurs). The other issue, as we just mentioned, is memory fragmentation as huge arrays usually end up split into many small pieces scattered through your computer&rsquo;s memory.</p>
<p>This all sounds very complicated. Why don&rsquo;t we help out the JavaScript engine by telling it ahead of time:</p>
<ol>
<li>Exactly what type of data the array will contain.</li>
<li>Exactly how many pieces of data the array will contain.</li>
</ol>
<p>With these, the JavaScript engine can allocate an exact amount of non-fragmented (contiguous) memory for the array and perform many other optimizations.</p>
<p><strong>This is where <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays" target="_blank" rel="noopener noreferrer">typed arrays</a> come in.</strong></p>
<p>Type arrays are similar to normal JavaScript arrays, but we must specify the type of data they contain, and we must specify their exact length ahead of time.</p>
<p>There are <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays#Typed_array_views" target="_blank" rel="noopener noreferrer">quite a few kinds</a> of typed array. We&rsquo;ll look at two of the ones more commonly used in three.js.</p>
<h3 id="uint8array"><code>Uint8Array</code></h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noopener noreferrer"><code>Uint8Array</code></a> holds <strong>unsigned integer values of 8 bits</strong>, which means each entry in the array can hold a value between 0 and 255 inclusive.</p>
<p>This is in contrast to the <code>Int8Array</code> which can hold <strong>signed integer values of 8 bits</strong>, which means values between $-128$ and $127$ inclusive.</p>
<h3 id="float32array"><code>Float32Array</code></h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array" target="_blank" rel="noopener noreferrer"><code>Float32Array</code></a> stores 32-bit floating-point numbers which means values from $1.2\times10^{-38}$ to $3.4\times10^{38}$ inclusive.</p>
<p><code>Float32Array</code> is the typed array most commonly used in three.js since 32-bit floating-point numbers are used to represent positions in 3D space, so we&rsquo;ll take a look at how to create one here. Everything we cover there applies to all typed arrays.</p>
<p>We can create a new <code>Float32Array</code> from an existing array as long as that array contains valid data. In this case, the length of the typed array is taken from the length of the array.</p>


<section class="highlight-wrapper"><span class="caption">Typed arrays can be created from an existing array</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const arr = [1, 2, 3, 4, 5, 6];

const typedArr = new Float32Array(arr);

console.log(typedArr); // =&gt; Float32Array(6)[1, 2, 3, 4, 5, 6]
</code>
  </pre>
</section>

<p>If you initialize a typed array using invalid data, you&rsquo;ll get entries with <a href="#special-numbers"><code>NaN</code> (Not a Number)</a>.</p>


<section class="highlight-wrapper"><span class="caption">Invalid data will be represented as NaN</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const arr = [1, {}, undefined, 4, 5, &#39;whatwhatwhat&#39;];

const typedArr = new Float32Array(arr);

console.log(typedArr); // =&gt; Float32Array(6)[1, NaN, NaN, 4, 5, NaN]
</code>
  </pre>
</section>

<p>Rather than pass in an existing array, we can specify the length directly, in which case all the values in the typed array will be set to zero:</p>


<section class="highlight-wrapper"><span class="caption">Typed arrays can be initialized with a length which will fill them with zeros</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const typedArr = new Float32Array(6);

console.log(typedArr); // =&gt; Float32Array(6)[0, 0, 0, 0, 0, 0]
</code>
  </pre>
</section>

<p>Later, we can add and access data using the array&rsquo;s indices, just as we do with normal arrays.</p>


<section class="highlight-wrapper"><span class="caption">You can access data in a typed array using the index</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const typedArr = new Float32Array(6);

typedArr[0] = 1;
typedArr[3] = 4;

console.log(typedArr); // =&gt; Float32Array(6)[1, 0, 0, 4, 0, 0]
console.log(typedArr[2]); // =&gt; 0
console.log(typedArr[3]); // =&gt; 4
</code>
  </pre>
</section>

<h3 id="differences-between-typed-arrays-and-normal-arrays">Differences Between Typed Arrays and Normal Arrays</h3>
<p>If you attempt to push new data to the array rather than use the index, you&rsquo;ll get an error.</p>


<section class="highlight-wrapper"><span class="caption">Typed arrays don&rsquo;t have a push method</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const typedArr = new Float32Array(6);

typedArr.push(2);
// =&gt; Uncaught TypeError: t.push is not a function
</code>
  </pre>
</section>

<p>Typed arrays lack some of the <strong>methods</strong> (like <code>.push</code>) that arrays have. To see the difference, check out the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray#Instance_methods" target="_blank" rel="noopener noreferrer">Typed arrays page on MDN</a> and compare it to <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array#Instance_methods" target="_blank" rel="noopener noreferrer">the Array page</a>.</p>
<p>The other important difference is that <strong>you cannot increase or decrease the length of a typed array after creating it</strong>. If you need to change the length, you have to throw away the old one and create a completely new typed array.</p>
<p>However, aside from these differences, typed arrays behave like normal JavaScript arrays. You can access elements by index and using <code>forEach</code> and other methods:</p>


<section class="highlight-wrapper"><span class="caption">Typed arrays are similar to normal arrays</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const typedArr = new Float32Array([1, 1, 1, 1, 1, 1]);

typedArr[2] = 5; // Float32Array(6) [1, 1, 5, 1, 1, 1];

const x = typedArr[3]; // x = 1

let sum = 0;

typedArr.forEach((value) =&gt; {
  sum &#43;= value;
});

// sum = 10
</code>
  </pre>
</section>

<p>If you try to set or access an index greater than the length of a typed array, nothing will happen. This is in contrast to normal arrays where the length of the array will simply be increased.</p>


<section class="highlight-wrapper"><span class="caption">Attempts to access out of bounds data are ignored</span>
  
  <pre
    style="background-color: #202020;"
    class="line-numbers hide-line-numbers"
    data-start="1"
    data-line=""
    data-line-offset="1"
    >
    <code class="highlight language-js match-braces">
const typedArr = new Float32Array(5);

typedArr[23] = 3;

console.log(typedArr); // Float32Array(6) [1, 1, 5, 1, 1, 1]

const x = typedArr[155]; // x = undefined
</code>
  </pre>
</section>

<h2 id="the-math-object">The Math Object</h2>
<p>JavaScript comes with lots of built-in mathematical helper methods and constants, all of which are stored in the global <code>Math</code> object.</p>
<p>We&rsquo;ll find many of them useful, for example, <code>Math.PI,</code> <code>Math.sin</code>, <code>Math.cos</code>, <code>Math.tan</code>, <code>Math.abs</code>, <code>Math.abs</code>, <code>Math.sqrt</code>, and <code>Math.random</code>. There&rsquo;s a complete reference on the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math" target="_blank" rel="noopener noreferrer">MDN Math Object page</a>.</p>
<p>The <code>Math</code> object is built-in to JavaScript, and there are many other built-in objects, for example, <code>TypedArrays</code>, <code>Maps</code>, <code>Sets</code>, and so on. These are all available in any JavaScript environment such as the browser or Node.js.</p>
<p>However, a lot of the built-in functionality we&rsquo;ll encounter when using JavaScript comes from the web browser and is unavailable in other environments. We can access this functionality using something called the DOM API. For example, <a href="#global-scope">the global <code>Window</code> object</a> that we&rsquo;ve encountered several times throughout this chapter is part of the DOM API, provided by the browser.</p>
<p>The DOM API allows us to interact with an HTML based web page using JavaScript, and we&rsquo;ll explore the parts of it that we&rsquo;ll be using in the next chapter.</p>

            <div class="bottom-pagination">





<a href="/book/appendix/html-and-css-reference/" title="HTML and CSS Used in This Book" class="control-elem previous"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"/></svg></a><a href="/book/appendix/dom-api-reference/" class="control-elem next" title="The Document Object Model and DOM API"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg></a></div>
          </div>
        </div>
      </main><div id="ide-wrapper" class="panel animate disabled hide">
  <nav id="ide-controls-top" class="control-bar fuzzy-background">
    <input
      type="checkbox"
      id="toggle-complete"
      class="ide-toggle simple-toggle"
      title="Show completed code (your changes will be saved)"
      disabled="true"
    />
    <input
      type="checkbox"
      id="toggle-filetree"
      class="hidden-input ide-toggle"
    />
    <label
      for="toggle-filetree"
      class="control-elem"
      title="Toggle Filetree"
    >
      <span class="off-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"/></svg></span>
      <span class="on-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M572.694 292.093L500.27 416.248A63.997 63.997 0 0 1 444.989 448H45.025c-18.523 0-30.064-20.093-20.731-36.093l72.424-124.155A64 64 0 0 1 152 256h399.964c18.523 0 30.064 20.093 20.73 36.093zM152 224h328v-48c0-26.51-21.49-48-48-48H272l-64-64H48C21.49 64 0 85.49 0 112v278.046l69.077-118.418C86.214 242.25 117.989 224 152 224z"/></svg></span>
    </label>
    <button
      type="button"
      id="reset-active-file"
      class="control-elem"
      title="Reset Current File"
      disabled
    ><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"/></svg></button>
    <button
      type="button"
      id="reset-all-files"
      class="control-elem"
      title="Reset All Changes"
      disabled
    ><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M11.5 280.6l192 160c20.6 17.2 52.5 2.8 52.5-24.6V96c0-27.4-31.9-41.8-52.5-24.6l-192 160c-15.3 12.8-15.3 36.4 0 49.2zm256 0l192 160c20.6 17.2 52.5 2.8 52.5-24.6V96c0-27.4-31.9-41.8-52.5-24.6l-192 160c-15.3 12.8-15.3 36.4 0 49.2z"/></svg></button>
    <input
      type="checkbox"
      id="toggle-preview"
      class="hidden-input ide-toggle"
    />
    <label
      for="toggle-preview"
      class="control-elem"
      title="Toggle Preview"
    >
      <span class="on-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M624 416H381.54c-.74 19.81-14.71 32-32.74 32H288c-18.69 0-33.02-17.47-32.77-32H16c-8.8 0-16 7.2-16 16v16c0 35.2 28.8 64 64 64h512c35.2 0 64-28.8 64-64v-16c0-8.8-7.2-16-16-16zM576 48c0-26.4-21.6-48-48-48H112C85.6 0 64 21.6 64 48v336h512V48zm-64 272H128V64h384v256z"/></svg></span>
      <span class="off-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm0 394c0 3.3-2.7 6-6 6H54c-3.3 0-6-2.7-6-6V192h416v234z"/></svg></span>
    </label>
    <button
      type="button"
      id="new-window-preview"
      class="control-elem hide"
      title="Open Preview in New Window"
    ><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M432,320H400a16,16,0,0,0-16,16V448H64V128H208a16,16,0,0,0,16-16V80a16,16,0,0,0-16-16H48A48,48,0,0,0,0,112V464a48,48,0,0,0,48,48H400a48,48,0,0,0,48-48V336A16,16,0,0,0,432,320ZM488,0h-128c-21.37,0-32.05,25.91-17,41l35.73,35.73L135,320.37a24,24,0,0,0,0,34L157.67,377a24,24,0,0,0,34,0L435.28,133.32,471,169c15,15,41,4.5,41-17V24A24,24,0,0,0,488,0Z"/></svg></button>
  </nav>
  <div id="editor-panel" class="panel animate">
    <section
      id="filetree-panel"
      class="filetree panel animate fuzzy-background"
    >
      <div class="file-control-bar-top control-bar">
        <button
          type="button"
          id="create-file-button"
          class="control-elem"
          title="New File or Folder"
        ><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 160v48c0 4.4-3.6 8-8 8h-56v56c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8v-56h-56c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h56v-56c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v56h56c4.4 0 8 3.6 8 8z"/></svg></button>
        <button
          type="button"
          id="delete-file-button"
          class="control-elem"
          title="Delete File"
          disabled
        ><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"/></svg></button>
      </div>
      <div id="filetree"></div>
      <div class="file-control-bar-bottom control-bar">
        <button
          type="button"
          id="download-button"
          class="control-elem"
          title="Download as Zip"
        ><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"/></svg></button>
        <div class="import-style-select">
          <span>Import Style</span>
          <select
            id="select-import-style"
            class=""
            title="Select Import Style"
            disabled
          >
            <option value="npm" selected="selected">NPM (default)</option>
            <option value="cdn">CDN</option>
          </select>
        </div>
      </div>
    </section>
    <section id="editor" class="panel animate">
      <div class="image-wrapper fuzzy-background">
        <img
          src="data:image/gif;base64,R0lGODlhAQABAAAAACwAAAAAAQABAAA="
          alt="Selected Texture"
          id="image-preview"
        />
      </div>
    </section>
  </div>
  <div id="preview" class="panel animate">
    <div id="preview-overlay"></div>
    
  </div>
</div></div><div class="side-menu left-menu">
  <div class="icons">
    <input type="checkbox" id="invert-colors-toggle" class="hidden-input" />
    <label
      for="invert-colors-toggle"
      class="control-elem"
      title="Day/Night Theme"
    >
      <span class="day-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"/></svg></span>
      <span class="night-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"/></svg></span>
    </label>

    <input type="checkbox" id="orientation-toggle" class="hidden-input" />
    <label
      for="orientation-toggle"
      class="control-elem hide"
      title="Orientation lock: auto/portrait/landscape"
    >
      <span class="auto-icon hide"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"/></svg></span>
      <span class="portrait-icon hide"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"/></svg></span>
      <span class="landscape-icon"><svg class="icon" role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"/></svg></span>
    </label>
  </div>

  <nav class="table-of-contents">
    <h2><a href="/book/">Table of Contents</a></h2>
    <div id="main-toc"><ul>
    <li class="section-head">
      <span class="chapter">0:</span><a href="/book/introduction/" title="Welcome to Discover three.js!">Welcome to Discover three.js!</a></li>
    <li class="">
      <span class="chapter">0.1:</span><a href="/book/introduction/about-the-book/" title="How to Use This Book">How to Use This Book</a></li>
    <li class="">
      <span class="chapter">0.2:</span><a href="/book/introduction/prerequisites/" title="What Do You Need to Run a three.js App?">What Do You Need to Run a three.js App?</a></li>
    <li class="">
      <span class="chapter">0.3:</span><a href="/book/introduction/get-help/" title="Welcome to the Community: three.js Around the Web">Welcome to the Community: three.js Around the Web</a></li>
    <li class="">
      <span class="chapter">0.4:</span><a href="/book/introduction/github-repo/" title="three.js on GitHub - Where the Magic Happens">three.js on GitHub - Where the Magic Happens</a></li>
    <li class="">
      <span class="chapter">0.5:</span><a href="/book/introduction/get-threejs/" title="How to Include three.js in Your Projects">How to Include three.js in Your Projects</a></li>
    <li class="">
      <span class="chapter">0.7:</span><a href="/book/introduction/threejs-with-frameworks/" title="Using three.js with React, Vue.js, Angular, Svelte, TypeScript...">Using three.js with React, Vue.js, Angular, Svelte, TypeScript...</a></li>
    <li class="section-head">
      <span class="chapter">1:</span><a href="/book/first-steps/" title="Getting Started: Here&#39;s Where the Real Fun Begins!">Getting Started: Here&#39;s Where the Real Fun Begins!</a></li>
    <li class="">
      <span class="chapter">1.1:</span><a href="/book/first-steps/app-structure/" title="The Structure of a three.js App">The Structure of a three.js App</a></li>
    <li class="">
      <span class="chapter">1.2:</span><a href="/book/first-steps/first-scene/" title="Your First three.js Scene: Hello, Cube!">Your First three.js Scene: Hello, Cube!</a></li>
    <li class="">
      <span class="chapter">1.3:</span><a href="/book/first-steps/world-app/" title="Introducing the World App">Introducing the World App</a></li>
    <li class="">
      <span class="chapter">1.4:</span><a href="/book/first-steps/physically-based-rendering/" title="Physically Based Rendering and Lighting">Physically Based Rendering and Lighting</a></li>
    <li class="">
      <span class="chapter">1.5:</span><a href="/book/first-steps/transformations/" title="Transformations and Coordinate Systems">Transformations and Coordinate Systems</a></li>
    <li class="">
      <span class="chapter">1.6:</span><a href="/book/first-steps/responsive-design/" title="Making Our Scenes Responsive (and also Dealing with Jaggies)">Making Our Scenes Responsive (and also Dealing with Jaggies)</a></li>
    <li class="">
      <span class="chapter">1.7:</span><a href="/book/first-steps/animation-loop/" title="The Animation Loop">The Animation Loop</a></li>
    <li class="">
      <span class="chapter">1.8:</span><a href="/book/first-steps/textures-intro/" title="A Brief Introduction to Texture Mapping">A Brief Introduction to Texture Mapping</a></li>
    <li class="">
      <span class="chapter">1.9:</span><a href="/book/first-steps/camera-controls/" title="Extend three.js With a Camera Controls Plugin">Extend three.js With a Camera Controls Plugin</a></li>
    <li class="">
      <span class="chapter">1.10:</span><a href="/book/first-steps/ambient-lighting/" title="Ambient Lighting: Illumination from Every Direction">Ambient Lighting: Illumination from Every Direction</a></li>
    <li class="">
      <span class="chapter">1.11:</span><a href="/book/first-steps/organizing-with-group/" title="Organizing Your Scenes">Organizing Your Scenes</a></li>
    <li class="">
      <span class="chapter">1.12:</span><a href="/book/first-steps/built-in-geometries/" title="The Built-In Geometries">The Built-In Geometries</a></li>
    <li class="">
      <span class="chapter">1.13:</span><a href="/book/first-steps/load-models/" title="Load 3D Models in glTF Format">Load 3D Models in glTF Format</a></li>
    <li class="">
      <span class="chapter">1.14:</span><a href="/book/first-steps/animation-system/" title="The three.js Animation System">The three.js Animation System</a></li>
    <li class="section-head">
      <span class="chapter">A:</span><a href="/book/appendix/" title="Appendices">Appendices</a></li>
    <li class="">
      <span class="chapter">A.1:</span><a href="/book/appendix/html-and-css-reference/" title="HTML and CSS Used in This Book">HTML and CSS Used in This Book</a></li>
    <li class="">
      <span class="chapter">A.2:</span><a href="/book/appendix/javascript-reference/" title="JavaScript Reference">JavaScript Reference</a></li>
    <li class="">
      <span class="chapter">A.3:</span><a href="/book/appendix/dom-api-reference/" title="The Document Object Model and DOM API">The Document Object Model and DOM API</a></li>
    <li class="">
      <span class="chapter">A.4:</span><a href="/book/appendix/javascript-modules/" title="JavaScript Modules">JavaScript Modules</a></li>
    <li class="">
      <span class="chapter">A.5:</span><a href="/book/appendix/asynchronous-javascript/" title="Asynchronous JavaScript">Asynchronous JavaScript</a></li>
    <li class="">
      <span class="chapter">B.1:</span><a href="/book/appendix/threejs-versions/" title="Dealing with Different three.js Versions">Dealing with Different three.js Versions</a></li>
    <li class="">
      <span class="chapter">B.2:</span><a href="/tips-and-tricks/" title="The Big List of three.js Tips and Tricks!">The Big List of three.js Tips and Tricks!</a></li>
</ul>
</div>
  </nav>
</div>
<nav class="side-menu right-menu">
  <h2>
    <a href="/">
      <img
        alt="Discover three.js logo"
        width="100%"
        src="/images/logo/banner_trans_512.png"
      />
    </a>
  </h2><ul class="links" style="justify-content: left">
  <li><a href="/book/">Table Of Contents</a></li>
  <li style="margin: auto">
    <a href="/#mailing-list-signup" class="internal-link"
      >Stay up to date - sign up to the mailing list!</a
    >
  </li>
</ul></nav><style>
  @font-face {
    font-family: "Open Sans";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local("Open Sans Regular"), local("OpenSans-Regular"),
      url(https://fonts.gstatic.com/s/opensans/v17/mem8YaGs126MiZpBA-UFVZ0b.woff2)
        format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
  @font-face {
    font-family: "Varela Round";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local("Varela Round Regular"), local("VarelaRound-Regular"),
      url(https://fonts.gstatic.com/s/varelaround/v12/w8gdH283Tvk__Lua32TysjIfp8uP.woff2)
        format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
  @font-face {
    font-family: "Fira Code";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url(https://fonts.gstatic.com/s/firacode/v9/uU9eCBsR6Z2vfE9aq3bL0fxyUs4tcw4W_D1sJVD7Ng.woff2)
      format("woff2");
    unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
      U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193,
      U+2212, U+2215, U+FEFF, U+FFFD;
  }
</style></body>
</html>
